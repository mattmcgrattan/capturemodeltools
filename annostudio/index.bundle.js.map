{"version":3,"sources":["webpack:///./packages/annotation-bridge/src/helpers.js","webpack:///./packages/annotation-redux/src/utility.js","webpack:///./packages/annotation-redux/src/query/selectorQuery.js","webpack:///./packages/annotation-redux/src/actions/elucidate.js","webpack:///./packages/annotation-redux/src/query/elucidateQuery.js","webpack:///./packages/annotation-redux/src/actions/manifest.js","webpack:///./packages/annotation-plugin-core/src/core.utils.js","webpack:///./packages/annotation-bridge/src/annotations.js","webpack:///./packages/annotation-components/src/index.js","webpack:///./packages/annotation-components/src/components/inputs/TextBox.scss?cbd1","webpack:///./packages/annotation-components/src/components/inputs/EmbeddedResourceEditor.js","webpack:///./packages/annotation-plugin-resource-editor/src/resourceEditor.js","webpack:///./packages/annotation-redux/src/actions/logging.js","webpack:///./packages/annotation-redux/src/lib/annotation/Annotation.js","webpack:///./packages/annotation-redux/src/lib/annotation/AnnotationSelector.js","webpack:///./packages/annotation-redux/src/lib/annotation/AnnotationBodyList.js","webpack:///./packages/annotation-redux/src/lib/annotation/AnnotationBody.js","webpack:///./packages/annotation-redux/src/actions/help.js","webpack:///./packages/annotation-plugin-core/src/core.provider.js","webpack:///./packages/annotation-plugin-core/src/core.js","webpack:///./packages/annotation-plugin-viewer/src/viewer.provider.js","webpack:///./packages/annotation-plugin-viewer/src/viewer.js","webpack:///./packages/annotation-redux/src/query/manifestQuery.js","webpack:///./packages/annotation-components/src/components/viewers/Viewer.js","webpack:///./packages/annotation-components/src/components/viewers/ScaledImageViewer.js","webpack:///./packages/annotation-components/src/components/viewers/StaticImageViewer.js","webpack:///./packages/annotation-components/src/components/selectors/Selector.js","webpack:///./packages/annotation-components/src/components/selectors/_selectorPropTypes.js","webpack:///./packages/annotation-components/src/components/inputs/Form.js","webpack:///./packages/annotation-redux/src/index.js","webpack:///./packages/annotation-redux/src/query/resourceQuery.js","webpack:///./packages/annotation-plugin-resource-editor/src/index.js","webpack:///./packages/annotation-plugin-resource-editor/src/resourceEditor.provider.js","webpack:///./packages/annotation-plugin-transcriber/src/transcriber.provider.js","webpack:///./packages/annotation-plugin-transcriber/src/transcriber.js","webpack:///./packages/annotation-plugin-tagging/src/tagging-annotations.component.js","webpack:///./packages/annotation-plugin-tagging/src/tagging-annotations.provider.js","webpack:///./packages/annotation-plugin-tagging/src/tagging.js","webpack:///./packages/annotation-plugin-tagging/src/tagging.provider.js","webpack:///./packages/annotation-application/src/index.js","webpack:///./packages/annotation-bridge/src/index.js","webpack:///./packages/annotation-redux/src/query/draftQuery.js","webpack:///./packages/annotation-application/src/css/style.scss?9f46","webpack:///./packages/annotation-application/src/css/style.scss","webpack:///./packages/annotation-application/src/css/base.scss?30d9","webpack:///./packages/annotation-application/src/css/base.scss","webpack:///./packages/annotation-application/src/css/grid.scss?a259","webpack:///./packages/annotation-application/src/css/grid.scss","webpack:///./packages/annotation-application/src/css/image-grid.scss?7588","webpack:///./packages/annotation-application/src/css/image-grid.scss","webpack:///./packages/annotation-application/src/css/collection-list.scss?cff0","webpack:///./packages/annotation-application/src/css/collection-list.scss","webpack:///./packages/annotation-application/src/css/collection-item.scss?62c2","webpack:///./packages/annotation-application/src/css/collection-item.scss","webpack:///./packages/annotation-application/src/css/topic-list.scss?d49b","webpack:///./packages/annotation-application/src/css/topic-list.scss","webpack:///./packages/annotation-application/src/css/prev-next.scss?91d4","webpack:///./packages/annotation-application/src/css/prev-next.scss","webpack:///./packages/annotation-application/src/css/pagination.scss?7571","webpack:///./packages/annotation-application/src/css/pagination.scss","webpack:///./packages/annotation-plugin-core/src/core.plugin.js","webpack:///./packages/annotation-redux/src/actions/index.js","webpack:///./packages/annotation-redux/src/lib/elucidate/AnnotationSelector.js","webpack:///./packages/annotation-redux/src/query/index.js","webpack:///./packages/annotation-redux/src/reducers/index.js","webpack:///./packages/annotation-redux/src/reducers/loggingReducer.js","webpack:///./packages/annotation-redux/src/reducers/draftReducer.js","webpack:///./packages/annotation-redux/src/reducers/annotationReducer.js","webpack:///./packages/annotation-redux/src/reducers/selectorReducer.js","webpack:///./packages/annotation-redux/src/reducers/elucidateReducer.js","webpack:///./packages/annotation-redux/src/reducers/manifestReducer.js","webpack:///./packages/annotation-redux/src/reducers/resourceReducer.js","webpack:///./packages/annotation-redux/src/reducers/helpReducer.js","webpack:///./packages/annotation-redux/src/connector.js","webpack:///./packages/annotation-redux/src/createStore.js","webpack:///./packages/annotation-redux/src/middleware.js","webpack:///./packages/annotation-plugin-viewer/src/index.js","webpack:///./packages/annotation-plugin-viewer/src/viewer.plugin.js","webpack:///./packages/annotation-bridge/src/annotationBody.js","webpack:///./packages/annotation-components/src/components/viewers/openseadragon/utility.js","webpack:///./packages/annotation-components/src/components/viewers/openseadragon/viewer.js","webpack:///./packages/annotation-components/src/components/viewers/OpenSeadragonViewer.scss?327d","webpack:///./packages/annotation-components/src/components/viewers/OpenSeadragonViewer.scss","webpack:///./packages/annotation-components/src/components/viewers/StaticImageView.scss?da17","webpack:///./packages/annotation-components/src/components/viewers/StaticImageView.scss","webpack:///./packages/annotation-components/src/components/viewers/openseadragon/withCanvas.js","webpack:///./packages/annotation-components/src/components/selectors/BoxSelector.js","webpack:///./packages/annotation-components/src/components/selectors/BoxSelector.scss?15d7","webpack:///./packages/annotation-components/src/components/selectors/BoxSelector.scss","webpack:///./packages/annotation-components/src/components/selectors/PinSelector.js","webpack:///./packages/annotation-components/src/components/selectors/PinSelector.scss?526f","webpack:///./packages/annotation-components/src/components/selectors/PinSelector.scss","webpack:///./packages/annotation-components/src/components/viewers/openseadragon/withDraggable.js","webpack:///./packages/annotation-redux/src/actions/drafts.js","webpack:///./packages/annotation-components/src/patches/react-draggable.js","webpack:///./packages/annotation-components/src/components/viewers/openseadragon/withFixedScale.js","webpack:///./packages/annotation-components/src/components/selectors/WholeCanvasSelector.js","webpack:///./packages/annotation-components/src/components/selectors/WholeCanvasSelector.scss?573a","webpack:///./packages/annotation-components/src/components/selectors/WholeCanvasSelector.scss","webpack:///./packages/annotation-components/src/components/inputs/Form.scss?f061","webpack:///./packages/annotation-components/src/components/inputs/Form.scss","webpack:///./packages/annotation-components/src/components/inputs/FormGroup.js","webpack:///./packages/annotation-components/src/components/inputs/FormField.js","webpack:///./packages/annotation-components/src/components/inputs/DatePicker.js","webpack:///./packages/annotation-redux/src/actions/viewer.js","webpack:///./packages/annotation-components/src/components/inputs/TextBox.scss","webpack:///./packages/annotation-components/src/components/inputs/DropDown.js","webpack:///./packages/annotation-components/src/components/inputs/DropDown.scss?e4d0","webpack:///./packages/annotation-components/src/components/inputs/DropDown.scss","webpack:///./packages/annotation-bridge/src/vocab.js","webpack:///./packages/annotation-components/src/components/inputs/GoogleMapSearch.js","webpack:///./packages/annotation-plugin-core/src/index.js","webpack:///./packages/annotation-redux/src/actions/annotations.js","webpack:///./packages/annotation-redux/src/actions/selectors.js","webpack:///./packages/annotation-components/src/components/inputs/GoogleMapSearch.scss?c535","webpack:///./packages/annotation-components/src/components/inputs/GoogleMapSearch.scss","webpack:///./packages/annotation-components/src/components/inputs/TextArea.js","webpack:///./packages/annotation-components/src/components/inputs/TextBox.js","webpack:///./packages/annotation-components/src/components/inputs/Fallback.js","webpack:///./packages/annotation-components/src/components/inputs/EmbeddedResourceEditor.scss?73c1","webpack:///./packages/annotation-components/src/components/inputs/EmbeddedResourceEditor.scss","webpack:///./packages/annotation-components/src/components/inputs/Autocomplete.js","webpack:///./packages/annotation-redux/src/actions/resources.js","webpack:///./packages/annotation-components/src/components/inputs/NullableCaptureModel.js","webpack:///./packages/annotation-components/src/components/domain/validation.js","webpack:///./packages/annotation-components/src/components/composites/Canvas.js","webpack:///./packages/annotation-components/src/components/ui/Toggle.js","webpack:///./packages/annotation-components/src/components/ui/Toggle.scss?8f56","webpack:///./packages/annotation-components/src/components/ui/Toggle.scss","webpack:///./packages/annotation-components/src/components/composites/Canvas.scss?a5dc","webpack:///./packages/annotation-components/src/components/composites/Canvas.scss","webpack:///./packages/annotation-redux/src/lib/elucidate/index.js","webpack:///./packages/annotation-components/src/components/viewers/Region.js","webpack:///./packages/annotation-components/src/components/viewers/Region.scss?f655","webpack:///./packages/annotation-components/src/components/viewers/Region.scss","webpack:///./packages/annotation-components/src/components/composites/ConfirmationForm.js","webpack:///./packages/annotation-components/src/components/composites/Router.js","webpack:///./packages/annotation-plugin-resource-editor/src/resourceEditor.plugin.js","webpack:///./packages/annotation-bridge/src/model/Choice.js","webpack:///./packages/annotation-bridge/src/model/CaptureModel.js","webpack:///./packages/annotation-bridge/src/model/Field.js","webpack:///./packages/annotation-redux/src/lib/annotation/mapping.js","webpack:///./packages/annotation-plugin-resource-editor/src/views/renderForm.js","webpack:///./packages/annotation-plugin-resource-editor/src/resourceEditor.utility.js","webpack:///./packages/annotation-plugin-resource-editor/src/views/confirmationPage.js","webpack:///./packages/annotation-plugin-resource-editor/src/views/button.scss?d9e3","webpack:///./packages/annotation-plugin-resource-editor/src/views/button.scss","webpack:///./packages/annotation-plugin-resource-editor/src/views/resourceNavigation.js","webpack:///./packages/annotation-plugin-resource-editor/src/views/resourceNavigation.scss?9d19","webpack:///./packages/annotation-plugin-resource-editor/src/views/resourceNavigation.scss","webpack:///./packages/annotation-plugin-transcriber/src/index.js","webpack:///./packages/annotation-plugin-transcriber/src/transcriber.plugin.js","webpack:///./packages/annotation-plugin-tagging/src/index.js","webpack:///./packages/annotation-plugin-tagging/src/tagging.utils.js","webpack:///./packages/annotation-plugin-tagging/src/tagging-annotations.plugin.js","webpack:///./packages/annotation-plugin-tagging/src/tagging.plugin.js","webpack:///./packages/annotation-application/src/js/region-annotations.js"],"names":["castBool","str","toLowerCase","parseSelectorTarget","toParse","scale","W3C_SELECTOR","match","exec","unit","expanded","x","parseFloat","y","width","height","toString","split","castId","value","defaultValue","get","prop","getMotivationInstance","motive","indexOf","substr","motivationFromForm","motivatedBy","id","label","instance","labelId","res","Object","prototype","call","map","iteratorGenerator","generator","props","next","SHOW_LOGS","SHOW_WARNINGS","log","args","console","info","warn","selectorCompat","item","left","defineProperty","top","getCurrentSelector","state","selector","currentSelector","isSelecting","type","currentSelectorIsSecondary","secondary","ELUCIDATE_SET_SERVER","ELUCIDATE_SET_RESOURCE","ELUCIDATE_CREATE_COLLECTION","ELUCIDATE_SET_COLLECTION","ELUCIDATE_SEND_ANNOTATION","ELUCIDATE_ADD_ANNOTATION","initialiseElucidate","elucidateServer","resource","resourceLabel","dispatch","setServer","setResource","createCollection","server","payload","resourceId","getServer","createElucidateCollection","md5","then","collection","setCollection","addElucidateAnnotation","annotation","elucidateSendAnnotation","toJSON","createAnnotation","getCollectionId","postAnnotation","sendAnnotation","body","target","motivation","sendAnnotationToServer","elucidate","getAnnotationById","annotations","isSendingAnnotations","pendingAnnotations","getCanvasFromManifest","manifest","canvasId","sequences","canvases","canvas","richAnnotationList","annotationList","AnnotationSelector","parse","elucidateAnnotations","keys","key","elucidateAnnotationsExist","length","MANIFEST_ADD","MANIFEST_SELECT","MANIFEST_REMOVE","MANIFEST_REQUEST","MANIFEST_CANVAS_SELECT","requestManifest","url","select","fetch","response","json","addManifest","selectCanvas","selectManifest","removeManifest","getAttributes","$el","attributes","i","prettyName","nodeName","nodeValue","deferred","resolve","promise","Promise","r","unknownPropertyWarning","unknownProps","connectedBehaviour","store","Component","render","attr","substring","replace","g","toUpperCase","asyncForEach","iterable","fn","nextIterate","done","catch","e","parseTarget","mapTarget","boxSelector","resourceTemplateReverseTypeLookup","fields","template","values","metaData","conformsTo","mapAnnotationBody","resourceTemplate","bodyFields","fieldMap","forEach","field","createDraftListFromAnnotations","anno","createDraftFromAnnotation","immutableRegionsFromDraftList","drafts","filter","k","onClick","selected","editing","immutable","immutableRegionsFromAnnotations","editableRegionsFromDraftList","currentDraftKey","onClickRegion","currentSelectorExists","detectTypeOfAnnotation","getAnnotationBody","JSON","AnnotationBody","fromBody","mapTargetToSelector","input","isPublishing","isPreviewing","published","style","BEM","block","EmbeddedResourceEditor","isLoaded","isLoading","renderCurrentValue","renderResource","renderResourceEditor","captureModel","postSave","captureModelId","componentDidMount","importCaptureModel","setState","displayFieldSelector","element","title","selectorValue","preventDefault","description","ResourceEditor","createAnnotationToBeMovedToAnnotationRedux","targetResource","currentResource","asyncPublishDraft","currentDraft","createAnnotationFromCaptureModelAndDraft","Array","isArray","all","singleAnnotation","result","createAnnotationWithoutTechDebt","resolveSelector","draft","hasMultipleSelectorsWithPercentages","hasSelectors","selectors","reduce","action","withViewer","err","viewer","getImageSize","convertPercentToPixel","draftFieldSelectors","currentResourceTemplate","resourceForm","tree","isConfirmingDraft","updateDraft","unpreviewDraft","confirmDraft","previewDraft","discardCurrentDraft","createDraft","isSelectingSecondary","editCurrentDraftSelector","editCurrentDraftSecondarySelector","editCurrentDraftFieldSelector","moveForward","moveBack","reset","hideTitle","draftDefaults","choice","matches","resourceNavigation","showBackButton","isAtRoot","resourceTemplates","rt","resources","getDraftFromCaptureModel","getResourceById","confirmationPage","onConfirm","renderForm","onSave","goBack","editFieldSelector","currentTree","elementEvents","onFocus","focused","onBlur","Choose","immediate","ConnectedResourceEditor","connector","ownProps","LOGGING_LOG","message","Annotation","constructor","undefined","fromJsonLD","jsonLd","AnnotationBodyList","fromArray","multipleSelectors","format","language","processingLanguage","textDirection","DIRECTION_AUTO","DIRECTION_LTR","DIRECTION_RTL","Error","source","fromTarget","annotationSelector","text","_","__","v","parseInt","isNaN","Math","floor","list","getOfType","find","TextualBody","Image","Video","Sound","Text","SpecificResource","Dataset","j","purpose","HELP_INFO_ADD","HELP_INFO_REMOVE","HELP_CONTEXT_ADD","HELP_CONTEXT_REMOVE","addInfo","content","removeInfo","setContext","removeContext","CoreProvider","Core","subject","c","getAllAnnotationsFromCollection","display","ViewerProvider","Viewer","setViewer","MAX_HEIGHT","window","innerHeight","image","selectedViewer","updateDimensions","editableRegions","dimensions","toggleable","currentDraftSelectors","updateSelector","commitToCurrentDraft","VIEWER_WIDTH","regions","resourceTemplateList","region","selectedCanvas","currentCanvas","ref","isSecondary","src","withState","currentManifest","manifestById","current","getImageServiceFromCanvas","images","service","thumbnail","currentImageService","allManifests","manifestKeys","compose","branch","renderComponent","withManifest","withCanvas","renderNothing","ScaledImageViewer","getSelectedRegion","pop","createRelativePoint","createViewportPoint","getRef","getRegions","scaled","StaticImageViewer","resolveRegion","modifiers","Selector","PropTypes","string","isRequired","func","onCancel","initialPosition","shape","number","Form","renderGroups","groups","groupKeys","FormGroup","DEFAULT_GROUP","omekaMetaData","group","push","defaultGroup","applyDefaultsToDraft","form","getForm","s","f","draftDefaultKeys","filledInputs","getCurrentResource","currentPaths","trees","node","curState","path","error","hasLandedOnForm","currentItem","getCurrentResourceTemplate","scope","getCurrentDraft","meta","getCurrentPath","obj","currentPath","o","ResourceEditorProvider","TranscriberProvider","$style","Transcriber","createDraftFromCaptureModel","transcriptionVocab","transcription","modifier","TaggingAnnotations","entityTypes","regionAnnotations","concat","wholeCanvasAnnotations","isTaggedAs","sort","a","b","tagDetails","uri","localeCompare","output","slice","prev","prevUri","nextUri","TaggingAnnotationsProvider","Tagging","isAdding","handleAdd","hasDraft","TaggingProvider","process","env","NODE_ENV","whyDidYouUpdate","require","createClass","React","set","nextCreateClass","behaviours","resolveSharedStore","CorePlugin","TaggingPlugin","whenToRender","utils","document","addEventListener","querySelectorAll","register","attribute","getAttribute","behaviour","mapDraftToDataSet","contexts","model","getLabelFromResourceTemplate","data","labelParts","labelField","dataSetToAnnotation","dataset","stringify","dataSetToSingleAnnotation","context","Title","Description","getIndividualW3CAnnotationBodies","capModel","keyedSelectors","getW3CAnnotationBody","defaultMotivation","getState","getDraftTemplateFromCaptureModel","getDraftSelectorsFromCaptureModel","constructUnknownTemplate","Choice","is","CaptureModel","importResourceTemplate","importResource","importResourceTree","getTree","flatten","getCurrentDraftId","currentDrafts","getCurrentDrafts","getDraftById","getAllDraftsWithSelectors","getDraftsWithSelectors","currentDraftEditableRegions","mapDraftSelectorToRegion","currentDraftKeys","keysAsString","createStore","logging","help","defaultState","messages","loggingReducer","update","$push","isConfirmed","draftModel","draftReducer","$set","$merge","$apply","copy","listUpdate","annotationReducer","available","selectorReducer","defaults","loading","elucidateReducer","assign","n","pending","manifestReducer","captureModelDefaults","resourceReducer","warning","bindCurrentResource","actions","WrappedComponent","connect","currentDraftList","currentDraftId","isSelectingPrimary","draftIsCurrentlySelecting","draftHasSelector","bindActionCreators","deselectDraft","discardDraft","removeSelectorFromCurrentDraft","selectDraft","commitToCurrentDraftField","cancelSelector","chooseSecondarySelector","setAvailableSelectors","chooseSelector","addSelectorToDraftFromViewer","removeSelectorFromDraft","addAnnotation","publishDraft","withRef","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createCustomStore","reducers","extraMiddleware","combineReducers","applyMiddleware","logger","__DEV__","ViewerStore","viewerReady","viewerAware","showUntilQueue","showUntil","name","names","ViewerPlugin","querySelector","tagClassForUri","regex","textualBody","specificResource","isValidTileSource","tileSource","protocol","profile","getCanonicalImage","resolveRealTileSourceFromCanvas","resolveRealTileSource","createElement","isSelected","container","setAttribute","classList","add","appendChild","BaseComponent","mapProps","regionIds","lifecycle","componentWillMount","asyncAddTile","success","addTiledImage","viewport","viewerElementToImageCoordinates","OpenSeadragon","Point","imageToViewerElementCoordinates","setFallback","onImageLoaded","ajaxWithCredentials","showNavigator","showRotationControl","defaultZoomLevel","maxZoomPixelRatio","navigatorPosition","animationTime","immediateRender","preserveViewport","blendTime","minPixelRatio","visibilityRatio","constrainDuringPan","showSequenceControl","showNavigationControl","showZoomControl","showHomeControl","showFullPageControl","sequenceMode","prefixUrl","goHome","fallback","maxHeight","Infinity","actualHeight","position","el","styles","pointerEvents","overflow","transform","transformOrigin","bindEvents","addHandler","resize","firstImage","world","getItemAt","imgWidth","imgHeight","imgAspectRatio","boundsRect","getBounds","viewportOrigin","viewportWidth","viewportHeight","viewportZoom","getZoom","zoom","viewportToImageZoom","rotation","getRotation","clientWidth","clientHeight","getPosition","canvasScale","transformOut","transformIn","defaultX","defaultY","onChange","onUpdate","onCommit","children","Children","child","cloneElement","BoxSelector","updateHeightWidth","rnd","resizable","save","getInitialPosition","color","$pin","PinSelector","withDraggable","withFixedScale","onDrag","deltaX","deltaY","onStop","drag","zIndex","DRAFT_CREATE","DRAFT_UPDATE_SELECTOR","DRAFT_REMOVE_SELECTOR","DRAFT_UPDATE_FIELD_SELECTOR","DRAFT_REMOVE_FIELD_SELECTOR","DRAFT_UPDATE_INPUT","DRAFT_SELECT","DRAFT_DESELECT","DRAFT_PUBLISHING","DRAFT_PUBLISHED","DRAFT_PREVIEW","DRAFT_UNPREVIEW","DRAFT_CONFIRM","DRAFT_DISCARD","emptyInput","uuid","currentTemplate","addSelectorToDraftField","fieldId","addSelectorToDraftFieldFromViewer","Canvas","topLeft","bottomRight","removeSelectorFromDraftField","convertSelectorFromCanvas","addSelectorToDraft","webpackUniversalModuleDefinition","root","factory","module","exports","define","amd","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","installedModules","__webpack_require__","moduleId","loaded","m","p","default","DraggableCore","_extends","arguments","hasOwnProperty","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","TypeError","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_reactDom","_reactDom2","_classnames","_classnames2","_domFns","_positionFns","_shims","_DraggableCore","_DraggableCore2","_log","_log2","__esModule","_defineProperty","_classCallCheck","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Draggable","_React$Component","_this","getPrototypeOf","onDragStart","coreData","shouldStart","onStart","createDraggableData","dragging","dragged","uiData","newState","bounds","_x","_y","slackX","slackY","_getBoundPosition","getBoundPosition","_getBoundPosition2","shouldUpdate","onDragStop","shouldStop","controlled","Boolean","_this$props$position","_x2","_y2","defaultPosition","isElementSVG","SVGElement","findDOMNode","componentWillReceiveProps","nextProps","componentWillUnmount","_classNames","svgTransform","draggable","transformOpts","canDragX","canDragY","createSVGTransform","createCSSTransform","_props","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","className","only","displayName","propTypes","axis","oneOf","oneOfType","right","bottom","dontSetMe","defaultProps","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classNames","classes","arg","argType","apply","join","matchesSelector","matchesSelectorAndParentsTo","addEvent","removeEvent","outerHeight","outerWidth","innerWidth","offsetXYFromParent","getTouch","getTouchIdentifier","addUserSelectStyles","removeUserSelectStyles","styleHacks","_getPrefix","_getPrefix2","matchesSelectorFunc","findInArray","method","isFunction","baseNode","parentNode","event","handler","attachEvent","detachEvent","removeEventListener","computedStyle","ownerDocument","defaultView","getComputedStyle","int","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","evt","offsetParent","isBody","offsetParentRect","getBoundingClientRect","clientX","scrollLeft","clientY","scrollTop","_ref","browserPrefixToKey","_ref3","identifier","targetTouches","t","changedTouches","userSelectPrefix","getPrefix","userSelect","browserPrefixToStyle","userSelectStyle","userSelectReplaceRegExp","RegExp","childStyle","touchAction","isNum","array","callback","num","propName","componentName","prefixes","documentElement","prefix","kebabToTitleCase","out","shouldCapitalize","snapToGrid","getControlPosition","createCoreData","cloneBounds","ownerWindow","boundNode","nodeStyle","boundNodeStyle","offsetLeft","marginLeft","offsetTop","marginTop","min","max","grid","pendingX","pendingY","round","touchIdentifier","draggableCore","touchObj","isStart","lastX","lastY","eventsFor","touch","start","move","stop","mouse","dragEventFor","_temp","_ret","_len","_key","NaN","handleDragStart","onMouseDown","allowAnyClick","button","domNode","disabled","Node","handle","cancel","coreEvent","enableUserSelectHack","handleDrag","handleDragStop","_snapToGrid","_snapToGrid2","MouseEvent","createEvent","initMouseEvent","_ReactDOM$findDOMNode","onMouseUp","onTouchStart","onTouchEnd","_ReactDOM$findDOMNode2","bool","browser","nodeType","arrayOf","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","nextTick","Item","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","_console","WholeCanvasSelector","skipConfirm","isOpen","toggle","groupKey","groupClass","groupKeyClass","open","FormField","validate","updateField","draftId","allProps","validation","VALIDATION_MAP","bind","inputType","annotationMetaData","autocomplete","options","isOption","option","opts","DatePicker","handleChange","time","toISOString","preview","moment","isValid","VIEWER_MUTATION","VIEWER_ACCESS","printf","val","DropDown","suggestions","selectSuggestion","suggestion","updateSuggestions","completions","renderBox","currentTarget","ID","CONTEXT","TYPE","VALUE","DESCRIPTION","TITLE","CONFORMS_TO","FORM_FIELDS","HAS_PART","RDFS_LABEL","OMEKA_LABEL","COMBINE","FIELD_GROUP","LABEL_PARTS","UI_GROUP","EXTERNALISE","HUMAN_READABLE","MOTIVATED_BY","SERIALIZE","MULTIPLE","UI_CHOICE","SELECTOR","SELECTOR_VALUE","BODY_TYPE","PURPOSE","INPUT_TYPE","INPUT_OPTIONS","BOX_SELECTOR","WHOLE_CANVAS_SELECTOR","GoogleMapDraggablePin","withGoogleMap","onMapLoad","location","dragEnd","GoogleMapSearch","currentLocation","valueAsString","lat","lng","background","latLng","ANNOTATIONS_ADD","SELECTOR_SET_AVAILABLE","SELECTOR_CHOOSE","SELECTOR_UPDATE","SELECTOR_COMMIT_TO_DRAFT","SELECTOR_COMMIT_TO_DRAFT_FIELD","SELECTOR_CANCEL","maxX","maxY","fromViewer","isViewer","TextArea","TextBox","shouldComponentUpdate","newProps","events","Fallback","creatingNew","handleNotFound","encodeURIComponent","AUTOCOMPLETE_DEBOUNCE_DELAY","KEYCODE_ESCAPE","Autocomplete","suggestionListHidden","fetchNewSuggestions","debounce","suggestionProvider","handleInputReference","handleCompletionSelection","selection","updateValue","focus","handleKeyUp","keyCode","suggestionList","IMPORT_RESOURCE_TREE","IMPORT_RESOURCE_CHOICE","IMPORT_RESOURCE_FIELD","IMPORT_UNKNOWN_RESOURCE","IMPORT_CAPTURE_MODEL","RESOURCE_NAV_FORWARD","RESOURCE_NAV_BACK","RESOURCE_NAV_RESET","importResourceWithPercentage","importChoice","importField","parentId","fixedResource","NullableCaptureModel","isChecked","isSaved","onReceiveEmbeddedItem","getCaptureModel","checkbox","$canvas","mapRegion","index","regionType","regionWidth","onEditRegion","displayWidth","onUpdateSelector","onSaveSelector","resolveViewer","showAnnotations","renderCurrentSelector","relativeTo","CANVAS_RELATIVE","isInitial","nextState","getScale","showAnnotationToggle","regionRender","reverse","currentSelectorPropsViewport","currentSelectorPropsCanvas","toggleAnnotations","VIEWPORT_RELATIVE","Toggle","isActive","nativeEvent","currentPage","items","fetchPageCollection","JSON_LD_HEADERS","Accept","makeRequest","headers","credentials","status","statusText","post","getAnnotation","collectionResource","firstPage","first","Slug","Region","renderRegionBox","canChange","getElementById","isChanging","pixelScale","onEdit","posX","posY","baseStyle","ConfirmationForm","isEqual","bem","nextLabel","editLabel","saveLabel","last","Router","routes","renderNotFound","route","fontWeight","ResourceEditorPlugin","serializationStrategy","$","isValidTarget","combine","externalise","humanReadable","serialize","multiple","fromData","choices","asArray","Field","dereferenceFields","getReference","parent","getAutocompleteEndpoint","bodyType","FIELD_TYPES_THAT_ARE_ENTITIES","FIELD_TYPES_THAT_ARE_HUMAN_READABLE","createCombinedAnnotationBody","mapFieldsToDataSet","getModelFields","ids","fieldIds","createExternalResourceAnnotationBody","draftInput","createHumanReadableAnnotationBody","createSerializedAnnotationBody","dataSet","createMultipleAnnotations","fieldKeys","captureModelField","getGenerator","getLabelFromDraft","getSuitableLabelFromBody","bodies","found","getMotivation","customDraftSelector","draftSelector","serializedBody","getTargetFromRegion","$confirmationPage","$button","$resourceNavigation","handleItemClick","TranscriberPlugin","innerText","annotationToTag","bodyDetails","details","fragment","types","some","entityType","TaggingAnnotationsPlugin","getImageFromTarget","size","imageService","RegionAnnotations"],"mappings":"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","file":"index.bundle.js","sourcesContent":["import { ID, OMEKA_LABEL } from './vocab';\n\n// HELPER\nexport function castBool(str) {\n  if (str === true) return true;\n  if (str === false) return false;\n  return str.toLowerCase() === 'true';\n}\n\nexport function parseSelectorTarget(toParse, scale = 1) {\n  if (!toParse) {\n    return toParse;\n  }\n  const W3C_SELECTOR = /[#&?](xywh=)?(pixel:|percent:)?([0-9]+(\\.[0-9]+)?),([0-9]+(\\.[0-9]+)?),([0-9]+(\\.[0-9]+)?),([0-9]+(\\.[0-9]+)?)/;\n  const match = W3C_SELECTOR.exec(toParse);\n\n  if (match) {\n    return {\n      unit: (match[2] === 'percent:' ? 'percent' : 'pixel'),\n      scale,\n      expanded: true,\n      x: parseFloat(match[3]) * scale,\n      y: parseFloat(match[5]) * scale,\n      width: parseFloat(match[7]) * scale,\n      height: parseFloat(match[9]) * scale,\n      toString() {\n        // @todo maybe something else?\n        return toParse.split('#')[0];\n      },\n    };\n  }\n  return toParse;\n}\n\nexport function castId(value, defaultValue) {\n  return (value[ID] ? value[ID] : value) || defaultValue;\n}\n\nexport function get(value) {\n  return (prop, defaultValue) => value ? value[prop] : defaultValue;\n}\n\nexport function getMotivationInstance(str) {\n  const motive = str.toLowerCase();\n  // Remove the open annotation prefix.\n  if (motive.indexOf('oa:') === 0) {\n    return getMotivationInstance(motive.substr(3));\n  }\n  if (motive.indexOf('o:') === 0) {\n    return getMotivationInstance(motive.substr(2));\n  }\n  if ([\n      'assessing',\n      'bookmarking',\n      'classifying',\n      'commenting',\n      'describing',\n      'editing',\n      'highlighting',\n      'identifying',\n      'linking',\n      'moderating',\n      'questioning',\n      'replying',\n      'tagging',\n    ].indexOf(motive) !== -1) {\n    return motive;\n  }\n\n  // This is the default to fallback to.\n  return 'tagging';\n}\n\nexport function motivationFromForm(motivatedBy) {\n  if (!motivatedBy) {\n    return null;\n  }\n  if (!motivatedBy.id) {\n    return null;\n  }\n  return {\n    id: motivatedBy.id,\n    label: motivatedBy.label ? motivatedBy.label : motivatedBy.id,\n    instance: getMotivationInstance(motivatedBy.id),\n  }\n}\n\nexport function labelId(res, defaultValue) {\n  if (!res) {\n    return defaultValue ? defaultValue : {\n      id: null,\n      label: 'unknown',\n    }\n  }\n  if (Object.prototype.toString.call(res) === '[object Array]') {\n    return res.map(labelId);\n  }\n\n  return {\n    id: res[ID],\n    label: res[OMEKA_LABEL],\n  }\n}\n\nexport function iteratorGenerator(generator) {\n  const instance = generator();\n  return (...props) => {\n    return instance.next(props).value;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/helpers.js","const SHOW_LOGS = false;\nconst SHOW_WARNINGS = false;\n\nfunction log(...args) {\n  if (SHOW_LOGS) {\n    console.info(...args);\n  }\n}\nfunction warn(...args) {\n  if (SHOW_WARNINGS) {\n    warn(...args);\n  }\n}\n\nexport function selectorCompat(item) {\n  if (!item) {\n    return item;\n  }\n\n  if (item.x && !item.left) {\n    log('Selector compatibility: Adding left property.');\n    Object.defineProperty(item, 'left', {\n      get: function () {\n        warn('Selector compatibility: Using deprecated `left` property.');\n        return this.x;\n      },\n    });\n  }\n  if (item.y && !item.top) {\n    log('Selector compatibility: Adding top property.');\n    Object.defineProperty(item, 'top', {\n      get: function () {\n        warn('Selector compatibility: Using deprecated `top` property.');\n        return this.y;\n      },\n    });\n  }\n\n  if (item.left && !item.x) {\n    warn('Selector compatibility: Missing `x` property, but found `left`, shimming.');\n    item.x = item.left;\n  }\n\n  if (item.top && !item.y) {\n    warn('Selector compatibility: Missing `y` property, but found `top`, shimming.');\n    item.y = item.top;\n  }\n\n  return item;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/utility.js","export function getCurrentSelector(state) {\n  return state.selector.currentSelector;\n}\n\nexport function isSelecting(state) {\n  return (\n    state.selector &&\n    state.selector.currentSelector &&\n    state.selector.currentSelector.type\n  );\n}\n\nexport function currentSelectorIsSecondary(state) {\n  return (\n    isSelecting(state) &&\n    state.selector.currentSelector.secondary &&\n    state.selector.currentSelector.secondary === true\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/query/selectorQuery.js","import md5 from 'blueimp-md5';\nimport { getCollectionId, getServer } from '../query/elucidateQuery';\nimport { createElucidateCollection, sendAnnotationToServer, postAnnotation } from '../lib/elucidate';\nimport Annotation from '../lib/annotation/Annotation';\nexport const ELUCIDATE_SET_SERVER = 'ELUCIDATE_SET_SERVER';\nexport const ELUCIDATE_SET_RESOURCE = 'ELUCIDATE_SET_RESOURCE';\nexport const ELUCIDATE_CREATE_COLLECTION = 'ELUCIDATE_CREATE_COLLECTION';\nexport const ELUCIDATE_SET_COLLECTION = 'ELUCIDATE_SET_COLLECTION';\nexport const ELUCIDATE_SEND_ANNOTATION = 'ELUCIDATE_SEND_ANNOTATION';\nexport const ELUCIDATE_ADD_ANNOTATION = 'ELUCIDATE_ADD_ANNOTATION';\n\nexport function initialiseElucidate(elucidateServer, resource, resourceLabel) {\n  return (dispatch, state) => {\n    if (!elucidateServer) {\n      return null;\n    }\n    dispatch(setServer(elucidateServer));\n    dispatch(setResource(resource));\n    dispatch(createCollection(resourceLabel, resource));\n  }\n}\n\nexport function setServer(server) {\n  return { type: ELUCIDATE_SET_SERVER, payload: { server } };\n}\n\nexport function setResource(resource) {\n  return { type: ELUCIDATE_SET_RESOURCE, payload: { resource } };\n}\n\nexport function createCollection(label, resourceId) {\n  return (dispatch, state) => {\n    dispatch({ type: ELUCIDATE_CREATE_COLLECTION, payload: { label, resourceId } });\n    const elucidateServer = getServer(state());\n    return createElucidateCollection(elucidateServer, label, md5(resourceId)).then(\n      collection => {\n        dispatch(\n          setCollection(resourceId, collection),\n        );\n        return collection;\n      },\n    );\n  }\n}\n\nexport function setCollection(resourceId, collection) {\n  return {\n    type: ELUCIDATE_SET_COLLECTION,\n    payload: { resourceId, collection },\n  };\n}\n\nexport function addElucidateAnnotation(annotation) {\n  return { type: ELUCIDATE_ADD_ANNOTATION, payload: { id: annotation.id, annotation } };\n}\n\nexport function elucidateSendAnnotation(annotation: Annotation) {\n  return {\n    type: ELUCIDATE_SEND_ANNOTATION,\n    payload: { annotation: annotation.toJSON() }\n  };\n}\n\nexport function createAnnotation(annotation: Annotation) {\n  return (dispatch, state) => {\n    dispatch(elucidateSendAnnotation(annotation));\n    const collection = getCollectionId(state());\n    return postAnnotation(collection, annotation).then(\n      annotation =>\n        dispatch(\n          addElucidateAnnotation(annotation)\n        )\n    );\n  }\n}\n\n/**\n * @deprecated\n */\nexport function sendAnnotation(body, target, motivation, label) {\n  return (dispatch, state) => {\n    dispatch({ type: ELUCIDATE_SEND_ANNOTATION, payload: { annotation: { body, target, motivation, label } } });\n    const collection = getCollectionId(state());\n    return sendAnnotationToServer(collection, body, target, motivation, label).then(\n      annotation =>\n        dispatch(\n          addElucidateAnnotation(annotation),\n        ),\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/elucidate.js","import { AnnotationSelector } from '../lib/elucidate/index';\nexport function getServer(state) {\n  return state.elucidate.server;\n}\n\nexport function getAnnotationById(state, id) {\n  return state.elucidate.annotations[id];\n}\n\nexport function isSendingAnnotations(state) {\n  return state.elucidate.pendingAnnotations > 0;\n}\n\nexport function getCanvasFromManifest(manifest, canvasId) {\n  if (!(\n      manifest ||\n      manifest.sequences ||\n      manifest.sequences[0] ||\n      manifest.sequences[0].canvases\n    )) {\n    return null;\n  }\n  const canvases = manifest.sequences[0].canvases;\n  for (let canvas of canvases) {\n    if (canvas['@id'] === canvasId) {\n      return canvas;\n    }\n  }\n  return null;\n}\n\nexport function getCollectionId(state) {\n  return state.elucidate.collection.id;\n}\n\n// @todo swap into annotationList eventually.\nexport function richAnnotationList(state) {\n  return annotationList(state).map(annotation => ({\n    ...annotation,\n    selector: AnnotationSelector.parse(annotation.target),\n  }))\n}\n\nexport function annotationList(state) {\n  const elucidateAnnotations = Object.keys(state.elucidate.annotations).map(key => state.elucidate.annotations[key]);\n  const elucidateAnnotationsExist = !!elucidateAnnotations.length;\n  if (!elucidateAnnotationsExist) {\n    return [];\n  }\n  return elucidateAnnotations;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/query/elucidateQuery.js","export const MANIFEST_ADD = 'MANIFEST_ADD';\nexport const MANIFEST_SELECT = 'MANIFEST_SELECT';\nexport const MANIFEST_REMOVE = 'MANIFEST_REMOVE';\nexport const MANIFEST_REQUEST = 'MANIFEST_REQUEST';\nexport const MANIFEST_CANVAS_SELECT = 'MANIFEST_CANVAS_SELECT';\n\nexport function requestManifest(url, select = true) {\n  return dispatch => {\n    dispatch({ type: MANIFEST_REQUEST, payload: { url } });\n    return fetch(url)\n      .then(response => response.json())\n      .then((body) => {\n        dispatch(addManifest(url, body));\n        if (select) {\n          dispatch(selectCanvas(url));\n        }\n        return body;\n      });\n  }\n}\n\nexport function selectCanvas(url) {\n  return { type: MANIFEST_CANVAS_SELECT, payload: { url } };\n}\n\nexport function selectManifest(url) {\n  return { type: MANIFEST_SELECT, payload: { url } };\n}\n\nexport function addManifest(url, manifest) {\n  return { type: MANIFEST_ADD, payload: { url, manifest } };\n}\n\nexport function removeManifest(url) {\n  return { type: MANIFEST_REMOVE, payload: { url } };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/manifest.js","import React from 'react';\nimport {render} from 'react-dom';\nimport {Provider} from 'react-redux';\n\nexport function getAttributes($el) {\n  const attributes = {};\n  const length = $el.attributes.length;\n  if (length > 0) {\n    for (let i = 0; i < length; i++) {\n      attributes[prettyName($el.attributes[i].nodeName)] = $el.attributes[i].nodeValue;\n    }\n  }\n  return attributes;\n}\n\nexport function deferred() {\n  let resolve = null;\n  const promise = new Promise(r => {\n    resolve = r;\n  });\n  return {resolve, promise};\n}\n\nexport function unknownPropertyWarning(unknownProps) {\n  delete unknownProps['class'];\n  delete unknownProps['behaviour'];\n  delete unknownProps['style'];\n  if (Object.keys(unknownProps).length) {\n    console.warn('Found unknown properties passed to component', unknownProps);\n  }\n}\n\nexport function connectedBehaviour($el, store, Component) {\n  return render((\n    <Provider store={store}>\n      <Component />\n    </Provider>\n  ), $el);\n}\n\nexport function prettyName(attr) {\n  if (attr.indexOf('data-') === 0) {\n    return attr\n    .substring(5)\n    .replace(/-([a-z])/g, g => g[1].toUpperCase());\n  }\n  return attr;\n}\n\nexport function asyncForEach(iterable, fn) {\n  iterable.next().then(nextIterate => {\n    if (nextIterate.done) {\n      return;\n    }\n    fn(nextIterate.value);\n    return asyncForEach(iterable, fn);\n  }).catch(e => {\n    console.warn('asyncForEach: ', e, iterable);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-core/src/core.utils.js","import { BOX_SELECTOR, WHOLE_CANVAS_SELECTOR } from './vocab';\nimport AnnotationBody from './annotationBody';\nimport { AnnotationSelector } from 'digirati-annotation-redux/es/lib/elucidate/index';\n\n/**\n * @deprecated\n */\nexport function parseTarget(target, scale = 1) {\n  return AnnotationSelector.parse(target, scale);\n}\n\nexport function mapTarget(target, scale = 1) {\n  const boxSelector = parseTarget(target, scale);\n  if (!boxSelector || typeof boxSelector.target === 'string') {\n    return { type: WHOLE_CANVAS_SELECTOR, target: (boxSelector && boxSelector.target) || '' };\n  }\n  boxSelector.type = BOX_SELECTOR;\n  return boxSelector;\n}\n\nexport function resourceTemplateReverseTypeLookup(fields, key) {\n  for (let template of Object.values(fields)) {\n    if (template.metaData.conformsTo.label === key) {\n      return template;\n    }\n  }\n  return null;\n}\n\nexport function mapAnnotationBody(resourceTemplate, bodyFields) {\n  const fields = Object.keys(bodyFields);\n  const fieldMap = {};\n\n  fields.forEach(field => {\n    const template = resourceTemplateReverseTypeLookup(resourceTemplate, field);\n    if (template) {\n      fieldMap[template.id] = bodyFields[field];\n    }\n  });\n\n  return fieldMap;\n}\n\nexport function createDraftListFromAnnotations(annotations, resourceTemplate, scale) {\n  return annotations.map(anno => createDraftFromAnnotation(resourceTemplate, anno, scale));\n}\n\nexport function immutableRegionsFromDraftList(drafts) {\n  return Object.keys(drafts)\n    .filter(k => drafts[k] && drafts[k].selector)\n    .map(k => drafts[k])\n    .filter(anno => anno && anno.selector)\n    .map(anno => {\n      const r = anno.selector.target;\n      return {\n        id: anno.id,\n        onClick: () => {\n        },\n        left: r.x, // should be r.left\n        top: r.y, // should be r.top\n        height: r.height,\n        width: r.width,\n        scale: r.scale,\n        selected: false,\n        editing: false,\n        immutable: true,\n      }\n    });\n}\n\nexport function immutableRegionsFromAnnotations(annotations, resourceTemplate, scale) {\n  return immutableRegionsFromDraftList(\n    createDraftListFromAnnotations(annotations, resourceTemplate, scale),\n  );\n}\n\nexport function editableRegionsFromDraftList(drafts,\n  currentDraftKey = null,\n  onClickRegion = () => null,\n  currentSelectorExists = true,) {\n  return Object.keys(drafts)\n    .filter(k => drafts[k] && drafts[k].selector)\n    .map(k => {\n      const r = drafts[k].selector;\n      return {\n        id: drafts[k].id,\n        onClick: () => onClickRegion(k),\n        selected: `${k}` === `${currentDraftKey}`,\n        editing: `${k}` === `${currentDraftKey}` && currentSelectorExists,\n        immutable: false,\n        ...r\n      }\n    });\n}\n\nexport function detectTypeOfAnnotation(annotation) {\n  if (annotation.body && annotation.body.type === 'SpecificResource') {\n    return 'SPECIFIC_RESOURCE';\n  }\n  if (annotation.body && annotation.body.value && typeof annotation.body.value === 'string') {\n    // @todo temporary type.\n    return 'ANNOTATION_STUDIO';\n  }\n  if (Object.prototype.toString.call(annotation.body) === '[object Array]') {\n    return 'ANNOTATION_ARRAY';\n  }\n  return 'UNKNOWN';\n}\n\nexport function getAnnotationBody(annotation) {\n  const type = detectTypeOfAnnotation(annotation);\n\n  switch (type) {\n    case 'ANNOTATION_STUDIO':\n      return JSON.parse(annotation.body.value);\n    case 'SPECIFIC_RESOURCE':\n    default:\n      return AnnotationBody.fromBody(annotation.body);\n  }\n}\n\nexport function mapTargetToSelector(target) {\n  return { ...target.target, ...target };\n}\n\nexport function createDraftFromAnnotation(resourceTemplate, annotation, scale = 1) {\n  if (!(\n      resourceTemplate &&\n      resourceTemplate.fields\n    )) {\n    return null;\n  }\n  return {\n    id: annotation.id,\n    input: mapAnnotationBody(\n      resourceTemplate.fields,\n      getAnnotationBody(annotation),\n    ),\n    selector: mapTargetToSelector(mapTarget(annotation.target, scale)),\n    isPublishing: true,\n    isPreviewing: true,\n    published: true,\n    template: resourceTemplate.id,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/annotations.js","import React from 'react';\n\nexport { default as Viewer } from './components/viewers/Viewer';\nexport { default as Selector } from './components/selectors/Selector';\nexport { default as Form } from './components/inputs/Form';\nexport { default as Canvas } from './components/composites/Canvas';\nexport { default as ConfirmationForm } from './components/composites/ConfirmationForm';\nexport { default as Router } from './components/composites/Router';\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./TextBox.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./TextBox.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./TextBox.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/inputs/TextBox.scss\n// module id = 139\n// module chunks = 0","import React, { Component } from 'react';\nimport BEM from 'digirati-bem-js';\nimport './EmbeddedResourceEditor.scss';\n\nconst style = BEM.block('embedded-resource-editor');\n\nexport default class EmbeddedResourceEditor extends Component {\n\n  state = { isLoaded: false, isLoading: false };\n\n  renderCurrentValue = (value, props, style) => {\n    const { renderResource } = this.props;\n    if (renderResource) {\n      return renderResource(value, props, style);\n    }\n    return (\n      <div>{value}</div>\n    );\n  };\n\n  componentDidMount() {\n    const { captureModel, importCaptureModel } = this.props;\n    const { isLoading, isLoaded } = this.state;\n    if (isLoading) return null;\n    if (isLoaded) return null;\n    this.setState({ isLoading: true });\n    importCaptureModel(captureModel).then(resourceTemplate => {\n      this.setState({ isLoaded: true, isLoading: false, captureModelId: resourceTemplate['@id'] });\n    });\n  }\n\n  renderResourceEditor = (captureModel, postSave, props, style) => {\n    const { renderResourceEditor } = this.props;\n    const { isLoading, isLoaded, captureModelId } = this.state;\n    if (isLoading) return 'loading...';\n    if (isLoaded) {\n      return renderResourceEditor(captureModelId, postSave, props, style);\n    }\n  };\n\n  render() {\n    const { captureModel, value, metaData, id, displayFieldSelector, postSave } = this.props;\n    return (\n      <div className={style}>\n        {metaData ? (\n          <div>\n            <label className={style.element('label')} htmlFor={id}>\n              {metaData.title} {' '}\n              {(metaData.selector && metaData.selectorValue) ?\n                (<a onClick={(e) => {\n                  e.preventDefault();\n                  displayFieldSelector(id);\n                }} href=\"#\">edit</a>)\n                : null}\n            </label>\n            <div className={style.element('description')}>\n              {metaData.description}\n            </div>\n          </div>\n        ) : null}\n        {value ? this.renderCurrentValue(value, this.props, style) : this.renderResourceEditor(captureModel, postSave, this.props, style)}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/EmbeddedResourceEditor.js","import React, { Component, PureComponent } from 'react';\nimport { connector } from 'digirati-annotation-redux';\nimport { Router } from 'digirati-annotation-components';\nimport {\n  getDraftFromCaptureModel,\n} from 'digirati-annotation-bridge';\nimport { getResourceById, isAtRoot } from 'digirati-annotation-redux/es/query/resourceQuery';\nimport {\n  convertPercentToPixel,\n  createAnnotationFromCaptureModelAndDraft,\n} from 'digirati-annotation-redux/es/lib/annotation/mapping';\nimport renderForm from './views/renderForm';\nimport { immediate } from './resourceEditor.utility';\nimport confirmationPage from './views/confirmationPage';\nimport resourceNavigation from './views/resourceNavigation';\n\nclass ResourceEditor extends PureComponent {\n\n  // This can in theory be moved to annotation-redux, once tech debt addressed.\n  createAnnotationToBeMovedToAnnotationRedux = (targetResource) => {\n    const { currentResource, asyncPublishDraft, currentDraft, createAnnotation } = this.props;\n\n    // Create our annotation.\n    const annotation = createAnnotationFromCaptureModelAndDraft(targetResource, currentResource, currentDraft);\n\n    // Make a single promise we can wait on for sending one or many annotations.\n    const promise = Array.isArray(annotation) ?\n      Promise.all(annotation.map(singleAnnotation => createAnnotation(singleAnnotation))) :\n      createAnnotation(annotation);\n\n    // Publish the draft after the annotations.\n    const result = asyncPublishDraft(currentDraft.id, promise);\n\n    return { result, annotation };\n  };\n\n  // This will replace createAnnotation\n  createAnnotationWithoutTechDebt = () => {\n    const { target, manifest, canvas, postSave } = this.props;\n    const {result, annotation} = this.createAnnotationToBeMovedToAnnotationRedux(target === 'manifest' ? manifest : canvas);\n    if (postSave) {\n      postSave(\n        result, annotation\n      );\n    }\n  };\n\n  createAnnotation = () => {\n    const { currentResource, target, manifest, canvas, asyncPublishDraft, currentDraft, createAnnotation, postSave } = this.props;\n    const targetResource = target === 'manifest' ? manifest : canvas;\n    this.resolveSelector(target, targetResource, currentDraft).then(draft => {\n      // Create our annotation.\n      const annotation = createAnnotationFromCaptureModelAndDraft(targetResource, currentResource, draft);\n\n      // Make a single promise we can wait on for sending one or many annotations.\n      const promise = Array.isArray(annotation) ?\n        Promise.all(annotation.map(singleAnnotation => createAnnotation(singleAnnotation))) :\n        createAnnotation(annotation);\n\n      // Publish the draft after the annotations.\n      const result = asyncPublishDraft(currentDraft.id, promise);\n\n      // Run our post save.\n      if (postSave) {\n        postSave(result, annotation);\n      }\n    });\n  };\n\n\n  hasMultipleSelectorsWithPercentages(currentDraft) {\n    let hasSelectors = false;\n    try {\n      hasSelectors = Object.keys(\n        currentDraft.selectors,\n      ).map(k => currentDraft.selectors[k])\n      .reduce((state, action) => !!(state || (action.type && action.unit === 'percent')), false);\n    } catch (e) {\n      return false;\n    }\n    return hasSelectors;\n  }\n\n  resolveSelector(target, targetResource, draft) {\n    const selector = draft.selector;\n\n    if (target === 'manifest' || !selector) {\n      return Promise.resolve({ ...draft, selector: targetResource });\n    }\n\n    // ########################################################################\n    //       !     Everything below this is technical debt.       !           #\n    // ########################################################################\n    // In order to remove this we need to be sure that\n    // in a draft all selectors, both on the draft and the\n    // draft fields are always pixel values, and not percentages.\n    // work has been done, but the previous code was not removed, so\n    // I've added this in to replace it, and tried to make sure that\n    // it doesn't execute if its doesn't need to. I've also added console\n    // warnings for us to check during execution.\n    // The problem with this code is the dependency on the current state of the\n    // viewer. We need to get the pixel sizes from the viewer in order to resolve\n    // percent values.\n    // For these reasons it did not make it into the annotation-redux package,\n    // and should be verified that it is not being used, and removed, including\n    // the whole resolve selector method itself.\n    // See also: createAnnotationWithoutTechDebt()\n    if (selector.unit === 'percent') {\n      console.warn('ResourceEditor', 'Percentage selectors should not reach drafts, please report.');\n      const { withViewer } = this.props;\n      return new Promise(function (resolve, err) {\n        withViewer(viewer => {\n          const { height, width } = viewer.getImageSize();\n          resolve(\n            this.resolveSelector({\n              ...draft,\n              selector: convertPercentToPixel(selector, height, width),\n            })\n          );\n        });\n      });\n    }\n\n    if (this.hasMultipleSelectorsWithPercentages(draft)) {\n      console.warn('ResourceEditor', 'Percentage selectors should not reach draft fields, please report.');\n      const { withViewer } = this.props;\n      return new Promise(function (done, err) {\n        withViewer(viewer => {\n          const { height, width } = viewer.getImageSize();\n          const draftFieldSelectors = Object.keys(draft.selectors).reduce((selectors, key) => {\n            selectors[key] = convertPercentToPixel(draft.selectors[key], height, width);\n          }, {});\n          done({ ...draft, selectors: draftFieldSelectors });\n        });\n      });\n    }\n    // ########################################################################\n    //           !          End of technical debt.           !                #\n    // ########################################################################\n\n    return Promise.resolve(draft);\n  }\n\n  render() {\n    const {\n      // Variables\n      currentResourceTemplate,\n      currentDraft,\n      resourceForm,\n      tree,\n      isConfirmingDraft,\n      isSelecting,\n      renderResourceEditor,\n      importCaptureModel,\n\n      // Actions\n      updateDraft,\n      unpreviewDraft,\n      confirmDraft,\n      previewDraft,\n      discardCurrentDraft,\n      createDraft,\n      isSelectingSecondary,\n      editCurrentDraftSelector,\n      editCurrentDraftSecondarySelector,\n      editCurrentDraftFieldSelector,\n      state,\n      currentResource,\n\n      moveForward,\n      moveBack,\n      reset,\n\n      target,\n      manifest,\n      canvas,\n\n      // UI Options\n      hideTitle = false,\n      draftDefaults = {},\n    } = this.props;\n\n    if (currentResource.choice && Object.values(currentResource.choice).length === 0) {\n      console.warn('ResourceEditor', 'This should probably never happen, please report.');\n      return <div/>; // Nothing for us to render!\n    }\n\n    // ################################################\n    //               New proposed API                 #\n    // ################################################\n    /*\n    return (\n      <Router {...props}>\n        <Branch match={(props) => (\n          currentDraft &&\n          currentDraft.template !== currentResource.id\n        )}>\n          <div>Matched this route.</div>\n        </Branch>\n      </Router>\n    )\n\n     */\n    return (\n      <div>\n        <Router routes={[\n          {\n            matches: () => (\n              currentDraft &&\n              currentDraft.template !== currentResource.id\n            ),\n            render: () => <div>Please finish the current annotation you are creating.</div>,\n          },\n          {\n            matches: () => currentResource.choice,\n            render: () => resourceNavigation({\n              showBackButton: isAtRoot(tree, state) === false,\n              resourceTemplates: currentResource.choice,\n              moveForward: (id) => moveForward(tree, id),\n              moveBack: (id) => moveBack(tree),\n              createDraft: rt => {\n                const { resources, motivation, selectors } = getDraftFromCaptureModel(\n                  getResourceById(state, rt.id),\n                );\n                createDraft(resources, rt.id, motivation || 'tagging', selectors, draftDefaults);\n              },\n            }),\n          },\n          {\n            matches: () => isConfirmingDraft,\n            render: () => confirmationPage({ onConfirm: () => reset(tree) && confirmDraft() }),\n          },\n          {\n            matches: () => currentResourceTemplate && resourceForm.fields,\n            render: () => renderForm({\n              currentResourceTemplate,\n              resourceForm,\n              currentDraft,\n              renderResourceEditor,\n              importCaptureModel,\n              previewDraft,\n              updateDraft,\n              onSave: this.createAnnotation,\n              unpreviewDraft,\n              isSelecting,\n              target,\n              manifest,\n              canvas,\n              isSelectingSecondary,\n              goBack: () => {\n                if (\n                  isSelecting || (\n                    (\n                      currentDraft &&\n                      currentDraft.selector &&\n                      currentDraft.selector.type) || ''\n                  ).toLowerCase() === 'wholecanvasselector'\n                ) {\n                  moveBack(tree) && discardCurrentDraft();\n                } else {\n                  editCurrentDraftSelector();\n                }\n              },\n              editFieldSelector: editCurrentDraftSecondarySelector,\n              currentTree: currentResource.id,\n              elementEvents: {\n                onFocus: id => editCurrentDraftFieldSelector(id, {\n                  focused: true,\n                }),\n                onBlur: id => editCurrentDraftFieldSelector(id, {\n                  focused: false,\n                }),\n              },\n              hideTitle,\n            }),\n          },\n          {\n            matches: () => currentResource,\n            render: () => {\n              const Choose = immediate('loading...', () => {\n                const { resources, motivation, selectors } = getDraftFromCaptureModel(\n                  getResourceById(state, currentResource.id),\n                );\n                createDraft(resources, currentResource.id, motivation || 'tagging', selectors, draftDefaults);\n              });\n              return <Choose/>;\n            },\n          },\n          {\n            matches: () => true,\n            render: () => (\n              <div>\n                <strong>Loading, or debugging...</strong>\n              </div>\n            ),\n          },\n        ]}/>\n      </div>\n    );\n  }\n\n}\n\nexport const ConnectedResourceEditor = connector(ResourceEditor);\n\nexport default class extends Component {\n  render() {\n    return (\n      <ConnectedResourceEditor renderResourceEditor={\n        (captureModel, postSave, ownProps) => (\n          <ConnectedResourceEditor\n            tree={captureModel}\n            postSave={postSave}\n            {...ownProps}/>\n        )\n      } {...this.props}/>\n    );\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/resourceEditor.js","export const LOGGING_LOG = 'LOGGING_LOG';\n\nexport function log(message) {\n  return { type: LOGGING_LOG, payload: { message } };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/logging.js","import AnnotationSelector from './AnnotationSelector';\nimport AnnotationBodyList from './AnnotationBodyList';\n\nexport type Motivation = {\n  id: string,\n  label: string\n}\n\nexport default class Annotation {\n\n\n  // Serialized fields\n  id: string;\n  type = 'Annotation';\n  label: string;\n  body: AnnotationBodyList;\n  target: AnnotationSelector|AnnotationSelector[];\n  motivation: Motivation;\n  generator: string;\n\n\n  constructor(\n    id: string,\n    label: string,\n    body: AnnotationBodyList,\n    target: AnnotationSelector,\n    motivation: Motivation,\n    generator: string\n  ) {\n    this['@context'] = 'http://www.w3.org/ns/anno.jsonld';\n    this.id = id;\n    this.label = label;\n    this.body = body;\n    this.target = target;\n    this.motivation = motivation;\n    this.generator = generator;\n  }\n\n  toJSON() {\n    return {\n      ...this,\n      id: this.id === null ? undefined : this.id,\n      generator: this.generator === null ? undefined : this.generator,\n    }\n  }\n\n  static fromJsonLD(jsonLd) {\n    return new Annotation(\n      jsonLd.id,\n      jsonLd.label,\n      AnnotationBodyList.fromJsonLD(jsonLd.body),\n      AnnotationSelector.fromJsonLD(jsonLd.target),\n      jsonLd.motivation,\n    );\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/annotation/Annotation.js","export default class AnnotationSelector {\n\n  static DIRECTION_LTR = 'ltr';\n  static DIRECTION_RTL = 'rtl';\n  static DIRECTION_AUTO = 'auto';\n  static W3C_SELECTOR = /[#&\\?]xywh\\=(pixel\\:|percent\\:)?(\\d+),(\\d+),(\\d+),(\\d+)/;\n\n  static fromJsonLD(jsonLd) {\n    return AnnotationSelector.parse(jsonLd);\n  }\n\n  static fromArray(multipleSelectors) {\n    return multipleSelectors.map(\n      annotation => AnnotationSelector.parse(annotation),\n    );\n  }\n\n  constructor(id, scale, format, language, processingLanguage, textDirection, selector) {\n    if (\n      textDirection && (\n        textDirection !== AnnotationSelector.DIRECTION_AUTO &&\n        textDirection !== AnnotationSelector.DIRECTION_LTR &&\n        textDirection !== AnnotationSelector.DIRECTION_RTL\n      )\n    ) {\n      throw new Error('textDirection must be ONE of [ltr, rtl, auto]');\n    }\n\n    this.id = id;\n    this.source = (id || '').split('#')[0];\n    this.format = format;\n    this.language = language;\n    this.processingLanguage = processingLanguage;\n    this.textDirection = textDirection;\n    this.selector = AnnotationSelector.parseTarget(id, scale, selector);\n  }\n\n  static fromTarget(target, selector) {\n    const annotationSelector = new AnnotationSelector();\n    annotationSelector.source = target;\n    annotationSelector.selector = selector;\n    return annotationSelector;\n  }\n\n  static parse(text, scale = 1) {\n    if (!text) {\n      return null;\n    }\n\n    // https://www.w3.org/TR/annotation-model/#bodies-and-targets\n    if (text.id) {\n      return new AnnotationSelector(\n        text.id,\n        scale,\n        text.format,\n        text.language,\n        text.processingLanguage,\n        text.textDirection,\n      )\n    }\n\n    // https://www.w3.org/TR/annotation-model/#selectors\n    if (text.source) {\n      return new AnnotationSelector(\n        text.source,\n        scale,\n        text.format,\n        text.language,\n        text.processingLanguage,\n        text.textDirection,\n        text.selector,\n      );\n    }\n\n    // @todo check for is text or is object and construct accordingly.\n    return new AnnotationSelector(text, scale);\n  }\n\n  static parseTarget(source, scale = 1, selector = null) {\n    let toParse = source;\n    if (selector && selector.type === 'FragmentSelector') {\n      toParse = `${source}#${selector.value}`;\n    }\n\n    const match = AnnotationSelector.W3C_SELECTOR.exec(toParse);\n    if (match) {\n      const [_, __, x, y, width, height] = match.map(v => parseInt(v, 10) * scale);\n      return {\n        unit: (match[1] === 'percent:' ? 'percent' : 'pixel'),\n        scale,\n        expanded: true,\n        x,\n        y,\n        width,\n        height,\n        toString() {\n          return source.split('#')[0];\n        }\n      };\n    }\n    return source;\n  }\n\n  toJSON() {\n    if (\n      !this.selector ||\n      this.selector.x === null || isNaN(Math.floor(this.selector.x)) ||\n      this.selector.y === null || isNaN(Math.floor(this.selector.y))\n    ) {\n      return this.source;\n    }\n\n    if (\n      this.selector.width === null || isNaN(this.selector.width) ||\n      this.selector.height === null || isNaN(this.selector.height)\n    ) {\n      return `${this.source}#xywh=${Math.floor(this.selector.x)},${Math.floor(this.selector.y)},0,0`;\n    }\n\n    return `${this.source}#xywh=${Math.floor(this.selector.x)},${Math.floor(this.selector.y)},${Math.floor(this.selector.width)},${Math.floor(this.selector.height)}`;\n  }\n\n  toString() {\n    return this.id;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/annotation/AnnotationSelector.js","import AnnotationBody from './AnnotationBody';\n\nexport default class AnnotationBodyList {\n\n  constructor(list: Array<AnnotationBody>) {\n    if (list instanceof AnnotationBody) {\n      this.list = [list];\n    } else {\n      this.list = list || [];\n    }\n  }\n\n  getOfType = (type): AnnotationBody => {\n    return (this.list.find(function (item) {\n      return item.type.indexOf(type) !== -1;\n    }).value || null);\n  };\n\n  // Computed fields.\n  get TextualBody(): AnnotationBody {\n    return this.getOfType('TextualBody');\n  }\n\n  get Image(): AnnotationBody {\n    return this.getOfType('Image');\n  }\n\n  get Video(): AnnotationBody {\n    return this.getOfType('Video');\n  }\n\n  get Sound(): AnnotationBody {\n    return this.getOfType('Sound');\n  }\n\n  get Text(): AnnotationBody {\n    return this.getOfType('Text');\n  }\n\n  get SpecificResource(): AnnotationBody {\n    return this.getOfType('SpecificResource');\n  }\n\n  get Dataset(): AnnotationBody {\n    return JSON.parse(this.getOfType('Dataset'));\n  }\n\n  toJSON() {\n    if (this.list.length === 1) {\n      return this.list[0].toJSON();\n    }\n    return this.list.map(j => j.toJSON());\n  }\n\n  static fromJsonLD(body) {\n    if (\n      Object.prototype.toString.call(body) === '[object Object]' && body.value\n    ) {\n      return new AnnotationBodyList([\n        AnnotationBody.fromJsonLD(body)\n      ]);\n    }\n\n    if (Object.prototype.toString.call(body) !== '[object Array]') {\n      return null;\n    }\n\n    return new AnnotationBodyList(body.map(anno => AnnotationBody.fromJsonLD(anno)));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/annotation/AnnotationBodyList.js","/**\n * This is a port of: https://github.com/digirati-co-uk/omeka-elucidate-module/blob/master/src/Domain/AnnotationBody.php\n */\n\nexport type BodyType = 'Dataset' | 'Image' | 'Video' | 'Sound' | 'Text' | 'SpecificResource';\nexport type TextDirections = 'ltr' | 'rtl' | 'auto';\n\nexport default class AnnotationBody {\n\n  id: string;\n  format: string; // @todo add enum\n  language: string;\n  processingLanguage: string;\n  textDirection: ?TextDirections;\n  type: Array<BodyType>;\n\n  constructor(\n    id,\n    value,\n    format,\n    type,\n    purpose,\n    source,\n    language,\n    processingLanguage,\n    textDirection,\n  ) {\n    this.id = id;\n    this.value = value;\n    this.type = Array.isArray(type) ? type : [type];\n    this.purpose = purpose;\n    this.format = format;\n    this.source = source;\n    this.language = language;\n    this.processingLanguage = processingLanguage;\n    this.textDirection = textDirection;\n  }\n\n  static fromJsonLD(jsonLd) {\n    return AnnotationBody.fromBody(jsonLd);\n  }\n\n  toJSON() {\n    return {\n      ...this,\n      id: this.id === null ? undefined : this.id,\n      value: this.value === null ? undefined : this.value,\n      purpose: this.purpose === null ? undefined : this.purpose,\n      type: this.type.length === 1 ? this.type[0] : this.type,\n    };\n  }\n\n  static fromBody(body) {\n    if (!body) {\n      return new AnnotationBody();\n    }\n    return new AnnotationBody(\n      body.id,\n      body.value,\n      body.format,\n      body.type,\n      body.purpose,\n      body.source,\n      body.language,\n      body.processingLanguage,\n      body.textDirection,\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/annotation/AnnotationBody.js","export const HELP_INFO_ADD = 'INFO_ADD';\nexport const HELP_INFO_REMOVE = 'INFO_REMOVE';\nexport const HELP_CONTEXT_ADD = 'HELP_CONTEXT_ADD';\nexport const HELP_CONTEXT_REMOVE = 'HELP_CONTEXT_REMOVE';\n\nexport function addInfo(key, content, type = 'info') {\n  return { type: HELP_INFO_ADD, payload: { key, content, type } };\n}\n\nexport function removeInfo(key, type = 'info') {\n  return { type: HELP_INFO_REMOVE, payload: { key, type } };\n}\n\nexport function setContext(content) {\n  return { type: HELP_CONTEXT_ADD, payload: { content } };\n}\n\nexport function removeContext() {\n  return { type: HELP_CONTEXT_REMOVE }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/help.js","import React, {PureComponent} from 'react';\nimport {Provider} from 'react-redux';\nimport Core from './core';\n\nclass CoreProvider extends PureComponent {\n\n  render() {\n    const {store, ...props} = this.props;\n    return (\n      <Provider store={store}>\n        <Core {...props}/>\n      </Provider>\n    );\n  }\n}\n\nexport default CoreProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-core/src/core.provider.js","import React, { PureComponent } from 'react';\nimport { connector } from 'digirati-annotation-redux';\nimport { getAllAnnotationsFromCollection } from 'digirati-annotation-redux/es/lib/elucidate/index';\nimport { asyncForEach } from './core.utils';\nimport 'whatwg-fetch';\n\nclass Core extends PureComponent {\n\n  componentDidMount() {\n    const {\n      setServer,\n      canvas: canvasId,\n      manifest,\n      createCollection,\n      addElucidateAnnotation,\n      setResource,\n      elucidateServer,\n      addManifest,\n      selectManifest,\n      selectCanvas,\n    } = this.props;\n\n    const subject = canvasId ? canvasId : manifest;\n\n    if (!elucidateServer) {\n      return;\n    }\n    if (canvasId) {\n      fetch(manifest)\n        .then(response => response.json())\n        .then(response => addManifest(manifest, response))\n        .then(response => selectManifest(manifest))\n        .then(response => canvasId ? selectCanvas(canvasId) : null);\n    }\n    // Set the server.\n    setServer(elucidateServer, subject);\n    // Set the resource.\n    if (subject) {\n      setResource(subject);\n    }\n\n    // Set collection.\n    createCollection(subject, subject)\n      .then(c => getAllAnnotationsFromCollection(c))\n      .then(iterable =>\n        asyncForEach(iterable, i =>\n          addElucidateAnnotation(i)\n        ),\n      );\n  }\n\n  render() {\n    return (\n      <div style={{ display: 'none'}}>\n        Annotation studio is running on this page.\n        <pre>\n            { /*JSON.stringify(this.props.state, null, 2)*/ }\n        </pre>\n      </div>\n    );\n  }\n}\n\nexport default connector(Core);\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-core/src/core.js","import React, {PureComponent} from 'react';\nimport {Provider} from 'react-redux';\nimport Viewer from './viewer';\n\nclass ViewerProvider extends PureComponent {\n\n  render() {\n    const {store, ...props} = this.props;\n    return (\n      <Provider store={ store }>\n        <Viewer { ...props } />\n      </Provider>\n    );\n  }\n}\n\nexport default ViewerProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-viewer/src/viewer.provider.js","import React, {PureComponent} from 'react';\nimport 'core-js/modules/es6.object.keys';\nimport {immutableRegionsFromAnnotations} from 'digirati-annotation-bridge/es/annotations';\nimport {richAnnotationList} from 'digirati-annotation-redux/es/query/elucidateQuery';\nimport {currentCanvas} from 'digirati-annotation-redux/es/query/manifestQuery';\nimport {resourceTemplateList} from 'digirati-annotation-redux/es/query/resourceQuery';\nimport {Canvas} from 'digirati-annotation-components';\nimport {connector} from 'digirati-annotation-redux';\nimport {selectorCompat} from 'digirati-annotation-redux/es/utility';\nimport Measure from 'react-measure';\nimport {withState} from 'recompose';\n\nclass Viewer extends PureComponent {\n\n  setViewer(viewer) {\n    if (this.viewer) {\n      return;\n    }\n    this.viewer = viewer;\n    this.props.setViewer(viewer);\n  }\n\n  render() {\n    const MAX_HEIGHT = window.innerHeight - 250;\n\n    const {\n      image,\n      selectedViewer,\n      updateDimensions,\n      editableRegions,\n      dimensions,\n      state,\n      toggleable,\n      drafts,\n      currentDraftSelectors,\n      updateSelector,\n      editCurrentDraftSecondarySelector,\n      commitToCurrentDraft,\n      editCurrentDraftSelector,\n      currentSelector,\n    } = this.props;\n    const VIEWER_WIDTH = dimensions.width;\n\n    const regions = [\n      ...editableRegions,\n      ...immutableRegionsFromAnnotations(\n        richAnnotationList(state),\n        resourceTemplateList(state),\n      ),\n      ...currentDraftSelectors,\n    ].map(region => selectorCompat(region));\n\n    // @todo move to selector\n    const selectedCanvas = currentCanvas(state);\n    return (\n      <Measure\n        onMeasure={(dimensions) => updateDimensions(dimensions)}\n      >\n        <div>\n          { selectedCanvas ? (\n            <Canvas ref={ref => this.setViewer(ref)}\n                    showAnnotationToggle={toggleable === \"true\"}\n                    onUpdateSelector={updateSelector}\n                    onSaveSelector={commitToCurrentDraft}\n                    selector={currentSelector && currentSelector.type ? currentSelector : null}\n                    selectedViewer={selectedViewer}\n                    image={image}\n                    canvas={selectedCanvas}\n                    regions={regions}\n                    displayWidth={VIEWER_WIDTH}\n                    onEditRegion={(e) => {\n                      if (e.isSecondary) {\n                        if (!e.id) {\n                          return;\n                        }\n                        editCurrentDraftSecondarySelector(e.id)\n                      }\n                      editCurrentDraftSelector();\n                    }}\n                    maxHeight={MAX_HEIGHT}/>\n          ) : (\n            <div>\n              <img src={image.src}/>\n            </div>\n          ) }\n        </div>\n      </Measure>\n    );\n  }\n}\n\nexport default connector(\n  withState('dimensions', 'updateDimensions', {width: -1, height: -1})(\n    /*onlyUpdateForKeys([\n     'image',\n     'selectedViewer',\n     'drafts',\n     'currentDraft',\n     'updateSelector',\n     'commitToCurrentDraft',\n     'currentSelector',\n     ])(*/Viewer/*)*/,\n  ),\n);\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-viewer/src/viewer.js","export function currentManifest(state) {\n  return manifestById(state, state.manifest.current);\n}\n\nexport function getImageServiceFromCanvas(canvas) {\n  if (\n    canvas.images &&\n    canvas.images[0] &&\n    canvas.images[0].resource &&\n    canvas.images[0].resource.service &&\n    canvas.images[0].resource.service['@id']\n  ) {\n    return `${canvas.images[0].resource.service['@id']}/info.json`;\n  }\n\n  if (\n    canvas.thumbnail &&\n    canvas.thumbnail.service &&\n    canvas.thumbnail.service['@id']\n  ) {\n    return `${canvas.thumbnail.service['@id']}/info.json`;\n  }\n  if (\n    canvas.thumbnail &&\n    canvas.thumbnail['@id']\n  ) {\n    return canvas.thumbnail['@id'];\n  }\n\n  return null;\n}\n\nexport function currentImageService(state) {\n  const canvas = currentCanvas(state);\n  if (!canvas) {\n    return null;\n  }\n\n  return getImageServiceFromCanvas(canvas);\n}\n\nexport function currentCanvas(state) {\n  const manifest = currentManifest(state);\n  const canvasId = state.manifest.currentCanvas;\n  if (!(\n      manifest &&\n      canvasId &&\n      manifest.sequences &&\n      manifest.sequences[0] &&\n      manifest.sequences[0].canvases\n    )) {\n    return null;\n  }\n  const canvases = manifest.sequences[0].canvases;\n  for (let canvas of canvases) {\n    if (canvas['@id'] === canvasId) {\n      return canvas;\n    }\n  }\n}\n\nexport function manifestById(state, id) {\n  if (!id) {\n    return null;\n  }\n  if (!state.manifest.list[id]) {\n    return null;\n  }\n  return state.manifest.list[id];\n}\n\nexport function allManifests(state) {\n  const manifestKeys = Object.keys(state.manifest.list);\n  if (!manifestKeys || !manifestKeys.length) {\n    return [];\n  }\n  return manifestKeys.map(key => state.manifest.list[key]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/query/manifestQuery.js","import React from 'react';\nimport {branch, compose, renderComponent, renderNothing} from 'recompose';\nimport {withManifest} from './openseadragon/utility';\nimport OSDViewer from './openseadragon/viewer';\nimport withCanvas from './openseadragon/withCanvas';\nimport ScaledImageViewer from './ScaledImageViewer';\nimport StaticImageViewer from './StaticImageViewer';\n\n\nexport default compose(\n  // @todo optimise this!\n  // shouldUpdate(\n  //   (props, nextProps) => (\n  //     true ||\n  //     props.type !== nextProps.type ||\n  //     props.regions !== nextProps.regions ||\n  //     props.tileSource !== nextProps.tileSource ||\n  //     props.scale !== nextProps.scale\n  //   ),\n  // ),\n  // Branches are conditional render. First parameter is a bool\n  // the second argument is the truth-y and the third is the false-y\n  branch(\n    props => props.type === 'ScaledImageViewer',\n    // Needs withStaticCanvas for interoperability\n    // Needs to accept children that get drawn on.\n    renderComponent(ScaledImageViewer),\n    // I've nested the false-y to add another condition.\n    branch(\n      props => props.type === 'OpenSeadragonViewer',\n      renderComponent(\n          withManifest(\n            withCanvas(OSDViewer)\n          ),\n      ),\n      // Fallback.\n      renderComponent(StaticImageViewer),\n    ),\n  ),\n  // pure,\n)(renderNothing());\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/Viewer.js","import React, { Component } from 'react';\nimport StaticImageViewer from './StaticImageViewer';\n\nclass ScaledImageViewer extends Component {\n\n  // static propTypes = {\n  //     ...viewerPropTypes,\n  //     scale: PropTypes.number.isRequired\n  // };\n\n  getSelectedRegion() {\n    const { regions, scale } = this.props;\n    const r = regions.filter(region => region.selected).pop();\n    if (!r) return null;\n    return {\n      height: r.height / scale,\n      width: r.width / scale,\n      top: r.top / scale,\n      left: r.left / scale,\n    };\n  }\n\n  createRelativePoint(x, y) {\n    const { scale } = this.props;\n    return {\n      x: x / scale, y: y / scale\n    };\n  }\n\n  createViewportPoint(x, y) {\n    const { scale } = this.props;\n    return {\n      x: x * scale, y: y * scale\n    };\n  }\n\n  getImageSize() {\n    return {\n      height: this.props.height,\n      width: this.props.width,\n    }\n  }\n\n  getRef() {\n    const {getRef} = this.props;\n    if (getRef) {\n      getRef(this);\n    }\n  }\n\n  getRegions() {\n    const { regions, scale } = this.props;\n    return regions.map(r => ({\n      height: r.height / scale,\n      width: r.width / scale,\n      top: r.top / scale,\n      left: r.left / scale,\n    }))\n  }\n\n  render() {\n    const { height, width, top, left, scale, ...props } = this.props;\n    return (\n      <StaticImageViewer\n        height={height * scale}\n        width={width * scale}\n        top={top * scale}\n        left={left * scale}\n        modifiers={{ scaled: true }}\n        {...props}\n      />\n    );\n  }\n}\n\nexport default ScaledImageViewer;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/ScaledImageViewer.js","import BEM from 'digirati-bem-js';\nimport React, {PureComponent} from 'react';\nimport './StaticImageView.scss';\n\nconst style = BEM.block('static-image-viewer');\n\nclass StaticImageViewer extends PureComponent {\n\n  // propTypes = {\n  //   ...viewerPropTypes,\n  //   modifiers: PropTypes.object\n  // };\n\n  getSelectedRegion() {\n    const {regions} = this.props;\n    const r = regions.filter(region => region.selected).pop();\n    if (!r) return null;\n    return {\n      type: r.type,\n      height: r.height,\n      width: r.width,\n      top: r.top,\n      left: r.left,\n    };\n  }\n\n  getImageSize() {\n    return {\n      height: this.props.height,\n      width: this.props.width,\n    }\n  }\n\n  createRelativePoint(x, y) {\n    return {x, y};\n  }\n\n  createViewportPoint(x, y) {\n    return {x, y};\n  }\n\n  getRef() {\n    const {getRef} = this.props;\n    if (getRef) {\n      getRef(this);\n    }\n  }\n\n  resolveRegion(r) {\n    if (r.unit === 'percent') {\n      return this.resolveRegion({\n        unit: 'pixel',\n        type: r.type,\n        left: r.left * this.props.width,\n        top: r.top * this.props.height,\n        width: r.width * this.props.width,\n        height: r.height * this.props.height,\n      });\n    }\n\n    return {\n      type: r.type,\n      height: r.height,\n      width: r.width,\n      top: r.top,\n      left: r.left,\n    };\n  }\n\n  getRegions() {\n    return this.props.regions.map(r => this.resolveRegion(r));\n  }\n\n  render() {\n    const {resource, regions, height, width, modifiers} = this.props;\n    return (\n      <div className={style.modifiers(modifiers)} style={{height, width}}>\n        <div className={style.element('regions')}>\n          { regions && regions.map((region, key) => (\n            <div\n              key={key}\n              className={style.element('region-item').modifiers({\n                'selected': region.selected,\n                'editing': region.editing,\n              })}\n              style={{\n                height: region.height,\n                width: region.width,\n                top: region.top,\n                left: region.left,\n              }}\n              onClick={ region.onClick ? () => region.onClick(region) : null }>\n            </div>\n          )) }\n        </div>\n        <img className={style.element('image')} src={resource} height={height} width={width}/>\n      </div>\n    );\n  }\n\n}\n\nexport default StaticImageViewer;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/StaticImageViewer.js","import React, { PropTypes } from 'react';\nimport selectorPropTypes from './_selectorPropTypes';\nimport BoxSelector from './BoxSelector';\nimport PinSelector from './PinSelector';\nimport WholeCanvasSelector from './WholeCanvasSelector';\n\nfunction Selector({ type, ...props }) {\n\n  switch (type) {\n    case 'WholeCanvasSelector':\n    case 'wholecanvasselector':\n      return <WholeCanvasSelector {...props}/>;\n    case 'madoc:pin':\n      return <PinSelector {...props}/>;\n    case 'BoxSelector':\n    case 'madoc:boxdraw':\n    default:\n      return <BoxSelector {...props}/>;\n  }\n}\n\nSelector.PropTypes = {\n  type: PropTypes.string.isRequired,\n  ...selectorPropTypes\n};\n\nexport default Selector;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/selectors/Selector.js","import { PropTypes } from \"react\";\n\nexport default {\n  onSave: PropTypes.func.isRequired,\n  onCancel: PropTypes.func,\n  initialPosition: PropTypes.shape({\n    left: PropTypes.number,\n    top: PropTypes.number,\n    height: PropTypes.number,\n    width: PropTypes.number,\n  }),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/selectors/_selectorPropTypes.js","import BEM from 'digirati-bem-js';\nimport React, { PureComponent } from 'react';\nimport './Form.scss';\nimport FormGroup from './FormGroup';\n\nconst style = BEM.block('input-form');\n\nclass Form extends PureComponent {\n\n  renderGroups(draft, props, { render, groups }) {\n    const groupKeys = [FormGroup.DEFAULT_GROUP, ...Object.keys(groups)];\n    return groupKeys.map(key =>\n      render[key].length !== 0 ? (\n        <FormGroup\n          key={key}\n          groupKey={key}\n          style={style}\n          draft={draft}\n          fields={render[key]}\n          group={groups[key]} {...props}/>\n      ) : null,\n    );\n  }\n\n  render() {\n    const { fields, draft, ...props } = this.props;\n\n    return (\n      <div>\n        {this.renderGroups(\n          draft,\n          props,\n          fields.reduce(\n            ({ render, groups }, field) => {\n              if (!field.omekaMetaData.group.id) {\n                render[FormGroup.DEFAULT_GROUP].push(field);\n                return { render, groups };\n              }\n              if (!groups[field.omekaMetaData.group.id]) {\n                groups[field.omekaMetaData.group.id] = field.omekaMetaData.group;\n                render[field.omekaMetaData.group.id] = [];\n              }\n              render[field.omekaMetaData.group.id].push(field);\n              return { render, groups };\n            }\n            , { render: { defaultGroup: [] }, groups: {} }),\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Form;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/Form.js","import * as actions from './actions';\nimport * as query from './query';\nimport reducers from './reducers';\nimport connector from './connector';\nimport createStore from './createStore';\n\nexport {\n  actions, query, reducers, createStore, connector,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/index.js","import { getCurrentDraft } from './draftQuery';\n\nexport function getResourceById(state, id) {\n  return state.resource.list[id];\n}\n\nexport function applyDefaultsToDraft(state, template, input, draftDefaults) {\n  const form = getForm(getResourceById(state, template));\n  if (!form || !form.fields) {\n    return input;\n  }\n\n  const fields = Object.values(form.fields).reduce((s, f) => (s[f.id] = f ) && s, {});\n  const draftDefaultKeys = Object.keys(draftDefaults);\n  const filledInputs = Object.keys(input).reduce((input, url) => {\n    if (\n      fields &&\n      fields[url] &&\n      fields[url].metaData &&\n      fields[url].metaData.conformsTo &&\n      fields[url].metaData.conformsTo.label &&\n      draftDefaultKeys.indexOf(fields[url].metaData.conformsTo.label) !== -1\n    ) {\n      input[url] = draftDefaults[fields[url].metaData.conformsTo.label];\n    }\n    return input;\n  }, input);\n\n  return {...input, ...filledInputs};\n}\n\nexport function getCurrentResource(tree, state) {\n  if (!(\n      state &&\n      state.resource &&\n      state.resource.currentPaths\n    )) {\n    return null;\n  }\n\n  const value = state.resource.currentPaths[tree];\n\n  if (!value) {\n    return getResourceById(state, tree);\n  }\n\n  if (value && value.length === 0) {\n    return state.resource.trees[tree];\n  }\n\n  const node = value.reduce((curState, path) => curState.choice[path], state.resource.trees[tree]);\n\n  if (!node) {\n    console.error('Invalid path', value, state.resource.trees[tree]);\n    return null;\n  }\n\n  // @todo add isReference field to pick up.\n  if (node.type === 'captureModel') {\n    return state.resource.list[node.id];\n  }\n\n  return node;\n}\n\nexport function isAtRoot(tree, state) {\n  if (!(\n      state &&\n      state.resource &&\n      state.resource.currentPaths &&\n      state.resource.currentPaths[tree]\n    )) {\n    return true; // default to true to hide UI.\n  }\n\n  return (state.resource.currentPaths[tree].length === 0);\n}\n\nexport function hasLandedOnForm(tree, state) {\n  const currentItem = getCurrentResource(state, tree);\n  if (!currentItem) {\n    return false;\n  }\n  return currentItem.type === 'captureModel';\n}\n\nexport function getCurrentResourceTemplate(state, scope) {\n  const currentDraft = getCurrentDraft(state, scope);\n  return (currentDraft && currentDraft.template) ? state.resource.list[currentDraft.template] : null;\n}\n\nexport function getForm(resourceTemplate) {\n  if (!resourceTemplate) {\n    return null;\n  }\n  const { id, fields, ...meta } = resourceTemplate;\n  return {\n    id,\n    fields,\n    meta: { ...meta, ...meta.metaData },\n  }\n}\n\nexport function resourceTemplateList(state) {\n  const list = state.resource.list;\n  const keys = Object.keys(list);\n  if (!keys[0]) {\n    return [];\n  }\n  return list[keys[0]];\n}\n\nexport function getCurrentPath(obj, state) {\n  return state.resource.currentPath.reduce((o, i) => o[i], obj);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/query/resourceQuery.js","import plugin from './resourceEditor.plugin';\nimport provider from './resourceEditor.provider';\nimport Component from './resourceEditor';\n\nexport {\n  Component,\n  provider,\n  plugin,\n};\n\nexport default plugin;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/index.js","import React, {PureComponent} from 'react';\nimport {Provider} from 'react-redux';\nimport ResourceEditor from './resourceEditor';\n\nclass ResourceEditorProvider extends PureComponent {\n\n  render() {\n    const {store, ...props} = this.props;\n    return (\n      <Provider store={store}>\n        <ResourceEditor {...props} />\n      </Provider>\n    );\n  }\n}\n\nexport default ResourceEditorProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/resourceEditor.provider.js","import React, {PureComponent} from 'react';\nimport {Provider} from 'react-redux';\nimport Transcriber from './transcriber';\n\nclass TranscriberProvider extends PureComponent {\n\n  render() {\n    const {store, ...props} = this.props;\n    return (\n      <Provider store={store}>\n        <Transcriber {...props} />\n      </Provider>\n    );\n  }\n}\n\nexport default TranscriberProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-transcriber/src/transcriber.provider.js","import React, {PureComponent} from 'react';\nimport ResourceEditor from 'digirati-annotation-plugin-resource-editor/es/resourceEditor';\nimport {connector} from 'digirati-annotation-redux';\nimport {createDraftFromCaptureModel} from 'digirati-annotation-bridge';\nimport BEM from 'digirati-bem-js';\n\nconst $style = BEM.block('transcriber');\n\nclass Transcriber extends PureComponent {\n\n  createDraft = (draftDefaults) => () => {\n    const {createDraftFromCaptureModel, tree} = this.props;\n    createDraftFromCaptureModel(tree, tree, draftDefaults);\n  };\n\n  render() {\n    const { transcriptionVocab = 'dcterms:description', currentDraft, transcription, ...props } = this.props;\n    if (!currentDraft) {\n      return (\n        <div className={$style}>\n          <button className={$style.element('edit')} onClick={this.createDraft({ [transcriptionVocab]: transcription })}>edit</button>\n          <div className={$style.element('transcription')}>\n            { transcription }\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={$style.modifier('editing')}>\n        <ResourceEditor draftDefaults={{ [transcriptionVocab]: transcription }} hideTitle={true} {...props}/>\n      </div>\n    );\n  }\n}\n\nexport default connector(Transcriber, {createDraftFromCaptureModel});\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-transcriber/src/transcriber.js","import React, {Component} from 'react';\nimport {connector} from 'digirati-annotation-redux';\nimport {isTaggedAs, annotationToTag, tagDetails} from './tagging.utils';\n\nexport class TaggingAnnotations extends Component {\n\n    render() {\n        const {entityTypes, ...props} = this.props;\n\n        let annotations = props.regionAnnotations.concat(props.wholeCanvasAnnotations)\n            .filter(isTaggedAs(entityTypes))\n            .sort((a, b) => {\n                let source = tagDetails(a).uri;\n                let target = tagDetails(b).uri;\n\n                return source.localeCompare(target);\n            })\n            .reduce((output, next) => {\n                let slice = output.slice(-1);\n                let prev = slice[0];\n\n                if (prev) {\n                    let prevUri = tagDetails(prev).uri;\n                    let nextUri = tagDetails(next).uri;\n\n                    if (prevUri !== nextUri) {\n                        output.push(next);\n                    }\n                } else {\n                    output.push(next);\n                }\n\n                return output;\n            }, []);\n\n        return ((\n            <div>\n                {annotations.map(annotationToTag)}\n            </div>\n        ))\n    }\n}\n\nexport default connector(TaggingAnnotations);\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging-annotations.component.js","import React, {PureComponent} from 'react';\nimport {Provider} from 'react-redux';\nimport TaggingAnnotations from './tagging-annotations.component';\n\nclass TaggingAnnotationsProvider extends PureComponent {\n\n    render() {\n        const {store, ...props} = this.props;\n        return (\n            <Provider store={store}>\n                <TaggingAnnotations {...props} />\n            </Provider>\n        );\n    }\n}\n\nexport default TaggingAnnotationsProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging-annotations.provider.js","import React, { Component } from 'react';\nimport { connector } from 'digirati-annotation-redux';\nimport { Component as ResourceEditor } from 'digirati-annotation-plugin-resource-editor';\nimport { createDraftFromCaptureModel } from 'digirati-annotation-bridge';\n\nclass Tagging extends Component {\n\n  state = {\n    isAdding: false,\n  };\n\n  handleAdd = () => {\n    const { createDraftFromCaptureModel, tree } = this.props;\n    createDraftFromCaptureModel(tree, tree, {});\n\n    this.setState({\n      isAdding: true,\n    });\n  };\n\n  render() {\n    const { currentDraft, content, ...props } = this.props;\n    const hasDraft = !!currentDraft;\n\n    if (!currentDraft) {\n      return ((\n        <div>\n          <button className=\"c-tag\" disabled={hasDraft}\n                  type=\"submit\" onClick={this.handleAdd}>{content}\n          </button>\n        </div>\n      ));\n    }\n\n    return ((\n      <div>\n        <ResourceEditor {...props} hideTitle={true} />\n\n      </div>\n    ));\n  }\n}\nexport default connector(Tagging, { createDraftFromCaptureModel });\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging.js","import React, { PureComponent } from 'react';\nimport { Provider } from 'react-redux';\nimport Tagging from './tagging';\n\nclass TaggingProvider extends PureComponent {\n\n  render() {\n    const { store, ...props } = this.props;\n    return (\n      <Provider store={store}>\n        <Tagging {...props} />\n      </Provider>\n    );\n  }\n}\n\nexport default TaggingProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging.provider.js","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport './css/style.scss';\nimport './css/base.scss';\nimport './css/grid.scss';\nimport './css/image-grid.scss';\nimport './css/collection-list.scss';\nimport './css/collection-item.scss';\nimport './css/topic-list.scss';\nimport './css/prev-next.scss';\nimport './css/pagination.scss';\n\nimport CorePlugin, {utils} from 'digirati-annotation-plugin-core';\nimport ViewerPlugin from 'digirati-annotation-plugin-viewer';\nimport ResourceEditorPlugin from 'digirati-annotation-plugin-resource-editor';\nimport TranscriberPlugin from 'digirati-annotation-plugin-transcriber';\nimport {TaggingAnnotationsPlugin, TaggingPlugin} from 'digirati-annotation-plugin-tagging';\nimport RegionAnnotation from './js/region-annotations';\n\nif (process.env.NODE_ENV !== 'production') {\n  const {whyDidYouUpdate} = require('why-did-you-update');\n  let createClass = React.createClass;\n  Object.defineProperty(React, 'createClass', {\n    set: (nextCreateClass) => {\n      createClass = nextCreateClass;\n    }\n  });\n  // whyDidYouUpdate(React, { exclude: /^Core|Measure/ })\n}\n\nconst behaviours = resolveSharedStore => ({\n  'annotation-studio-core': (image, attributes) => CorePlugin(image, attributes).then(store => resolveSharedStore(store)),\n  'annotation-studio-viewer': ViewerPlugin,\n  'annotation-studio-resource-editor': ResourceEditorPlugin,\n  'annotation-studio-transcriber': TranscriberPlugin,\n  'annotation-studio-region-annotations': ($el, attributes, store) => {\n    return render((\n      <Provider store={store}>\n        <RegionAnnotation />\n      </Provider>\n    ), $el);\n  },\n  'annotation-studio-tagging-annotations': TaggingAnnotationsPlugin,\n  'annotation-studio-tagging': TaggingPlugin\n});\n\nconst { resolve, promise: whenToRender } = utils.deferred();\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  // Small error-prone example of data behaviour factory.\n  for (const $el of document.querySelectorAll('[data-behaviour]')) {\n    const register = behaviours(resolve);\n    try {\n      const attribute = $el.getAttribute('data-behaviour');\n      const behaviour = register[attribute];\n      if (behaviour.length === 3) {\n        whenToRender.then(store => behaviour($el, utils.getAttributes($el), store));\n      } else {\n        register[$el.getAttribute('data-behaviour')]($el, utils.getAttributes($el));\n      }\n    } catch (e) {\n      console.error('Behaviour does not exist: ' + $el.getAttribute('data-behaviour'), e);\n    }\n  }\n});\n\nexport default {};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-application/src/index.js","import { getCurrentResourceTemplate, getForm, getResourceById } from 'digirati-annotation-redux/es/query/resourceQuery';\nimport { getCurrentDraft } from 'digirati-annotation-redux/es/query/draftQuery';\nimport { importResource, importResourceTree } from 'digirati-annotation-redux/es/actions/resources';\n\nimport {\n  createDraftFromAnnotation,\n  mapAnnotationBody,\n  mapTarget,\n  parseTarget,\n  resourceTemplateReverseTypeLookup\n} from './annotations';\n\nimport { motivationFromForm } from './helpers';\nimport Choice from './model/Choice';\nimport CaptureModel from './model/CaptureModel';\nimport { createDraft } from 'digirati-annotation-redux/es/actions/drafts';\n\n/**\n * @deprecated\n */\nexport function mapDraftToDataSet(fields, values) {\n  const contexts = {};\n  const body = {};\n\n  fields.forEach(model => {\n    if (model.metaData.conformsTo && values[model.id]) {\n      contexts[model.metaData.conformsTo.label] = model.metaData.conformsTo.id;\n      body[model.metaData.conformsTo.label] = values[model.id];\n    }\n  });\n\n  return {\n    '@context': contexts,\n    ...body\n  };\n}\n\n/**\n * @deprecated\n */\nfunction getLabelFromResourceTemplate(template, data) {\n  if (!(\n      template.metaData.labelParts &&\n      template.metaData.labelParts.label\n    )) {\n    return null;\n  }\n  const labelField = template.metaData.labelParts.label;\n\n  return data[labelField] ? data[labelField] : null;\n}\n\n/**\n * @deprecated\n */\nexport function dataSetToAnnotation(template, dataset) {\n  const body = {\n    type: ['TextualBody', 'Dataset'],\n    value: JSON.stringify(dataset),\n    format: 'text/plain',\n  };\n  const label = getLabelFromResourceTemplate(template, dataset);\n\n  return { body, label };\n}\n\nexport function dataSetToSingleAnnotation(template, dataset) {\n  const { metaData: { title, description } } = template;\n\n  dataset.context = dataset.context ? dataset.context : {};\n  if (title) {\n    dataset.context.Title = 'http://dublincore.org/documents/dcmi-terms/#terms-title';\n    dataset.Title = title;\n  }\n  if (description) {\n    dataset.context.Description = 'http://dublincore.org/documents/dcmi-terms/#terms-description';\n    dataset.Description = description;\n  }\n\n  const body = {\n    type: ['TextualBody', 'Dataset'],\n    value: JSON.stringify(dataset),\n    format: 'text/plain',\n  };\n\n\n  return { body, label: title };\n}\n\n/**\n * @deprecated\n */\nexport function getIndividualW3CAnnotationBodies(state, scope) {\n  const currentDraft = getCurrentDraft(state, scope);\n  const resourceTemplate = getCurrentResourceTemplate(state, scope);\n  const fields = Object.values(getForm(resourceTemplate).fields);\n\n  const selectors = Object.keys(currentDraft.selectors || {})\n    .map(key => ({ id: key, value: currentDraft.selectors[key] }))\n    .map(selector => {\n      const capModel = fields.find(model => model.id === selector.id);\n      return {\n        id: selector.id,\n        annotation: dataSetToSingleAnnotation(\n          capModel,\n          mapDraftToDataSet(fields, { [selector.id]: currentDraft.input[selector.id] }),\n        ),\n      }\n    });\n  const keyedSelectors = {};\n  for (let selector of selectors) {\n    keyedSelectors[selector.id] = selector.annotation;\n  }\n\n  return keyedSelectors;\n}\n\nexport function getW3CAnnotationBody(state, scope) {\n  const currentDraft = getCurrentDraft(state, scope);\n  const resourceTemplate = getCurrentResourceTemplate(state, scope);\n  const fields = Object.values(getForm(resourceTemplate).fields);\n\n  return dataSetToAnnotation(\n    resourceTemplate,\n    mapDraftToDataSet(fields, currentDraft.input),\n  );\n}\n\n\nexport function createDraftFromCaptureModel(scope, captureModelId, draftDefaults = {}, defaultMotivation = 'tagging') {\n  return (dispatch, getState) => {\n    const state = getState();\n    const { resources, motivation, selectors } = getDraftFromCaptureModel(\n      getResourceById(state, captureModelId),\n    );\n    dispatch(\n      createDraft(scope, resources, captureModelId, motivation || defaultMotivation, selectors, draftDefaults)\n    );\n  }\n}\n\nexport function getDraftFromCaptureModel(template) {\n  return {\n    motivation: motivationFromForm(\n      (template && template.metaData && template.metaData.motivatedBy) ? template.metaData.motivatedBy : {\n        id: 'oa:tagging',\n        label: 'Tagging',\n      },\n    ),\n    resources: getDraftTemplateFromCaptureModel(template),\n    selectors: getDraftSelectorsFromCaptureModel(template),\n  }\n}\n\nexport function getDraftTemplateFromCaptureModel(template) {\n  const resources = template.fields;\n  return Object.keys(resources).reduce((obj, key) => {\n    obj[resources[key].id] = null;\n    return obj;\n  }, {});\n}\n\nexport function getDraftSelectorsFromCaptureModel(template) {\n  const resources = template.fields;\n  return Object.keys(resources).reduce((obj, key) => {\n    obj[resources[key].id] = {\n      type: resources[key].metaData.selector,\n      ...resources[key].metaData.selectorValue\n    };\n    return obj;\n  }, {});\n}\n\nexport function constructUnknownTemplate(resourceTemplate) {\n  if (Choice.is(resourceTemplate)) {\n    return Choice.fromJsonLD(resourceTemplate);\n  }\n  if (CaptureModel.is(resourceTemplate)) {\n    return CaptureModel.fromJsonLD(resourceTemplate);\n  }\n}\n\nexport function importResourceTemplate(resourceTemplate, target = 'canvas') {\n  return (dispatch) => {\n    const tree = constructUnknownTemplate(resourceTemplate);\n\n    if (!tree) {\n      return;\n    }\n    if (tree instanceof CaptureModel) {\n      return dispatch(importResource(tree));\n    }\n\n    dispatch(importResourceTree(tree.getTree(target)));\n\n    tree\n      .flatten()\n      .forEach(r => dispatch(importResource(r)));\n  }\n}\n\n\nexport {\n  createDraftFromAnnotation,\n  mapAnnotationBody,\n  mapTarget,\n  parseTarget,\n  resourceTemplateReverseTypeLookup,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/index.js","export function getCurrentDraftId(state, scope) {\n  return state.drafts.currentDrafts[scope];\n}\n\nexport function getCurrentDrafts(state) {\n  return Object.values(state.drafts.currentDrafts);\n}\n\nexport function getDraftById(state, id) {\n  return state.drafts.list[id];\n}\n\nexport function getCurrentDraft(state, scope) {\n  return getDraftById(state, getCurrentDraftId(state, scope));\n}\n\nexport function getAllDraftsWithSelectors(state) {\n  return getDraftsWithSelectors(state.drafts.list);\n}\n\nexport function getDraftsWithSelectors(drafts) {\n  return Object.keys(drafts)\n    .filter(k => drafts[k] && drafts[k].selector)\n    .map(k => drafts[k]);\n}\n\nexport function currentDraftEditableRegions(state) {\n  const currentDrafts = getCurrentDrafts(state);\n  if (!currentDrafts) {\n    return [];\n  }\n  return editableRegionsFromDraftList(state.drafts.list, currentDrafts);\n}\n\n// @todo to revise.\nexport function mapDraftSelectorToRegion(draft, currentDraftKeys, onClickRegion, currentSelectorExists) {\n  const selector = draft.selector;\n  const keysAsString = currentDraftKeys.map(e => `${e}`);\n  return {\n    id: draft.id,\n    onClick: () => onClickRegion(draft.id),\n    selected: keysAsString.indexOf(`${draft.id}`) !== -1,\n    editing: keysAsString.indexOf(`${draft.id}`) !== -1 && currentSelectorExists,\n    immutable: false,\n    ...selector\n  }\n}\n\nexport function editableRegionsFromDraftList(drafts,\n  currentDraftKeys = [],\n  onClickRegion = () => null,\n  currentSelectorExists = true,) {\n  return getDraftsWithSelectors(drafts).map(draft => mapDraftSelectorToRegion(\n    draft,\n    currentDraftKeys,\n    onClickRegion,\n    currentSelectorExists,\n  ));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/query/draftQuery.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/style.scss\n// module id = 545\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiif-integration p {\\n  line-height: 1.25em;\\n  margin-bottom: 1rem; }\\n\\n.iiif-integration-spec {\\n  font-style: italic;\\n  padding: 1em 2em;\\n  border: 1px dotted grey;\\n  margin-bottom: 10px; }\\n\\n.iiif-integration-spec__list li {\\n  line-height: 1.75em; }\\n\\n.iiif-integration-description {\\n  font-size: 1.25rem; }\\n\\n.iiif-integration-admin {\\n  padding: 10px;\\n  background-color: #ffc; }\\n\\n.iiif-integration__row {\\n  display: block;\\n  clear: both; }\\n\\n.iiif-integration__image--large {\\n  width: 100%;\\n  height: 200px;\\n  background-color: #999; }\\n\\n.iiif-integration__image--small {\\n  display: block;\\n  float: left;\\n  width: 12.5%;\\n  margin: 2%;\\n  height: 180px;\\n  margin-bottom: 20px;\\n  background-color: #999; }\\n\\n.iiif-integration-places {\\n  display: block;\\n  float: left;\\n  width: 31.3%;\\n  margin: 0 1%; }\\n\\n.iiif-integration-places__list {\\n  padding: 0 1em; }\\n\\n.iiif-integration-places__list li {\\n  line-height: 1.75em; }\\n\\n.iiif-integration-schools {\\n  display: block;\\n  float: left;\\n  width: 31.3%;\\n  margin: 0 1%; }\\n\\n.iiif-integration-schools__list {\\n  padding: 0 1em; }\\n\\n.iiif-integration-schools__list li {\\n  line-height: 1.75em; }\\n\\n.iiif-integration-organisations {\\n  display: block;\\n  float: left;\\n  width: 31.3%;\\n  margin: 0 1%; }\\n\\n.iiif-integration-organisations__list {\\n  padding: 0 1em; }\\n\\n.iiif-integration-organisations__list li {\\n  line-height: 1.75em; }\\n\\n.iiif-integration-collection {\\n  display: block;\\n  float: left;\\n  width: 46%;\\n  margin: 0 2%;\\n  height: 300px; }\\n\\n#iiif-integration-canvas-image {\\n  width: 100%;\\n  height: 750px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/style.scss\n// module id = 546\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./base.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./base.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./base.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/base.scss\n// module id = 548\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"body.minimal {\\n  width: 95% !important;\\n  margin: 30px 0 !important;\\n  margin-left: auto !important;\\n  margin-right: auto !important; }\\n\\nbody.minimal div[role=\\\"main\\\"] {\\n  padding: 5% !important; }\\n\\n.osd-viewer__region-item {\\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.4); }\\n\\n[data-selector-type=\\\"WholeCanvasSelector\\\"] .osd-viewer__region-item {\\n  display: none; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/base.scss\n// module id = 549\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./grid.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./grid.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./grid.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/grid.scss\n// module id = 550\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-grid {\\n  display: block;\\n  box-sizing: border-box; }\\n  .iiifi-grid > div ~ div {\\n    padding-left: 20px; }\\n  .iiifi-grid__third {\\n    float: left;\\n    width: 33.333333%; }\\n  .iiifi-grid__two-thirds {\\n    float: left;\\n    width: 66.666666%; }\\n  .iiifi-grid:after, .iiifi-grid:before {\\n    content: '';\\n    display: table;\\n    clear: both; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/grid.scss\n// module id = 551\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./image-grid.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./image-grid.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./image-grid.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/image-grid.scss\n// module id = 552\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-image-grid__item {\\n  display: inline-block;\\n  vertical-align: middle;\\n  transform: perspective(1px) translateZ(0);\\n  box-shadow: 0 0 1px transparent;\\n  transition-duration: 0.3s;\\n  transition-property: transform;\\n  width: 180px;\\n  height: 190px;\\n  float: left;\\n  white-space: nowrap;\\n  display: block;\\n  padding: 20px 10px;\\n  margin: 10px;\\n  background-color: #535353;\\n  text-align: center; }\\n  .iiifi-image-grid__item:hover, .iiifi-image-grid__item:focus, .iiifi-image-grid__item:active {\\n    transform: scale(1.02); }\\n  .iiifi-image-grid__item:before {\\n    content: '';\\n    display: inline-block;\\n    height: 100%;\\n    vertical-align: middle;\\n    margin-right: -0.25em;\\n    /* Adjusts for spacing */ }\\n  .iiifi-image-grid__item:hover {\\n    background-color: #2f2f2f; }\\n\\n.iiifi-image-grid__image {\\n  display: inline-block;\\n  vertical-align: middle; }\\n\\n.iiifi-image-grid:after, .iiifi-image-grid:before {\\n  content: '';\\n  display: table;\\n  clear: both; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/image-grid.scss\n// module id = 553\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./collection-list.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./collection-list.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./collection-list.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/collection-list.scss\n// module id = 554\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-collection-list {\\n  width: 100%; }\\n  .iiifi-collection-list ul {\\n    padding: 0;\\n    margin: 0 -10px; }\\n  .iiifi-collection-list__item {\\n    margin: 0;\\n    list-style-type: none;\\n    float: left;\\n    width: 50%;\\n    padding: 5px 10px; }\\n  .iiifi-collection-list__item-inline {\\n    padding: 5px 15px;\\n    list-style-type: none; }\\n  .iiifi-collection-list:after, .iiifi-collection-list:before {\\n    content: '';\\n    display: table;\\n    clear: both; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/collection-list.scss\n// module id = 555\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./collection-item.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./collection-item.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./collection-item.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/collection-item.scss\n// module id = 556\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-collection-item {\\n  margin-bottom: 20px; }\\n  .iiifi-collection-item__image-container {\\n    width: 100%; }\\n  .iiifi-collection-item__image {\\n    max-width: 100%; }\\n  .iiifi-collection-item__caption {\\n    padding: 10px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/collection-item.scss\n// module id = 557\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./topic-list.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./topic-list.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./topic-list.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/topic-list.scss\n// module id = 558\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-topic-list ul {\\n  padding: 0;\\n  margin: 0 0 1.4em; }\\n\\n.iiifi-topic-list__item {\\n  list-style-type: none; }\\n\\n.iiifi-topic-list--inline {\\n  display: inline; }\\n  .iiifi-topic-list--inline ul {\\n    display: inline; }\\n  .iiifi-topic-list--inline .iiifi-topic-list__item {\\n    display: inline; }\\n    .iiifi-topic-list--inline .iiifi-topic-list__item ~ .iiifi-topic-list__item:before {\\n      content: ', ';\\n      width: 0.4em;\\n      display: inline-block; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/topic-list.scss\n// module id = 559\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./prev-next.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./prev-next.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./prev-next.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/prev-next.scss\n// module id = 560\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-prev-next ul {\\n  padding: 0; }\\n\\n.iiifi-prev-next__item {\\n  display: inline-block;\\n  list-style: none;\\n  float: left;\\n  width: 200px; }\\n  .iiifi-prev-next__item a {\\n    padding: 10px;\\n    display: block;\\n    background: #f1f1f1;\\n    text-align: center;\\n    margin: 0 0 30px; }\\n  .iiifi-prev-next__item--next {\\n    text-align: right;\\n    float: right; }\\n\\n.iiifi-prev-next:after, .iiifi-prev-next:before {\\n  content: '';\\n  display: table;\\n  clear: both; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/prev-next.scss\n// module id = 561\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-application/src/css/pagination.scss\n// module id = 562\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".iiifi-pagination__item {\\n  display: inline-block;\\n  list-style: none; }\\n  .iiifi-pagination__item a {\\n    display: block;\\n    border: 1px solid #ccc;\\n    padding: 5px 10px;\\n    margin: 5px 3px;\\n    width: 3em;\\n    text-align: center; }\\n    .iiifi-pagination__item a.active {\\n      border-color: #afafaf;\\n      background-color: #f1f1f1; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-application/src/css/pagination.scss\n// module id = 563\n// module chunks = 0","import React from 'react';\nimport {render} from 'react-dom';\nimport {createStore, reducers} from 'digirati-annotation-redux';\nimport {unknownPropertyWarning} from './core.utils';\nimport CoreProvider from './core.provider';\n\nexport default function CorePlugin($el, {\n  manifest,\n  canvas,\n  elucidateServer,\n  ...unknownProps\n}) {\n  unknownPropertyWarning(unknownProps);\n\n  const store = createStore(reducers);\n  render(\n    <CoreProvider\n      store={store}\n      manifest={manifest}\n      elucidateServer={elucidateServer}\n      canvas={canvas}\n    />\n    , $el);\n\n  return Promise.resolve(store);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-core/src/core.plugin.js","import * as logging from './logging';\nimport * as annotations from './annotations';\nimport * as selectors from './selectors';\nimport * as drafts from './drafts';\nimport * as resources from './resources';\nimport * as elucidate from './elucidate';\nimport * as manifest from './manifest';\nimport * as viewer from './viewer';\nimport * as help from './help';\n\nexport { logging, annotations, selectors, drafts, resources, elucidate, manifest, viewer, help };\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/index.js","export class AnnotationSelector {\n\n  static DIRECTION_LTR = 'ltr';\n  static DIRECTION_RTL = 'rtl';\n  static DIRECTION_AUTO = 'auto';\n  static W3C_SELECTOR = /[#&\\?]xywh\\=(pixel\\:|percent\\:)?(\\d+),(\\d+),(\\d+),(\\d+)/;\n\n  static fromArray(multipleSelectors) {\n    return multipleSelectors.map(\n      annotation => AnnotationSelector.parse(annotation),\n    );\n  }\n\n  constructor(id, scale, format, language, processingLanguage, textDirection, selector) {\n    if (!id) {\n      throw new Error('ID is required in selector');\n    }\n    if (\n      textDirection && (\n        textDirection !== AnnotationSelector.DIRECTION_AUTO &&\n        textDirection !== AnnotationSelector.DIRECTION_LTR &&\n        textDirection !== AnnotationSelector.DIRECTION_RTL\n      )\n    ) {\n      throw new Error('textDirection must be ONE of [ltr, rtl, auto]');\n    }\n\n    this.id = id;\n    this.format = format;\n    this.language = language;\n    this.processingLanguage = processingLanguage;\n    this.textDirection = textDirection;\n    this.target = AnnotationSelector.parseTarget(id, scale, selector);\n  }\n\n\n  static parse(text, scale = 1) {\n    if (!text) {\n      return null;\n    }\n\n    // https://www.w3.org/TR/annotation-model/#bodies-and-targets\n    if (text.id) {\n      return new AnnotationSelector(\n        text.id,\n        scale,\n        text.format,\n        text.language,\n        text.processingLanguage,\n        text.textDirection,\n      )\n    }\n\n    // https://www.w3.org/TR/annotation-model/#selectors\n    if (text.source) {\n      return new AnnotationSelector(\n        text.source,\n        scale,\n        text.format,\n        text.language,\n        text.processingLanguage,\n        text.textDirection,\n        text.selector,\n      );\n    }\n\n    // @todo check for is text or is object and construct accordingly.\n    return new AnnotationSelector(text, scale);\n  }\n\n  static parseTarget(source, scale = 1, selector = null) {\n    let toParse = source;\n    if (selector && selector.type === 'FragmentSelector') {\n      toParse = `${source}#${selector.value}`;\n    }\n\n    const match = AnnotationSelector.W3C_SELECTOR.exec(toParse);\n    if (match) {\n      return {\n        unit: (match[1] === 'percent:' ? 'percent' : 'pixel'),\n        scale,\n        expanded: true,\n        x: parseInt(match[2], 10) * scale,\n        y: parseInt(match[3], 10) * scale,\n        width: parseInt(match[4], 10) * scale,\n        height: parseInt(match[5], 10) * scale,\n        toString() {\n          // @todo maybe something else?\n          return source.split('#')[0];\n        },\n      };\n    }\n    return source;\n  }\n\n  toString() {\n    return this.id;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/elucidate/AnnotationSelector.js","export * from './draftQuery';\nexport * from './resourceQuery';\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/query/index.js","import logging from './loggingReducer';\nimport drafts from './draftReducer';\nimport annotations from './annotationReducer';\nimport selector from './selectorReducer';\nimport elucidate from './elucidateReducer';\nimport manifest from './manifestReducer';\nimport resource from './resourceReducer';\nimport help from './helpReducer';\n\nexport default {\n  logging,\n  drafts,\n  resource,\n  annotations,\n  selector,\n  elucidate,\n  manifest,\n  help,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/index.js","import { LOGGING_LOG } from '../actions/logging';\nimport update from 'immutability-helper';\n\nconst defaultState = {\n  messages: [],\n};\n\nexport default function loggingReducer(state = defaultState, action) {\n  if (action.type === LOGGING_LOG) {\n    return update(state, {\n      messages: { $push: [action.payload.message] },\n    });\n  }\n  return state;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/loggingReducer.js","import {\n  DRAFT_CONFIRM,\n  DRAFT_CREATE,\n  DRAFT_DESELECT,\n  DRAFT_DISCARD,\n  DRAFT_PREVIEW,\n  DRAFT_PUBLISHED,\n  DRAFT_PUBLISHING,\n  DRAFT_REMOVE_SELECTOR,\n  DRAFT_SELECT,\n  DRAFT_UNPREVIEW,\n  DRAFT_UPDATE_FIELD_SELECTOR,\n  DRAFT_UPDATE_INPUT,\n  DRAFT_UPDATE_SELECTOR,\n} from '../actions/drafts';\nimport update from 'immutability-helper';\n\nconst defaultState = {\n  currentDrafts: {},\n  isConfirmed: {},\n  list: {},\n};\n\nfunction draftModel(draft) {\n  return {\n    id: draft.id,\n    input: draft.input || {},\n    selectors: draft.selectors || {},\n    template: draft.template,\n    motivation: draft.motivation,\n    isPublishing: draft.isPublishing || false,\n    isPreviewing: draft.isPreviewing || false,\n    selector: draft.selector || null,\n  };\n}\n\nexport default function draftReducer(state = defaultState, action) {\n  switch (action.type) {\n    case DRAFT_CREATE:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            $set: draftModel(action.payload),\n          },\n        },\n      });\n\n    case DRAFT_UPDATE_FIELD_SELECTOR:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            selectors: { $merge: action.payload.selectors },\n          },\n        },\n      });\n\n    case DRAFT_UPDATE_INPUT:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            input: { $merge: action.payload.fields },\n          },\n        },\n      });\n\n    case DRAFT_REMOVE_SELECTOR:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            selector: { $set: null },\n          },\n        },\n      });\n\n    case DRAFT_UPDATE_SELECTOR:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            selector: { $set: action.payload.selector ? action.payload.selector : state.list[action.payload.id].selector },\n          },\n        },\n      });\n\n    case DRAFT_SELECT:\n      return update(state, {\n        currentDrafts: { [action.payload.scope]: { $set: action.payload.id } },\n      });\n\n    case DRAFT_DESELECT:\n      return update(state, {\n        currentDrafts: { [action.payload.scope]: { $set: null } },\n      });\n\n    case DRAFT_PUBLISHING:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            isPublishing: { $set: true },\n          },\n        },\n      });\n\n    case DRAFT_PREVIEW:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            isPreviewing: { $set: true },\n          },\n        },\n      });\n\n    case DRAFT_UNPREVIEW:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            isPreviewing: { $set: false },\n          },\n        },\n      });\n\n    case DRAFT_CONFIRM:\n      return update(state, {\n        isConfirmed: { [action.payload.scope]: { $set: false } },\n      });\n\n    case DRAFT_PUBLISHED:\n      return update(state, {\n        currentDrafts: { [action.payload.scope]: { $set: null } },\n        isConfirmed: { [action.payload.scope]: { $set: true } },\n        list: {\n          $apply: function (obj) {\n            const { [action.payload.id]: _, ...copy } = obj;\n            return copy;\n          },\n        },\n      });\n\n    case DRAFT_DISCARD:\n      const listUpdate = {\n        $apply: function (obj) {\n          const { [action.payload.id]: _, ...copy } = obj;\n          return copy;\n        },\n      };\n      if (state.currentDrafts[action.payload.scope] !== action.payload.id) {\n        return update(state, {\n          list: listUpdate,\n        });\n      }\n      return update(state, {\n        currentDrafts: { [action.payload.scope]: { $set: null } },\n        list: listUpdate,\n      });\n\n\n  }\n  return state;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/draftReducer.js","import { ANNOTATIONS_ADD } from '../actions/annotations';\nimport update from 'immutability-helper';\n\nconst defaultState = {\n  list: [],\n};\n\nexport default function annotationReducer(state = defaultState, action) {\n  if (action.type === ANNOTATIONS_ADD) {\n    return update(state, {\n      list: { $push: [action.payload.annotation] },\n    });\n  }\n  return state;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/annotationReducer.js","import {\n  SELECTOR_CANCEL,\n  SELECTOR_CHOOSE,\n  SELECTOR_COMMIT_TO_DRAFT,\n  SELECTOR_COMMIT_TO_DRAFT_FIELD,\n  SELECTOR_SET_AVAILABLE,\n  SELECTOR_UPDATE\n} from '../actions/selectors';\nimport update from 'immutability-helper';\n\nconst defaultState = {\n  available: [],\n  currentSelector: {},\n};\n\nexport default function selectorReducer(state = defaultState, action) {\n\n  switch (action.type) {\n    case SELECTOR_SET_AVAILABLE:\n      return update(state, {\n        available: { $set: action.payload.selectors },\n      });\n\n    case SELECTOR_CHOOSE:\n      return update(state, {\n        currentSelector: {\n          $set: {\n            type: action.payload.type,\n            source: action.payload.source,\n            ...action.payload.defaults\n          },\n        },\n      });\n\n    case SELECTOR_UPDATE:\n      return update(state, {\n        currentSelector: { $merge: action.payload.data },\n      });\n\n    case SELECTOR_COMMIT_TO_DRAFT:\n    case SELECTOR_COMMIT_TO_DRAFT_FIELD:\n    case SELECTOR_CANCEL:\n      return update(state, {\n        currentSelector: { $set: {} },\n      });\n\n  }\n\n  return state;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/selectorReducer.js","import update from 'immutability-helper';\nimport {\n  ELUCIDATE_ADD_ANNOTATION,\n  ELUCIDATE_CREATE_COLLECTION,\n  ELUCIDATE_SEND_ANNOTATION,\n  ELUCIDATE_SET_COLLECTION,\n  ELUCIDATE_SET_RESOURCE,\n  ELUCIDATE_SET_SERVER\n} from '../actions/elucidate';\n\nconst defaultState = {\n  server: null,\n  resource: null,\n  collection: {\n    id: null,\n    label: null,\n    resourceId: null,\n    loading: false,\n  },\n  annotations: {},\n  pendingAnnotations: 0,\n};\n\nexport default function elucidateReducer(state = defaultState, action) {\n  switch (action.type) {\n    case ELUCIDATE_SET_SERVER:\n      return update(state, {\n        server: { $set: action.payload.server },\n      });\n\n    case ELUCIDATE_SET_RESOURCE:\n      return update(state, {\n        resource: { $set: action.payload.resource },\n      });\n\n    case ELUCIDATE_CREATE_COLLECTION:\n      return update(state, {\n        collection: {\n          loading: { $set: true },\n          label: { $set: action.payload.label },\n          resourceId: { $set: action.payload.resourceId },\n        },\n      });\n\n    case ELUCIDATE_SET_COLLECTION:\n      return update(state, {\n        collection: {\n          $set: Object.assign({}, action.payload.collection, { loading: false }),\n        },\n      });\n\n    case ELUCIDATE_SEND_ANNOTATION:\n      return update(state, {\n        pendingAnnotations: { $apply: (n) => n + 1 },\n      });\n\n    case ELUCIDATE_ADD_ANNOTATION:\n      return update(state, {\n        pendingAnnotations: { $apply: (n) => n - 1 },\n        annotations: {\n          [action.payload.id]: {\n            $set: action.payload.annotation,\n          },\n        },\n      });\n\n    default:\n      return state;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/elucidateReducer.js","import update from 'immutability-helper';\nimport {\n  MANIFEST_ADD,\n  MANIFEST_CANVAS_SELECT,\n  MANIFEST_REMOVE,\n  MANIFEST_REQUEST,\n  MANIFEST_SELECT\n} from '../actions/manifest';\n\nconst defaultState = {\n  currentCanvas: null,\n  current: null,\n  list: {},\n  pending: [],\n};\n\nexport default function manifestReducer(state = defaultState, action) {\n\n  switch (action.type) {\n\n    case MANIFEST_ADD:\n      return update(state, {\n        list: {\n          $set: {\n            [action.payload.url]: action.payload.manifest,\n          },\n        },\n      });\n\n    case MANIFEST_SELECT:\n      return update(state, {\n        current: {\n          $set: action.payload.url,\n        },\n      });\n\n    case MANIFEST_CANVAS_SELECT:\n      return update(state, {\n        currentCanvas: {\n          $set: action.payload.url,\n        },\n      });\n\n    case MANIFEST_REMOVE:\n      const listUpdate = {\n        $apply: function (obj) {\n          const { [action.payload.url]: _, ...copy } = obj;\n          return copy;\n        },\n      };\n      if (state.current !== action.payload.url) {\n        return update(state, {\n          list: listUpdate,\n        });\n      }\n      return update(state, {\n        current: { $set: null },\n        list: listUpdate,\n      });\n\n    case MANIFEST_REQUEST:\n      return update(state, {\n        pending: { $push: [action.payload.url] },\n      });\n  }\n\n  return state;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/manifestReducer.js","import {\n  IMPORT_CAPTURE_MODEL,\n  IMPORT_RESOURCE_CHOICE,\n  IMPORT_RESOURCE_FIELD,\n  IMPORT_RESOURCE_TREE,\n  IMPORT_UNKNOWN_RESOURCE,\n  RESOURCE_NAV_BACK,\n  RESOURCE_NAV_FORWARD,\n  RESOURCE_NAV_RESET\n} from '../actions/resources';\n\nimport update from 'immutability-helper';\n\nconst defaultState = {\n  currentPaths: {},\n  trees: {},\n  list: {},\n};\n\nconst captureModelDefaults = {\n  fields: {},\n};\n\nexport default function resourceReducer(state = defaultState, action) {\n  if (action.error) {\n    switch (action.type) {\n      case IMPORT_RESOURCE_TREE:\n      case IMPORT_UNKNOWN_RESOURCE:\n      case IMPORT_RESOURCE_FIELD:\n        console.error(action.payload);\n        return state;\n    }\n\n    return state;\n  }\n\n  switch (action.type) {\n\n    case RESOURCE_NAV_FORWARD:\n      if (!state.currentPaths[action.payload.tree]) {\n        // @todo Log error.\n        return state;\n      }\n      return update(state, {\n        currentPaths: { [action.payload.tree]: { $push: [action.payload.path] } },\n      });\n\n    case RESOURCE_NAV_BACK:\n      if (!state.currentPaths[action.payload.tree]) {\n        // @todo Log error.\n        return state;\n      }\n      return update(state, {\n        currentPaths: { [action.payload.tree]: { $apply: (path) => path.length > 0 ? path.slice(0, -1) : [] } },\n      });\n\n    case RESOURCE_NAV_RESET:\n      return update(state, {\n        currentPaths: { [action.payload.tree]: { $set: [] } },\n      });\n\n    case IMPORT_RESOURCE_TREE:\n      return update(state, {\n        currentPaths: {\n          [action.payload.id]: { $set: [] },\n        },\n        trees: {\n          [action.payload.id]: { $set: action.payload.tree },\n        },\n      });\n\n    case IMPORT_RESOURCE_CHOICE:\n      return state; // This all exists in the tree for now.\n\n    case IMPORT_CAPTURE_MODEL:\n      return update(state, {\n        list: {\n          [action.payload.id]: { $set: { ...captureModelDefaults, ...action.payload.resource } },\n        },\n      });\n\n    case IMPORT_RESOURCE_FIELD:\n      return update(state, {\n        list: {\n          [action.payload.id]: {\n            fields: {\n              [action.payload.resource.id]: { $set: action.payload.resource },\n            },\n          },\n        },\n      });\n      return state;\n  }\n\n  return state;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/resourceReducer.js","import { HELP_CONTEXT_ADD, HELP_CONTEXT_REMOVE, HELP_INFO_ADD, HELP_INFO_REMOVE } from '../actions/help';\nimport update from 'immutability-helper';\n\nconst defaultState = {\n  context: null,\n  info: {},\n  warning: {},\n  error: {},\n};\n\nexport default function elucidateReducer(state = defaultState, action) {\n\n  switch (action.type) {\n    case HELP_INFO_ADD:\n      return update(state, {\n        [action.payload.type]: {\n          [action.payload.key]: { $set: action.payload.content },\n        },\n      });\n\n    case HELP_INFO_REMOVE:\n      return update(state, {\n        [action.payload.type]: {\n          $apply: function (obj) {\n            const { [action.payload.key]: _, ...copy } = obj;\n            return copy;\n          },\n        },\n      });\n\n    case HELP_CONTEXT_ADD:\n      return update(state, {\n        context: { $set: action.payload.content },\n      });\n\n    case HELP_CONTEXT_REMOVE:\n      return update(state, {\n        context: { $set: null },\n      });\n    default:\n      return state;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/reducers/helpReducer.js","import React from 'react';\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux';\nimport {\n  addSelectorToDraftFromViewer,\n  asyncPublishDraft,\n  confirmDraft,\n  createDraft,\n  deselectDraft,\n  discardCurrentDraft,\n  discardDraft,\n  editCurrentDraftFieldSelector,\n  previewDraft,\n  publishDraft,\n  removeSelectorFromCurrentDraft,\n  removeSelectorFromDraft,\n  selectDraft,\n  unpreviewDraft,\n  updateDraft,\n} from './actions/drafts';\nimport { addAnnotation } from './actions/annotations';\nimport {\n  cancelSelector,\n  chooseSecondarySelector,\n  chooseSelector,\n  commitToCurrentDraft,\n  commitToCurrentDraftField,\n  editCurrentDraftSecondarySelector,\n  editCurrentDraftSelector,\n  setAvailableSelectors,\n  updateSelector,\n} from './actions/selectors';\nimport {\n  addElucidateAnnotation,\n  createCollection,\n  createAnnotation,\n  sendAnnotation,\n  setCollection,\n  setResource,\n  setServer,\n} from './actions/elucidate';\nimport { moveBack, moveForward, reset } from './actions/resources';\nimport { currentDraftEditableRegions, getCurrentDraft, getDraftById } from './query/draftQuery';\nimport { getCurrentResource, getCurrentResourceTemplate, getForm, resourceTemplateList } from './query/resourceQuery';\nimport { addManifest, removeManifest, requestManifest, selectCanvas, selectManifest } from './actions/manifest';\nimport { richAnnotationList } from './query/elucidateQuery';\nimport { setViewer, withViewer } from './actions/viewer';\nimport { currentSelectorIsSecondary, isSelecting } from './query/selectorQuery';\n\n\nfunction bindCurrentResource(currentResource, actions) {\n  if (!currentResource) {\n    return {};\n  }\n  return Object.keys(actions).reduce((state, key) => {\n    state[key] = (...args) => actions[key](currentResource, ...args);\n    return state;\n  }, {});\n}\n\nexport default (WrappedComponent, actions = {}) => connect((state, props) => {\n  const annotationList = richAnnotationList(state);\n  const currentResource = props.tree ? getCurrentResource(props.tree, state) : null;\n  const currentResourceTemplate = props.tree ? getCurrentResourceTemplate(state, props.tree) : null;\n  const currentDraft = props.tree ? getCurrentDraft(state, props.tree) : null;\n  const currentSelector = (state.selector && state.selector.currentSelector) ? state.selector.currentSelector : null;\n\n  // @todo move to query.\n  const currentDraftList = Object.values(state.drafts.currentDrafts);\n  const currentDraftSelectors = currentDraftList.length ? currentDraftList.reduce((selectors, currentDraftId) => {\n    if (!currentDraftId) {\n      return [];\n    }\n    const currentDraft = getDraftById(state, currentDraftId);\n    if (!currentDraft) {\n      return [];\n    }\n    Object.keys(currentDraft.selectors).forEach(k => {\n      selectors.push({ ...currentDraft.selectors[k], id: k, isSecondary: true });\n    });\n    return selectors;\n  }, []) : [];\n\n\n  return {\n    state,\n    currentSelector,\n    currentDraft,\n    currentResource,\n    isSelecting: isSelecting(state),\n    isSelectingPrimary: (isSelecting(state) && currentSelectorIsSecondary(state) === false),\n    isSelectingSecondary: (isSelecting(state) && currentSelectorIsSecondary(state) === true),\n    isConfirmingDraft: props.tree ? state.drafts.isConfirmed[props.tree] === false : true,\n    editableRegions: currentDraftEditableRegions(state),\n    drafts: state.drafts.list,\n    currentResourceTemplate,\n    currentDraftSelectors,\n    draftIsCurrentlySelecting: (!currentDraft || !currentDraft.selector) && currentSelector.type,\n    draftHasSelector: (!currentDraft || !currentDraft.selector),\n    resourceTemplateList: resourceTemplateList(state),\n    wholeCanvasAnnotations: annotationList ? annotationList.filter(anno => anno.selector && !anno.selector.target.expanded) : [],\n    regionAnnotations: annotationList ? annotationList.filter(anno => anno.selector && anno.selector.target.expanded) : [],\n    resourceForm: currentResourceTemplate ? getForm(currentResourceTemplate) : null,\n    resourceTemplates: state.resource,\n  }\n}, (dispatch, ownProps) => bindActionCreators({\n  ...bindCurrentResource(ownProps.tree, {\n    confirmDraft,\n    deselectDraft,\n    discardDraft,\n    discardCurrentDraft,\n    removeSelectorFromCurrentDraft,\n    selectDraft,\n    editCurrentDraftSecondarySelector,\n    editCurrentDraftSelector,\n    editCurrentDraftFieldSelector,\n    unpreviewDraft,\n    createDraft,\n  }),\n  commitToCurrentDraft,\n  commitToCurrentDraftField,\n  cancelSelector,\n  chooseSecondarySelector,\n  setAvailableSelectors,\n  chooseSelector,\n  updateSelector,\n  getCurrentDraft,\n  updateDraft,\n  previewDraft,\n  addSelectorToDraftFromViewer,\n  removeSelectorFromDraft,\n  setViewer,\n  withViewer,\n  setServer,\n  createCollection,\n  setCollection,\n  sendAnnotation,\n  createAnnotation,\n  addElucidateAnnotation,\n  addAnnotation,\n  publishDraft,\n  asyncPublishDraft,\n  setResource,\n  requestManifest,\n  addManifest,\n  removeManifest,\n  selectCanvas,\n  selectManifest,\n  moveForward,\n  moveBack,\n  reset,\n  ...actions\n}, dispatch), null, { withRef: true })(WrappedComponent);\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/connector.js","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\nimport middleware from './middleware';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default function createCustomStore(reducers = [e => e || {}], extraMiddleware = []) {\n  return createStore(\n    combineReducers(reducers),\n    composeEnhancers(\n      applyMiddleware(...[...middleware, ...extraMiddleware]),\n    ),\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/createStore.js","import thunk from 'redux-thunk';\n\nconst logger = store => next => action => {\n  if (typeof action !== 'function' && process.env.__DEV__ === true) {\n    // console.log('dispatching', action);\n  }\n  return next(action);\n};\nconst ViewerStore = { viewer: null, resolve: null, err: null };\nconst viewerReady = new Promise((resolve, err) => {\n  ViewerStore.resolve = resolve;\n  ViewerStore.err = err;\n});\n\nconst viewerAware = store => next => action => {\n  if (action.type === 'VIEWER_MUTATION') {\n    ViewerStore.resolve(action.payload.viewer);\n  }\n  if (action.type === 'VIEWER_ACCESS') {\n    return viewerReady.then(viewer => {\n      action.payload.func(viewer, store.dispatch, store.getState);\n    })\n  }\n  return next(action);\n};\n\nconst showUntilQueue = {};\n\nconst showUntil = store => next => action => {\n  if (action.type === 'SHOW_UNTIL') {\n    showUntilQueue[action.payload.type] = showUntilQueue[action.payload.type] ? showUntilQueue[action.payload.type] : [];\n    showUntilQueue[action.payload.type].push(action.payload.name);\n  }\n  if (showUntilQueue[action.type]) {\n    store.dispatch({ type: 'SHOW_UNTIL_REMOVED', payload: { names: showUntilQueue[action.type] } });\n    showUntilQueue[action.type] = [];\n  }\n  return next(action);\n};\n\nexport default [\n  logger, thunk, viewerAware, showUntil,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/middleware.js","import plugin from './viewer.plugin';\nimport provider from './viewer.provider';\nimport Component from './viewer';\n\nexport {\n  Component,\n  provider,\n  plugin,\n};\n\nexport default plugin;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-viewer/src/index.js","import React from 'react';\nimport {render} from 'react-dom';\nimport {utils} from 'digirati-annotation-plugin-core';\nimport ViewerProvider from './viewer.provider';\n\nexport default function ViewerPlugin($el, {\n  viewer,\n  height,\n  width,\n  toggleable,\n  ...unknownProps\n}, store) {\n  utils.unknownPropertyWarning(unknownProps);\n\n  const image = {\n    src: $el.querySelector('img').src,\n    height: parseInt(height, 10) || 0,\n    width: parseInt(width, 10) || 0,\n  };\n\n  render(<ViewerProvider toggleable={toggleable} selectedViewer={viewer} image={image} store={store}/>, $el);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-viewer/src/viewer.plugin.js","/**\n * This is a port of: https://github.com/digirati-co-uk/omeka-elucidate-module/blob/master/src/Domain/AnnotationBody.php\n */\n\n/**\n * Parse and return the entity class for a given source URI.\n *\n * @param uri\n */\nexport function tagClassForUri(uri) {\n  const regex = /\\/topics\\/(?:virtual:)?([A-Za-z_+-].+)\\//;\n  const matches = regex.exec(uri);\n\n  if (matches.length > 1) {\n    return matches[1];\n  } else {\n    return null;\n  }\n}\n\nexport default class AnnotationBody {\n\n  constructor(type = null, textualBody = null, source = null) {\n    this.type = type;\n    this.textualBody = textualBody;\n    this.source = source;\n  }\n\n  static fromJsonLD(jsonLd) {\n    return AnnotationBody.fromBody(jsonLd);\n  }\n\n  static fromBody(body) {\n    if (!body) {\n      return new AnnotationBody();\n    }\n    if (\n      Object.prototype.toString.call(body) !== '[object Object]' && body.value\n    ) {\n      return new AnnotationBody(null, body['value']);\n    }\n\n    if (Object.prototype.toString.call(body) !== '[object Array]') {\n      return null;\n    }\n    const textualBody = body.filter(function (item) {\n        return (item.type ? item.type : '').toLowerCase() === 'textualbody' || (item.type ? item.type : '').toLowerCase() === 'text';\n      }) || null;\n\n    const specificResource = body.filter(function (item) {\n        return item.type === 'SpecificResource';\n      }) || '';\n\n    const source = specificResource ? specificResource[0]['source'] : null;\n    const type = source ? tagClassForUri(source) : null;\n\n    return new AnnotationBody(\n      type,\n      textualBody ? textualBody[0]['value'] : null,\n      source,\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/annotationBody.js","import React from 'react';\nimport {branch, compose, lifecycle, mapProps, pure, renderComponent, renderNothing} from 'recompose';\nimport BEM from 'digirati-bem-js';\n\nconst style = BEM.block('osd-viewer');\n\nexport function isValidTileSource(tileSource) {\n  return !!(\n    tileSource &&\n    tileSource['@context'] &&\n    tileSource['@id'] &&\n    tileSource.protocol === 'http://iiif.io/api/image' &&\n    tileSource.width &&\n    tileSource.height &&\n    tileSource.profile\n  );\n}\n\nexport function getCanonicalImage(image) {\n  if (image.substr(-9, 9) === 'info.json') {\n    return image;\n  }\n  if (image.substr(-1, 1) === '/') {\n    return `${image}info.json`;\n  }\n  return `${image}/info.json`;\n}\n\nexport function resolveRealTileSourceFromCanvas(canvas) {\n  return resolveRealTileSource(\n    canvas.images.map(image => image.resource.service || null).filter(e => e).pop(),\n  );\n}\n\nexport function resolveRealTileSource(image) {\n  if (isValidTileSource(image)) {\n    return Promise.resolve(image);\n  }\n\n  if (image['@id']) {\n    return fetch(getCanonicalImage(image['@id']))\n      .then(r => r.json())\n      .then(tileSource => isValidTileSource(tileSource) ? tileSource : null);\n  }\n\n  return Promise.resolve(null);\n}\n\nexport function createElement(isSelected, id, type) {\n  const container = document.createElement('div');\n  const $el = document.createElement('div');\n  container.setAttribute('data-selected', isSelected);\n  if (type) {\n    container.setAttribute('data-selector-type', type);\n  }\n  container.id = `overlay-${id}`;\n  $el.classList.add(\n    ...style.element('region-item').modifiers({selected: isSelected}, false)\n  );\n  container.appendChild($el);\n  return container;\n}\n\nexport function withManifest(BaseComponent) {\n  return compose(\n    mapProps(props => ({\n      regionIds: props.regions ? props.regions.map(region => region.id) : [],\n      ...props\n    })),\n    lifecycle({\n      componentWillMount() {\n        const {canvas} = this.props;\n        resolveRealTileSourceFromCanvas(canvas).then((tileSource) => this.setState({tileSource}));\n      },\n    }),\n    branch(\n      ({tileSource}) => tileSource,\n      renderComponent(BaseComponent),\n      renderComponent(() => <div>loading...</div>),\n    ),\n  )(renderNothing());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/openseadragon/utility.js","import OpenSeadragon from 'openseadragon';\nimport React, {PureComponent} from 'react';\nimport '../OpenSeadragonViewer.scss';\nimport ScaledImageViewer from '../ScaledImageViewer';\nimport {withState} from 'recompose';\n\nclass Viewer extends PureComponent {\n\n  asyncAddTile(args) {\n    return new Promise((success, err) => {\n      try {\n        this.viewer.addTiledImage.call(this.viewer, {success, ...args});\n      } catch (e) {\n        err(e);\n      }\n    });\n  }\n\n  createRelativePoint(x, y) {\n    return this.viewer.viewport.viewerElementToImageCoordinates(\n      new OpenSeadragon.Point(x, y),\n    );\n  }\n\n  createViewportPoint(x, y) {\n    return this.viewer.viewport.imageToViewerElementCoordinates(\n      new OpenSeadragon.Point(x, y),\n    );\n  }\n\n  getImageSize() {\n    return {\n      width: this.props.width,\n      height: this.props.height,\n    }\n  }\n\n  componentDidMount() {\n    const {getRef, setFallback, onImageLoaded, tileSource} = this.props;\n    if (!tileSource) {\n      console.error('Something went wrong, we cannot display the open sea dragon');\n      setFallback(true);\n    }\n    this.viewer = new OpenSeadragon({\n      element: this.element,\n      ajaxWithCredentials: false,\n      showNavigator: true,\n      showRotationControl: true,\n      defaultZoomLevel: 0,\n      maxZoomPixelRatio: 2,\n      navigatorPosition: 'BOTTOM_RIGHT',\n      animationTime: 0.6,\n      immediateRender: false,\n      preserveViewport: true,\n      blendTime: 0,\n      minPixelRatio: 0.5,\n      visibilityRatio: 0.65,\n      constrainDuringPan: false,\n      showSequenceControl: false,\n      showNavigationControl: false,\n      showZoomControl: true,\n      showHomeControl: false,\n      showFullPageControl: false,\n      sequenceMode: true,\n      prefixUrl: 'http://zimeon.github.io/iiif-dragndrop/openseadragon/images/',\n    });\n    if (getRef) {\n      getRef(this);\n    }\n\n    this.asyncAddTile({tileSource}).then(e => {\n      this.viewer.viewport.goHome(true);\n      if (onImageLoaded) {\n        onImageLoaded(this.viewer, e);\n      }\n    });\n  }\n\n  render() {\n    const {height, fallback, width, maxHeight = Infinity, scale} = this.props;\n\n    if (fallback) {\n      return (\n        <ScaledImageViewer { ...this.props}/>\n      );\n    }\n\n    const actualHeight = ( height * scale ) < maxHeight ? height * scale : maxHeight;\n    return (\n      <div style={{position: 'relative'}}>\n        <div ref={el => this.element = el} style={{height: actualHeight, width: width * scale}}/>\n      </div>\n    );\n  }\n}\n\nexport default withState('fallback', 'setFallback', false)(Viewer);\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/openseadragon/viewer.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./OpenSeadragonViewer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./OpenSeadragonViewer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./OpenSeadragonViewer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/viewers/OpenSeadragonViewer.scss\n// module id = 614\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".osd-viewer__region-item {\\n  height: 100%;\\n  width: 100%;\\n  border: 1px solid #FFF;\\n  background-color: rgba(255, 255, 255, 0.3); }\\n  .osd-viewer__region-item--selected {\\n    border-width: 3px; }\\n  .osd-viewer__region-item--editing {\\n    opacity: .1; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/viewers/OpenSeadragonViewer.scss\n// module id = 615\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./StaticImageView.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./StaticImageView.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./StaticImageView.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/viewers/StaticImageView.scss\n// module id = 616\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".static-image-viewer--scaled {\\n  border: 1px solid #000; }\\n\\n.static-image-viewer__regions {\\n  position: relative; }\\n\\n.static-image-viewer__image {\\n  pointer-events: none; }\\n  .static-image-viewer__image::selection {\\n    color: transparent;\\n    background-color: transparent; }\\n\\n.static-image-viewer__region-item {\\n  position: absolute;\\n  border: 1px solid #FFF;\\n  background-color: rgba(255, 255, 255, 0.3); }\\n  .static-image-viewer__region-item--selected {\\n    border-width: 3px; }\\n  .static-image-viewer__region-item--editing {\\n    opacity: .1; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/viewers/StaticImageView.scss\n// module id = 617\n// module chunks = 0","import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenSeadragon from 'openseadragon';\n\nconst styles = {\n  container: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    pointerEvents: 'none',\n    overflow: 'hidden',\n  },\n\n  canvas: (transform, height, width) => ({\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    transformOrigin: 'left top',\n    pointerEvents: 'none',\n    transform,\n    height,\n    width,\n  }),\n};\n\nexport default function withCanvas(WrappedComponent) {\n\n  return class extends Component {\n\n    state = {\n      transform: null,\n      scale: 3,\n    };\n\n    componentDidMount() {\n      if (this.viewer) {\n        this.bindEvents(this.viewer);\n      }\n    }\n\n    bindEvents(viewer) {\n      viewer.addHandler('update-viewport', () => this.resize(viewer));\n      viewer.addHandler('open', () => this.resize(viewer));\n      this.resize(viewer);\n    }\n\n    resize(viewer) {\n      const firstImage = viewer.world.getItemAt(0);\n      if (!firstImage) {\n        return;\n      }\n      const imgWidth = firstImage.source.dimensions.x;\n      const imgHeight = firstImage.source.dimensions.y;\n      const imgAspectRatio = imgWidth / imgHeight;\n      const boundsRect = viewer.viewport.getBounds(true);\n      const viewportOrigin = new OpenSeadragon.Point(boundsRect.x, boundsRect.y * imgAspectRatio);\n\n      const viewportWidth = boundsRect.width;\n      const viewportHeight = boundsRect.height * imgAspectRatio;\n\n      // Redraw\n      const viewportZoom = viewer.viewport.getZoom(true);\n      const zoom = firstImage.viewportToImageZoom(viewportZoom);\n      const rotation = viewer.viewport.getRotation();\n\n      const x = ((viewportOrigin.x / imgWidth - viewportOrigin.x ) / viewportWidth) * viewer.container.clientWidth;\n      const y = ((viewportOrigin.y / imgHeight - viewportOrigin.y ) / viewportHeight) * viewer.container.clientHeight;\n\n      if (this.viewer) {\n\n        // Set position for parents.\n        if (this.props.getPosition) {\n          this.props.getPosition({\n            x, y, zoom, scale: this.state.scale, rotation\n          });\n        }\n\n        // Set state for transform.\n        this.setState(() => ({\n          canvasScale: this.state.scale * zoom,\n          transform: `translate(${x}px,${y}px) scale(${zoom * this.state.scale}) rotate(${rotation})`,\n        }));\n      }\n    }\n\n    setViewer(viewer, onImageLoaded) {\n      if (this.viewer) {\n        return;\n      }\n      this.viewer = viewer;\n      if (onImageLoaded) {\n        onImageLoaded(viewer);\n      }\n      this.bindEvents(viewer);\n    }\n\n    transformOut({ x, y, height, width, ...props }) {\n      const {scale} = this.state;\n      return {\n        width: width * scale,\n        height: height * scale,\n        x: x * scale,\n        y: y * scale,\n        ...props,\n      };\n    }\n\n    transformIn({ x, y, defaultX, defaultY, height, width, onChange, onUpdate, onCommit, onClick, ...props }) {\n      const {scale, canvasScale} = this.state;\n      return {\n        width: width / scale,\n        height: height / scale,\n        x: x / scale,\n        y: y / scale,\n        defaultX: defaultX / scale,\n        defaultY: defaultY / scale,\n        onChange: onChange ? (e) => onChange(this.transformOut(e)) : null,\n        onUpdate: onUpdate ? (e) => onUpdate(this.transformOut(e)) : null,\n        onCommit: onCommit ? (e) => onCommit(this.transformOut(e)) : null,\n        onClick: onClick ? (e) => onClick(this.transformOut(e)) : null,\n        canvasScale,\n        ...props,\n      };\n    }\n\n    render() {\n      const {scale, transform, canvasScale} = this.state;\n      const {children, onImageLoaded, ...props} = this.props;\n\n      return (\n        <div style={{position: 'relative'}}>\n          <WrappedComponent canvasScale={canvasScale} onImageLoaded={viewer => this.setViewer(viewer, onImageLoaded)} {...props}/>\n          <div style={Object.assign({}, styles.container, {\n            width: this.props.width / scale,\n            height: this.props.height / scale,\n          })} ref={el => this.container = el}>\n            <div id=\"withCanvas\" style={styles.canvas(\n              transform,\n              this.props.height / scale,\n              this.props.width / scale,\n            )}>\n              {React.Children.map(children, child => (\n                child ?\n                  (child.props && (\n                    (child.props.x && child.props.y) ||\n                    (child.props.defaultX && child.props.defaultY)\n                  ) ?\n                    React.cloneElement(child, this.transformIn({\n                      width: child.props.width,\n                      height: child.props.height,\n                      x: child.props.x,\n                      defaultX: child.props.defaultX,\n                      defaultY: child.props.defaultY,\n                      onChange: child.props.onChange,\n                      onUpdate: child.props.onUpdate,\n                      onCommit: child.props.onCommit,\n                      onClick: child.props.onClick,\n                      y: child.props.y,\n                    })) : child ) : null\n              ))}\n            </div>\n          </div>\n        </div>\n      );\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/openseadragon/withCanvas.js","import React, { PureComponent, PropTypes } from 'react';\nimport Rnd from 'react-rnd';\nimport selectorPropTypes from './_selectorPropTypes';\nimport BEM from 'digirati-bem-js';\nimport './BoxSelector.scss';\n\nconst style = BEM.block('box-selector');\n\nclass BoxSelector extends PureComponent {\n\n  // static propTypes = {\n  //   ...selectorPropTypes,\n  //   onUpdate: PropTypes.func.isRequired,\n  // };\n\n  updateHeightWidth() {\n    this.props.onUpdate({\n      height: this.rnd.resizable.state.height,\n      width: this.rnd.resizable.state.width,\n      y: this.rnd.state.y,\n      x: this.rnd.state.x,\n    })\n  }\n\n  save() {\n    this.props.onSave({\n      height: this.rnd.resizable.state.height,\n      width: this.rnd.resizable.state.width,\n      y: this.rnd.state.y,\n      x: this.rnd.state.x,\n    });\n  }\n\n  getInitialPosition() {\n    const { x, y, height, width } = this.props;\n\n    return {\n      x: x ? x : 100,\n      y: y ? y : 100,\n      width: width ? width : 100,\n      height: height ? height : 100,\n    };\n  }\n\n  render() {\n    return (\n        <Rnd ref={c => this.rnd = c }\n             initial={this.getInitialPosition()}\n             onResizeStop={() => this.updateHeightWidth()}\n             onDragStop={() => this.updateHeightWidth()}\n             className={style}\n             bounds={'parent'}>\n        <span style={{ color: '#000' }}>\n          <button className={style.element('button')} onClick={(e) => this.save()}>Save</button>\n        </span>\n        </Rnd>\n    );\n  }\n}\n\nexport default BoxSelector;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/selectors/BoxSelector.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./BoxSelector.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./BoxSelector.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./BoxSelector.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/selectors/BoxSelector.scss\n// module id = 624\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".box-selector {\\n  outline: 2px dashed blueviolet;\\n  padding: 0.5rem 1rem;\\n  cursor: move;\\n  background: rgba(255, 255, 255, 0.3);\\n  pointer-events: auto; }\\n  .box-selector__button {\\n    top: 100%;\\n    margin-top: 10px;\\n    right: 0;\\n    position: absolute; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/selectors/BoxSelector.scss\n// module id = 625\n// module chunks = 0","import BEM from 'digirati-bem-js';\nimport React, {Component} from 'react';\nimport './PinSelector.scss';\nimport withDraggable from '../viewers/openseadragon/withDraggable';\nimport withFixedScale from '../viewers/openseadragon/withFixedScale';\n\nconst $pin = BEM.block('pin-selector');\n\nclass PinSelector extends Component {\n\n  render() {\n    const { x, y, style } = this.props;\n    return (\n      x && y ?\n        <div className={$pin.element('icon')}\n             style={{top: y - 17, left: x - 17, pointerEvents: 'auto', ...style}}>\n        </div> : <div />\n    );\n  }\n}\n\nexport default withDraggable(\n  withFixedScale(\n    PinSelector\n  )\n);\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/selectors/PinSelector.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./PinSelector.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./PinSelector.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./PinSelector.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/selectors/PinSelector.scss\n// module id = 627\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".pin-selector {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 10;\\n  cursor: crosshair; }\\n  .pin-selector__icon {\\n    position: absolute;\\n    width: 3px;\\n    height: 3px;\\n    border-radius: 17px;\\n    background: #FFF;\\n    background-clip: content-box;\\n    border: 16px solid rgba(66, 133, 244, 0.3); }\\n  .pin-selector__image {\\n    position: absolute;\\n    top: -15px;\\n    left: -6px; }\\n  .pin-selector__edit {\\n    position: absolute;\\n    top: -50px;\\n    pointer-events: initial; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/selectors/PinSelector.scss\n// module id = 628\n// module chunks = 0","import React, { Component } from 'react';\nimport Draggable from '../../../patches/react-draggable';\n\nexport default function withDraggable(WrappedComponent) {\n\n  return class extends Component {\n\n    state = {\n      x: 0,\n      y: 0,\n    };\n\n    onDrag = (e, { deltaX, deltaY }) => this.setState(() => ({\n      x: this.state.x + deltaX,\n      y: this.state.y + deltaY\n    }));\n\n    onStop = () => {\n      this.props.onUpdate({\n        x: this.props.x + this.state.x,\n        y: this.props.y + this.state.y\n      });\n      this.setState({\n        x: 0,\n        y: 0\n      });\n    };\n\n    render() {\n      const { canvasScale, drag = false } = this.props;\n\n      if (drag === false) {\n        return <WrappedComponent {...this.props}/>;\n      }\n      return (\n        <Draggable\n          scale={canvasScale}\n          position={{ x: 0, y: 0 }}\n          grid={[1, 1]}\n          onDrag={ this.onDrag }\n          onStop={ this.onStop }\n        >\n          <div style={{ pointerEvents: 'auto', zIndex: 999999 }}>\n            <WrappedComponent {...this.props} onUpdate={null}/>\n          </div>\n        </Draggable>\n      );\n    }\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/openseadragon/withDraggable.js","import uuid from 'uuid/v4';\nimport { addAnnotation } from './annotations';\nimport { cancelSelector, chooseSelector, commitToCurrentDraft, editCurrentDraftSelector } from './selectors';\nimport { applyDefaultsToDraft, getCurrentResourceTemplate } from '../query/resourceQuery';\nimport { getCurrentDraft } from '../query/draftQuery';\nimport { selectorCompat } from '../utility';\nimport { withViewer } from './viewer';\nimport { isSelecting, getCurrentSelector } from '../query/selectorQuery';\n\nexport const DRAFT_CREATE = 'DRAFT_CREATE';\nexport const DRAFT_UPDATE_SELECTOR = 'DRAFT_UPDATE_SELECTOR';\nexport const DRAFT_REMOVE_SELECTOR = 'DRAFT_REMOVE_SELECTOR';\nexport const DRAFT_UPDATE_FIELD_SELECTOR = 'DRAFT_UPDATE_FIELD_SELECTOR';\nexport const DRAFT_REMOVE_FIELD_SELECTOR = 'DRAFT_REMOVE_FIELD_SELECTOR';\nexport const DRAFT_UPDATE_INPUT = 'DRAFT_UPDATE_INPUT';\nexport const DRAFT_SELECT = 'DRAFT_SELECT';\nexport const DRAFT_DESELECT = 'DRAFT_DESELECT';\nexport const DRAFT_PUBLISHING = 'DRAFT_PUBLISHING';\nexport const DRAFT_PUBLISHED = 'DRAFT_PUBLISHED';\nexport const DRAFT_PREVIEW = 'DRAFT_PREVIEW';\nexport const DRAFT_UNPREVIEW = 'DRAFT_UNPREVIEW';\nexport const DRAFT_CONFIRM = 'DRAFT_CONFIRM';\nexport const DRAFT_DISCARD = 'DRAFT_DISCARD';\n\nexport function createDraft(scope, emptyInput, template, motivation = 'tagging', selectors = null, draftDefaults = null) {\n  return (dispatch, getState) => {\n    const id = uuid();\n    const input = draftDefaults ? applyDefaultsToDraft(getState(), template, emptyInput, draftDefaults) : emptyInput;\n    dispatch({\n      type: DRAFT_CREATE,\n      payload: { id, input, template, selectors: selectors ? selectors : input, motivation },\n    });\n    dispatch(selectDraft(scope, id));\n    const currentTemplate = getCurrentResourceTemplate(getState(), scope);\n    if (currentTemplate) {\n      if (currentTemplate.metaData && currentTemplate.metaData.selector) {\n        dispatch(chooseSelector(currentTemplate.metaData.selector, { template: currentTemplate.id, scope, draft: id }));\n      } else {\n        dispatch(chooseSelector('WholeCanvasSelector', { template: currentTemplate.id, scope, draft: id }));\n      }\n    }\n  }\n}\n\nexport function confirmDraft(scope) {\n  return { type: DRAFT_CONFIRM, payload: { scope } };\n}\n\nexport function deselectDraft(scope) {\n  return { type: DRAFT_DESELECT, payload: { scope } };\n}\n\nexport function discardDraft(scope, id) {\n  return { type: DRAFT_DISCARD, payload: { id, scope } };\n}\n\nexport function discardCurrentDraft(scope) {\n  return (dispatch, getState) => {\n    const currentDraft = getCurrentDraft(getState(), scope);\n    if (currentDraft) {\n      dispatch(discardDraft(scope, currentDraft.id));\n      const selector = getCurrentSelector(getState());\n      // @todo make sure this actually works or change selectors too.\n      if (selector.source && selector.source.template === currentDraft.template) {\n        dispatch(cancelSelector());\n      }\n    }\n  }\n}\n\nexport function removeSelectorFromDraft(id) {\n  return { type: DRAFT_REMOVE_SELECTOR, payload: { id } }\n}\n\nexport function removeSelectorFromCurrentDraft(scope) {\n  return (dispatch, getState) => {\n    const { id } = getCurrentDraft(getState(), scope);\n    if (id) {\n      dispatch(removeSelectorFromDraft(id));\n    }\n  }\n}\n\nexport function updateDraft(id, fields) {\n  return { type: DRAFT_UPDATE_INPUT, payload: { id, fields } };\n}\n\nexport function addSelectorToDraftField(id, selector, fieldId) {\n  return { type: DRAFT_UPDATE_FIELD_SELECTOR, payload: { id, selectors: { [fieldId]: selectorCompat(selector) } } };\n}\n\nexport function editCurrentDraftFieldSelector(scope, fieldId, data) {\n  return (dispatch, getState) => {\n    const currentDraft = getCurrentDraft(getState(), scope);\n    if (!currentDraft) {\n      return;\n    }\n    if (!currentDraft.selectors || !currentDraft.selectors[fieldId]) {\n      return;\n    }\n    const selector = {\n      ...currentDraft.selectors[fieldId],\n      ...data\n    };\n    dispatch(addSelectorToDraftField(currentDraft.id, selector, fieldId));\n  };\n}\n\nexport function addSelectorToDraftFieldFromViewer(id, props, fieldId, done) {\n  return withViewer((Canvas, dispatch) => {\n    const topLeft = Canvas.createRelativePoint(props.x, props.y);\n    const bottomRight = Canvas.createRelativePoint(props.x + props.width, props.y + props.height);\n\n    const selector = selectorCompat({\n      type: props.type,\n      x: topLeft.x,\n      y: topLeft.y,\n      width: bottomRight.x - topLeft.x,\n      height: bottomRight.y - topLeft.y,\n    });\n    dispatch(addSelectorToDraftField(id, selector, fieldId));\n    if (done) {\n      done();\n    }\n  })\n}\n\nexport function removeSelectorFromDraftField(id, fieldId) {\n  return { type: DRAFT_REMOVE_FIELD_SELECTOR, payload: { id, fieldId } };\n}\n\nexport function convertSelectorFromCanvas(Canvas, props) {\n  if (!props.x && !props.y) {\n    return { type: props.type || 'WholeCanvasSelector' };\n  }\n  const topLeft = Canvas.createRelativePoint(props.x, props.y);\n  if (props.type !== 'boxSelector' && props.type !== 'madoc:boxdraw') {\n    return selectorCompat({\n      type: props.type,\n      x: topLeft.x,\n      y: topLeft.y,\n    });\n  }\n\n  const bottomRight = Canvas.createRelativePoint(props.x + props.width, props.y + props.height);\n  return selectorCompat({\n    type: props.type,\n    x: topLeft.x,\n    y: topLeft.y,\n    width: bottomRight.x - topLeft.x,\n    height: bottomRight.y - topLeft.y,\n  });\n}\n\n\nexport function addSelectorToDraftFromViewer(id, props, done) {\n  return withViewer((Canvas, dispatch) => {\n    const selector = convertSelectorFromCanvas(Canvas, props);\n\n    dispatch(addSelectorToDraft(id, selector));\n    if (done) {\n      done();\n    }\n  });\n}\n\nexport function addSelectorToDraft(id, selector) {\n  return { type: DRAFT_UPDATE_SELECTOR, payload: { id, selector: selectorCompat(selector) } };\n}\n\nexport function selectDraft(scope, id) {\n  return { type: DRAFT_SELECT, payload: { id, scope } };\n}\n\nexport function previewDraft(id) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (isSelecting(state)) {\n      dispatch(commitToCurrentDraft(\n        state.selector.currentSelector.type.toLowerCase() === 'wholecanvasselector',\n      ));\n    }\n    dispatch({ type: DRAFT_PREVIEW, payload: { id } });\n  }\n}\n\nexport function unpreviewDraft(scope, id) {\n  return (dispatch, getState) => {\n    dispatch({ type: DRAFT_UNPREVIEW, payload: { id } });\n    const state = getState();\n    const currentDraft = getCurrentDraft(state, scope);\n    if (\n      currentDraft.id === id &&\n      currentDraft.selector &&\n      currentDraft.selector.type &&\n      currentDraft.selector.type.toLowerCase() !== 'wholecanvasselector'\n    ) {\n      dispatch(editCurrentDraftSelector(scope));\n    }\n  }\n}\n\nexport function asyncPublishDraft(id, promise) {\n  return (dispatch) => {\n    dispatch({ type: DRAFT_PUBLISHING, payload: { id } });\n    return promise.then((result) => {\n      dispatch(publishDraft(id));\n      return result;\n    });\n  }\n}\n\nexport function publishDraft(id) {\n  return (dispatch, getState) => {\n    dispatch(addAnnotation(getState().drafts.list[id]));\n    dispatch({ type: DRAFT_PUBLISHED, payload: { id } });\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/drafts.js","(function webpackUniversalModuleDefinition(root, factory) {\n  if(typeof exports === 'object' && typeof module === 'object')\n    module.exports = factory(require(\"react\"), require(\"react-dom\"));\n  else if(typeof define === 'function' && define.amd)\n    define([\"react\", \"react-dom\"], factory);\n  else if(typeof exports === 'object')\n    exports[\"ReactDraggable\"] = factory(require(\"react\"), require(\"react-dom\"));\n  else\n    root[\"ReactDraggable\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\n  return /******/ (function(modules) { // webpackBootstrap\n    /******/ \t// The module cache\n    /******/ \tvar installedModules = {};\n    /******/\n    /******/ \t// The require function\n    /******/ \tfunction __webpack_require__(moduleId) {\n      /******/\n      /******/ \t\t// Check if module is in cache\n      /******/ \t\tif(installedModules[moduleId])\n      /******/ \t\t\treturn installedModules[moduleId].exports;\n      /******/\n      /******/ \t\t// Create a new module (and put it into the cache)\n      /******/ \t\tvar module = installedModules[moduleId] = {\n        /******/ \t\t\texports: {},\n        /******/ \t\t\tid: moduleId,\n        /******/ \t\t\tloaded: false\n        /******/ \t\t};\n      /******/\n      /******/ \t\t// Execute the module function\n      /******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n      /******/\n      /******/ \t\t// Flag the module as loaded\n      /******/ \t\tmodule.loaded = true;\n      /******/\n      /******/ \t\t// Return the exports of the module\n      /******/ \t\treturn module.exports;\n      /******/ \t}\n    /******/\n    /******/\n    /******/ \t// expose the modules object (__webpack_modules__)\n    /******/ \t__webpack_require__.m = modules;\n    /******/\n    /******/ \t// expose the module cache\n    /******/ \t__webpack_require__.c = installedModules;\n    /******/\n    /******/ \t// __webpack_public_path__\n    /******/ \t__webpack_require__.p = \"\";\n    /******/\n    /******/ \t// Load entry module and return exports\n    /******/ \treturn __webpack_require__(0);\n    /******/ })\n  /************************************************************************/\n  /******/ ([\n    /* 0 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      'use strict';\n\n      module.exports = __webpack_require__(1).default;\n      module.exports.DraggableCore = __webpack_require__(9).default;\n\n      /***/ },\n    /* 1 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n      var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n      var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n      var _react = __webpack_require__(2);\n\n      var _react2 = _interopRequireDefault(_react);\n\n      var _reactDom = __webpack_require__(3);\n\n      var _reactDom2 = _interopRequireDefault(_reactDom);\n\n      var _classnames = __webpack_require__(4);\n\n      var _classnames2 = _interopRequireDefault(_classnames);\n\n      var _domFns = __webpack_require__(5);\n\n      var _positionFns = __webpack_require__(8);\n\n      var _shims = __webpack_require__(6);\n\n      var _DraggableCore = __webpack_require__(9);\n\n      var _DraggableCore2 = _interopRequireDefault(_DraggableCore);\n\n      var _log = __webpack_require__(11);\n\n      var _log2 = _interopRequireDefault(_log);\n\n      function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n      function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n      function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n      function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\n      function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n      // $FlowIgnore\n\n\n      /*:: import type {DraggableEventHandler} from './utils/types';*/\n      /*:: type DraggableState = {\n       dragging: boolean,\n       dragged: boolean,\n       x: number, y: number,\n       slackX: number, slackY: number,\n       isElementSVG: boolean\n       };*/\n\n\n      //\n      // Define <Draggable>\n      //\n\n      /*:: type ConstructorProps = {\n       position: { x: number, y: number },\n       defaultPosition: { x: number, y: number }\n       };*/\n\n      var Draggable = function (_React$Component) {\n        _inherits(Draggable, _React$Component);\n\n        function Draggable(props /*: ConstructorProps*/) {\n          _classCallCheck(this, Draggable);\n\n          var _this = _possibleConstructorReturn(this, (Draggable.__proto__ || Object.getPrototypeOf(Draggable)).call(this, props));\n\n          _this.onDragStart = function (e, coreData) {\n            (0, _log2.default)('Draggable: onDragStart: %j', coreData);\n\n            // Short-circuit if user's callback killed it.\n            var shouldStart = _this.props.onStart(e, (0, _positionFns.createDraggableData)(_this, coreData));\n            // Kills start event on core as well, so move handlers are never bound.\n            if (shouldStart === false) return false;\n\n            _this.setState({ dragging: true, dragged: true });\n          };\n\n          _this.onDrag = function (e, coreData) {\n            if (!_this.state.dragging) return false;\n            (0, _log2.default)('Draggable: onDrag: %j', coreData);\n\n            var uiData = (0, _positionFns.createDraggableData)(_this, coreData);\n\n            var newState /*: $Shape<DraggableState>*/ = {\n              x: uiData.x,\n              y: uiData.y\n            };\n\n            // Keep within bounds.\n            if (_this.props.bounds) {\n              // Save original x and y.\n              var _x = newState.x,\n                _y = newState.y;\n\n              // Add slack to the values used to calculate bound position. This will ensure that if\n              // we start removing slack, the element won't react to it right away until it's been\n              // completely removed.\n\n              newState.x += _this.state.slackX;\n              newState.y += _this.state.slackY;\n\n              // Get bound position. This will ceil/floor the x and y within the boundaries.\n              // $FlowBug\n\n              // Recalculate slack by noting how much was shaved by the boundPosition handler.\n              var _getBoundPosition = (0, _positionFns.getBoundPosition)(_this, newState.x, newState.y);\n\n              var _getBoundPosition2 = _slicedToArray(_getBoundPosition, 2);\n\n              newState.x = _getBoundPosition2[0];\n              newState.y = _getBoundPosition2[1];\n              newState.slackX = _this.state.slackX + (_x - newState.x);\n              newState.slackY = _this.state.slackY + (_y - newState.y);\n\n              // Update the event we fire to reflect what really happened after bounds took effect.\n              uiData.x = _x;\n              uiData.y = _y;\n              uiData.deltaX = newState.x - _this.state.x;\n              uiData.deltaY = newState.y - _this.state.y;\n            }\n\n            // Short-circuit if user's callback killed it.\n            var shouldUpdate = _this.props.onDrag(e, uiData);\n            if (shouldUpdate === false) return false;\n\n            _this.setState(newState);\n          };\n\n          _this.onDragStop = function (e, coreData) {\n            if (!_this.state.dragging) return false;\n\n            // Short-circuit if user's callback killed it.\n            var shouldStop = _this.props.onStop(e, (0, _positionFns.createDraggableData)(_this, coreData));\n            if (shouldStop === false) return false;\n\n            (0, _log2.default)('Draggable: onDragStop: %j', coreData);\n\n            var newState /*: $Shape<DraggableState>*/ = {\n              dragging: false,\n              slackX: 0,\n              slackY: 0\n            };\n\n            // If this is a controlled component, the result of this operation will be to\n            // revert back to the old position. We expect a handler on `onDragStop`, at the least.\n            var controlled = Boolean(_this.props.position);\n            if (controlled) {\n              var _this$props$position = _this.props.position,\n                _x2 = _this$props$position.x,\n                _y2 = _this$props$position.y;\n\n              newState.x = _x2;\n              newState.y = _y2;\n            }\n\n            _this.setState(newState);\n          };\n\n          _this.state = {\n            // Whether or not we are currently dragging.\n            dragging: false,\n\n            // Whether or not we have been dragged before.\n            dragged: false,\n\n            // Current transform x and y.\n            x: props.position ? props.position.x : props.defaultPosition.x,\n            y: props.position ? props.position.y : props.defaultPosition.y,\n\n            // Used for compensating for out-of-bounds drags\n            slackX: 0, slackY: 0,\n\n            // Can only determine if SVG after mounting\n            isElementSVG: false\n          };\n          return _this;\n        }\n\n        _createClass(Draggable, [{\n          key: 'componentWillMount',\n          value: function componentWillMount() {\n            if (this.props.position && !(this.props.onDrag || this.props.onStop)) {\n              // eslint-disable-next-line\n              console.warn('A `position` was applied to this <Draggable>, without drag handlers. This will make this ' + 'component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the ' + '`position` of this element.');\n            }\n          }\n        }, {\n          key: 'componentDidMount',\n          value: function componentDidMount() {\n            // Check to see if the element passed is an instanceof SVGElement\n            if (typeof SVGElement !== 'undefined' && _reactDom2.default.findDOMNode(this) instanceof SVGElement) {\n              this.setState({ isElementSVG: true });\n            }\n          }\n        }, {\n          key: 'componentWillReceiveProps',\n          value: function componentWillReceiveProps(nextProps /*: Object*/) {\n            // Set x/y if position has changed\n            if (nextProps.position && (!this.props.position || nextProps.position.x !== this.props.position.x || nextProps.position.y !== this.props.position.y)) {\n              this.setState({ x: nextProps.position.x, y: nextProps.position.y });\n            }\n          }\n        }, {\n          key: 'componentWillUnmount',\n          value: function componentWillUnmount() {\n            this.setState({ dragging: false }); // prevents invariant if unmounted while dragging\n          }\n        }, {\n          key: 'render',\n          value: function render() /*: React.Element<any>*/ {\n            var _classNames;\n\n            var style = {},\n              svgTransform = null;\n\n            // If this is controlled, we don't want to move it - unless it's dragging.\n            var controlled = Boolean(this.props.position);\n            var draggable = !controlled || this.state.dragging;\n\n            var position = this.props.position || this.props.defaultPosition;\n            var transformOpts = {\n              // Set left if horizontal drag is enabled\n              x: (0, _positionFns.canDragX)(this) && draggable ? this.state.x : position.x,\n\n              // Set top if vertical drag is enabled\n              y: (0, _positionFns.canDragY)(this) && draggable ? this.state.y : position.y\n            };\n\n            // If this element was SVG, we use the `transform` attribute.\n            if (this.state.isElementSVG) {\n              svgTransform = (0, _domFns.createSVGTransform)(transformOpts);\n            } else {\n              // Add a CSS transform to move the element around. This allows us to move the element around\n              // without worrying about whether or not it is relatively or absolutely positioned.\n              // If the item you are dragging already has a transform set, wrap it in a <span> so <Draggable>\n              // has a clean slate.\n              style = (0, _domFns.createCSSTransform)(transformOpts);\n            }\n\n            var _props = this.props,\n              defaultClassName = _props.defaultClassName,\n              defaultClassNameDragging = _props.defaultClassNameDragging,\n              defaultClassNameDragged = _props.defaultClassNameDragged;\n\n            // Mark with class while dragging\n\n            var className = (0, _classnames2.default)(this.props.children.props.className || '', defaultClassName, (_classNames = {}, _defineProperty(_classNames, defaultClassNameDragging, this.state.dragging), _defineProperty(_classNames, defaultClassNameDragged, this.state.dragged), _classNames));\n\n            // Reuse the child provided\n            // This makes it flexible to use whatever element is wanted (div, ul, etc)\n            return _react2.default.createElement(\n              _DraggableCore2.default,\n              _extends({}, this.props, { onStart: this.onDragStart, onDrag: this.onDrag, onStop: this.onDragStop }),\n              _react2.default.cloneElement(_react2.default.Children.only(this.props.children), {\n                className: className,\n                style: _extends({}, this.props.children.props.style, style),\n                transform: svgTransform\n              })\n            );\n          }\n        }]);\n\n        return Draggable;\n      }(_react2.default.Component);\n\n      Draggable.displayName = 'Draggable';\n      Draggable.propTypes = _extends({}, _DraggableCore2.default.propTypes, {\n\n        /**\n         * `axis` determines which axis the draggable can move.\n         *\n         *  Note that all callbacks will still return data as normal. This only\n         *  controls flushing to the DOM.\n         *\n         * 'both' allows movement horizontally and vertically.\n         * 'x' limits movement to horizontal axis.\n         * 'y' limits movement to vertical axis.\n         * 'none' limits all movement.\n         *\n         * Defaults to 'both'.\n         */\n        axis: _react.PropTypes.oneOf(['both', 'x', 'y', 'none']),\n\n        /**\n         * `bounds` determines the range of movement available to the element.\n         * Available values are:\n         *\n         * 'parent' restricts movement within the Draggable's parent node.\n         *\n         * Alternatively, pass an object with the following properties, all of which are optional:\n         *\n         * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}\n         *\n         * All values are in px.\n         *\n         * Example:\n         *\n         * ```jsx\n         *   let App = React.createClass({\n\t   *       render: function () {\n\t   *         return (\n\t   *            <Draggable bounds={{right: 300, bottom: 300}}>\n\t   *              <div>Content</div>\n\t   *           </Draggable>\n\t   *         );\n\t   *       }\n\t   *   });\n         * ```\n         */\n        bounds: _react.PropTypes.oneOfType([_react.PropTypes.shape({\n          left: _react.PropTypes.number,\n          right: _react.PropTypes.number,\n          top: _react.PropTypes.number,\n          bottom: _react.PropTypes.number\n        }), _react.PropTypes.string, _react.PropTypes.oneOf([false])]),\n\n        defaultClassName: _react.PropTypes.string,\n        defaultClassNameDragging: _react.PropTypes.string,\n        defaultClassNameDragged: _react.PropTypes.string,\n\n        /**\n         * `defaultPosition` specifies the x and y that the dragged item should start at\n         *\n         * Example:\n         *\n         * ```jsx\n         *      let App = React.createClass({\n\t   *          render: function () {\n\t   *              return (\n\t   *                  <Draggable defaultPosition={{x: 25, y: 25}}>\n\t   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n\t   *                  </Draggable>\n\t   *              );\n\t   *          }\n\t   *      });\n         * ```\n         */\n        defaultPosition: _react.PropTypes.shape({\n          x: _react.PropTypes.number,\n          y: _react.PropTypes.number\n        }),\n\n        /**\n         * `position`, if present, defines the current position of the element.\n         *\n         *  This is similar to how form elements in React work - if no `position` is supplied, the component\n         *  is uncontrolled.\n         *\n         * Example:\n         *\n         * ```jsx\n         *      let App = React.createClass({\n\t   *          render: function () {\n\t   *              return (\n\t   *                  <Draggable position={{x: 25, y: 25}}>\n\t   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n\t   *                  </Draggable>\n\t   *              );\n\t   *          }\n\t   *      });\n         * ```\n         */\n        position: _react.PropTypes.shape({\n          x: _react.PropTypes.number,\n          y: _react.PropTypes.number\n        }),\n\n        /**\n         * These properties should be defined on the child, not here.\n         */\n        className: _shims.dontSetMe,\n        style: _shims.dontSetMe,\n        transform: _shims.dontSetMe\n      });\n      Draggable.defaultProps = _extends({}, _DraggableCore2.default.defaultProps, {\n        axis: 'both',\n        bounds: false,\n        defaultClassName: 'react-draggable',\n        defaultClassNameDragging: 'react-draggable-dragging',\n        defaultClassNameDragged: 'react-draggable-dragged',\n        defaultPosition: { x: 0, y: 0 },\n        position: null,\n        scale: 1\n      });\n      exports.default = Draggable;\n\n      /***/ },\n    /* 2 */\n    /***/ function(module, exports) {\n\n      module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n      /***/ },\n    /* 3 */\n    /***/ function(module, exports) {\n\n      module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n      /***/ },\n    /* 4 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n       Copyright (c) 2016 Jed Watson.\n       Licensed under the MIT License (MIT), see\n       http://jedwatson.github.io/classnames\n       */\n      /* global define */\n\n      (function () {\n        'use strict';\n\n        var hasOwn = {}.hasOwnProperty;\n\n        function classNames () {\n          var classes = [];\n\n          for (var i = 0; i < arguments.length; i++) {\n            var arg = arguments[i];\n            if (!arg) continue;\n\n            var argType = typeof arg;\n\n            if (argType === 'string' || argType === 'number') {\n              classes.push(arg);\n            } else if (Array.isArray(arg)) {\n              classes.push(classNames.apply(null, arg));\n            } else if (argType === 'object') {\n              for (var key in arg) {\n                if (hasOwn.call(arg, key) && arg[key]) {\n                  classes.push(key);\n                }\n              }\n            }\n          }\n\n          return classes.join(' ');\n        }\n\n        if (typeof module !== 'undefined' && module.exports) {\n          module.exports = classNames;\n        } else if (true) {\n          // register as 'classnames', consistent with npm package name\n          !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n            return classNames;\n          }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n        } else {\n          window.classNames = classNames;\n        }\n      }());\n\n\n      /***/ },\n    /* 5 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n      exports.matchesSelector = matchesSelector;\n      exports.matchesSelectorAndParentsTo = matchesSelectorAndParentsTo;\n      exports.addEvent = addEvent;\n      exports.removeEvent = removeEvent;\n      exports.outerHeight = outerHeight;\n      exports.outerWidth = outerWidth;\n      exports.innerHeight = innerHeight;\n      exports.innerWidth = innerWidth;\n      exports.offsetXYFromParent = offsetXYFromParent;\n      exports.createCSSTransform = createCSSTransform;\n      exports.createSVGTransform = createSVGTransform;\n      exports.getTouch = getTouch;\n      exports.getTouchIdentifier = getTouchIdentifier;\n      exports.addUserSelectStyles = addUserSelectStyles;\n      exports.removeUserSelectStyles = removeUserSelectStyles;\n      exports.styleHacks = styleHacks;\n\n      var _shims = __webpack_require__(6);\n\n      var _getPrefix = __webpack_require__(7);\n\n      var _getPrefix2 = _interopRequireDefault(_getPrefix);\n\n      function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n      function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n      /*:: import type {ControlPosition} from './types';*/\n\n\n      var matchesSelectorFunc = '';\n      function matchesSelector(el /*: Node*/, selector /*: string*/) /*: boolean*/ {\n        if (!matchesSelectorFunc) {\n          matchesSelectorFunc = (0, _shims.findInArray)(['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'], function (method) {\n            // $FlowIgnore: Doesn't think elements are indexable\n            return (0, _shims.isFunction)(el[method]);\n          });\n        }\n\n        // $FlowIgnore: Doesn't think elements are indexable\n        return el[matchesSelectorFunc].call(el, selector);\n      }\n\n      // Works up the tree to the draggable itself attempting to match selector.\n      function matchesSelectorAndParentsTo(el /*: Node*/, selector /*: string*/, baseNode /*: Node*/) /*: boolean*/ {\n        var node = el;\n        do {\n          if (matchesSelector(node, selector)) return true;\n          if (node === baseNode) return false;\n          node = node.parentNode;\n        } while (node);\n\n        return false;\n      }\n\n      function addEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/) /*: void*/ {\n        if (!el) {\n          return;\n        }\n        if (el.attachEvent) {\n          el.attachEvent('on' + event, handler);\n        } else if (el.addEventListener) {\n          el.addEventListener(event, handler, true);\n        } else {\n          // $FlowIgnore: Doesn't think elements are indexable\n          el['on' + event] = handler;\n        }\n      }\n\n      function removeEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/) /*: void*/ {\n        if (!el) {\n          return;\n        }\n        if (el.detachEvent) {\n          el.detachEvent('on' + event, handler);\n        } else if (el.removeEventListener) {\n          el.removeEventListener(event, handler, true);\n        } else {\n          // $FlowIgnore: Doesn't think elements are indexable\n          el['on' + event] = null;\n        }\n      }\n\n      function outerHeight(node /*: HTMLElement*/) /*: number*/ {\n        // This is deliberately excluding margin for our calculations, since we are using\n        // offsetTop which is including margin. See getBoundPosition\n        var height = node.clientHeight;\n        var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n        height += (0, _shims.int)(computedStyle.borderTopWidth);\n        height += (0, _shims.int)(computedStyle.borderBottomWidth);\n        return height;\n      }\n\n      function outerWidth(node /*: HTMLElement*/) /*: number*/ {\n        // This is deliberately excluding margin for our calculations, since we are using\n        // offsetLeft which is including margin. See getBoundPosition\n        var width = node.clientWidth;\n        var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n        width += (0, _shims.int)(computedStyle.borderLeftWidth);\n        width += (0, _shims.int)(computedStyle.borderRightWidth);\n        return width;\n      }\n      function innerHeight(node /*: HTMLElement*/) /*: number*/ {\n        var height = node.clientHeight;\n        var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n        height -= (0, _shims.int)(computedStyle.paddingTop);\n        height -= (0, _shims.int)(computedStyle.paddingBottom);\n        return height;\n      }\n\n      function innerWidth(node /*: HTMLElement*/) /*: number*/ {\n        var width = node.clientWidth;\n        var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n        width -= (0, _shims.int)(computedStyle.paddingLeft);\n        width -= (0, _shims.int)(computedStyle.paddingRight);\n        return width;\n      }\n\n      // Get from offsetParent\n      function offsetXYFromParent(evt /*: {clientX: number, clientY: number}*/, offsetParent /*: HTMLElement*/) /*: ControlPosition*/ {\n        var isBody = offsetParent === offsetParent.ownerDocument.body;\n        var offsetParentRect = isBody ? { left: 0, top: 0 } : offsetParent.getBoundingClientRect();\n\n        var x = evt.clientX + offsetParent.scrollLeft - offsetParentRect.left;\n        var y = evt.clientY + offsetParent.scrollTop - offsetParentRect.top;\n\n        return { x: x, y: y };\n      }\n\n      function createCSSTransform(_ref) /*: Object*/ {\n        var x = _ref.x,\n          y = _ref.y;\n\n        // Replace unitless items with px\n        return _defineProperty({}, (0, _getPrefix.browserPrefixToKey)('transform', _getPrefix2.default), 'translate(' + x + 'px,' + y + 'px)');\n      }\n\n      function createSVGTransform(_ref3) /*: string*/ {\n        var x = _ref3.x,\n          y = _ref3.y;\n\n        return 'translate(' + x + ',' + y + ')';\n      }\n\n      function getTouch(e /*: MouseTouchEvent*/, identifier /*: number*/) /*: ?{clientX: number, clientY: number}*/ {\n        return e.targetTouches && (0, _shims.findInArray)(e.targetTouches, function (t) {\n            return identifier === t.identifier;\n          }) || e.changedTouches && (0, _shims.findInArray)(e.changedTouches, function (t) {\n            return identifier === t.identifier;\n          });\n      }\n\n      function getTouchIdentifier(e /*: MouseTouchEvent*/) /*: ?number*/ {\n        if (e.targetTouches && e.targetTouches[0]) return e.targetTouches[0].identifier;\n        if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].identifier;\n      }\n\n      // User-select Hacks:\n      //\n      // Useful for preventing blue highlights all over everything when dragging.\n      var userSelectPrefix = (0, _getPrefix.getPrefix)('user-select');\n      var userSelect = (0, _getPrefix.browserPrefixToStyle)('user-select', userSelectPrefix);\n      var userSelectStyle = ';' + userSelect + ': none;';\n      var userSelectReplaceRegExp = new RegExp(';?' + userSelect + ': none;'); // leading ; not present on IE\n\n      // Note we're passing `document` b/c we could be iframed\n      function addUserSelectStyles(body /*: HTMLElement*/) {\n        var style = body.getAttribute('style') || '';\n        body.setAttribute('style', style + userSelectStyle);\n      }\n\n      function removeUserSelectStyles(body /*: HTMLElement*/) {\n        var style = body.getAttribute('style') || '';\n        body.setAttribute('style', style.replace(userSelectReplaceRegExp, ''));\n      }\n\n      function styleHacks() /*: Object*/ {\n        var childStyle /*: Object*/ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        // Workaround IE pointer events; see #51\n        // https://github.com/mzabriskie/react-draggable/issues/51#issuecomment-103488278\n        return _extends({\n          touchAction: 'none'\n        }, childStyle);\n      }\n\n      /***/ },\n    /* 6 */\n    /***/ function(module, exports) {\n\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.findInArray = findInArray;\n      exports.isFunction = isFunction;\n      exports.isNum = isNum;\n      exports.int = int;\n      exports.dontSetMe = dontSetMe;\n\n      // @credits https://gist.github.com/rogozhnikoff/a43cfed27c41e4e68cdc\n      function findInArray(array /*: Array<any> | TouchList*/, callback /*: Function*/) /*: any*/ {\n        for (var i = 0, length = array.length; i < length; i++) {\n          if (callback.apply(callback, [array[i], i, array])) return array[i];\n        }\n      }\n\n      function isFunction(func /*: any*/) /*: boolean*/ {\n        return typeof func === 'function' || Object.prototype.toString.call(func) === '[object Function]';\n      }\n\n      function isNum(num /*: any*/) /*: boolean*/ {\n        return typeof num === 'number' && !isNaN(num);\n      }\n\n      function int(a /*: string*/) /*: number*/ {\n        return parseInt(a, 10);\n      }\n\n      function dontSetMe(props /*: Object*/, propName /*: string*/, componentName /*: string*/) {\n        if (props[propName]) {\n          return new Error('Invalid prop ' + propName + ' passed to ' + componentName + ' - do not set this, set it on the child.');\n        }\n      }\n\n      /***/ },\n    /* 7 */\n    /***/ function(module, exports) {\n\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.getPrefix = getPrefix;\n      exports.browserPrefixToKey = browserPrefixToKey;\n      exports.browserPrefixToStyle = browserPrefixToStyle;\n      var prefixes = ['Moz', 'Webkit', 'O', 'ms'];\n      function getPrefix() /*: string*/ {\n        var prop /*: string*/ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n\n        // Checking specifically for 'window.document' is for pseudo-browser server-side\n        // environments that define 'window' as the global context.\n        // E.g. React-rails (see https://github.com/reactjs/react-rails/pull/84)\n        if (typeof window === 'undefined' || typeof window.document === 'undefined') return '';\n\n        var style = window.document.documentElement.style;\n\n        if (prop in style) return '';\n\n        for (var i = 0; i < prefixes.length; i++) {\n          if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];\n        }\n\n        return '';\n      }\n\n      function browserPrefixToKey(prop /*: string*/, prefix /*: string*/) /*: string*/ {\n        return prefix ? '' + prefix + kebabToTitleCase(prop) : prop;\n      }\n\n      function browserPrefixToStyle(prop /*: string*/, prefix /*: string*/) /*: string*/ {\n        return prefix ? '-' + prefix.toLowerCase() + '-' + prop : prop;\n      }\n\n      function kebabToTitleCase(str /*: string*/) /*: string*/ {\n        var out = '';\n        var shouldCapitalize = true;\n        for (var i = 0; i < str.length; i++) {\n          if (shouldCapitalize) {\n            out += str[i].toUpperCase();\n            shouldCapitalize = false;\n          } else if (str[i] === '-') {\n            shouldCapitalize = true;\n          } else {\n            out += str[i];\n          }\n        }\n        return out;\n      }\n\n      // Default export is the prefix itself, like 'Moz', 'Webkit', etc\n      // Note that you may have to re-test for certain things; for instance, Chrome 50\n      // can handle unprefixed `transform`, but not unprefixed `user-select`\n      exports.default = getPrefix();\n\n      /***/ },\n    /* 8 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.getBoundPosition = getBoundPosition;\n      exports.snapToGrid = snapToGrid;\n      exports.canDragX = canDragX;\n      exports.canDragY = canDragY;\n      exports.getControlPosition = getControlPosition;\n      exports.createCoreData = createCoreData;\n      exports.createDraggableData = createDraggableData;\n\n      var _shims = __webpack_require__(6);\n\n      var _reactDom = __webpack_require__(3);\n\n      var _reactDom2 = _interopRequireDefault(_reactDom);\n\n      var _domFns = __webpack_require__(5);\n\n      function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n      /*:: import type Draggable from '../Draggable';*/\n      /*:: import type {Bounds, ControlPosition, DraggableData} from './types';*/\n      /*:: import type DraggableCore from '../DraggableCore';*/\n      function getBoundPosition(draggable /*: Draggable*/, x /*: number*/, y /*: number*/) /*: [number, number]*/ {\n        // If no bounds, short-circuit and move on\n        if (!draggable.props.bounds) return [x, y];\n\n        // Clone new bounds\n        var bounds = draggable.props.bounds;\n\n        bounds = typeof bounds === 'string' ? bounds : cloneBounds(bounds);\n        var node = _reactDom2.default.findDOMNode(draggable);\n\n        if (typeof bounds === 'string') {\n          var ownerDocument = node.ownerDocument;\n\n          var ownerWindow = ownerDocument.defaultView;\n          var boundNode = void 0;\n          if (bounds === 'parent') {\n            boundNode = node.parentNode;\n          } else {\n            boundNode = ownerDocument.querySelector(bounds);\n            if (!boundNode) throw new Error('Bounds selector \"' + bounds + '\" could not find an element.');\n          }\n          var nodeStyle = ownerWindow.getComputedStyle(node);\n          var boundNodeStyle = ownerWindow.getComputedStyle(boundNode);\n          // Compute bounds. This is a pain with padding and offsets but this gets it exactly right.\n          bounds = {\n            left: -node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingLeft) + (0, _shims.int)(nodeStyle.borderLeftWidth) + (0, _shims.int)(nodeStyle.marginLeft),\n            top: -node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingTop) + (0, _shims.int)(nodeStyle.borderTopWidth) + (0, _shims.int)(nodeStyle.marginTop),\n            right: (0, _domFns.innerWidth)(boundNode) - (0, _domFns.outerWidth)(node) - node.offsetLeft,\n            bottom: (0, _domFns.innerHeight)(boundNode) - (0, _domFns.outerHeight)(node) - node.offsetTop\n          };\n        }\n\n        // Keep x and y below right and bottom limits...\n        if ((0, _shims.isNum)(bounds.right)) x = Math.min(x, bounds.right);\n        if ((0, _shims.isNum)(bounds.bottom)) y = Math.min(y, bounds.bottom);\n\n        // But above left and top limits.\n        if ((0, _shims.isNum)(bounds.left)) x = Math.max(x, bounds.left);\n        if ((0, _shims.isNum)(bounds.top)) y = Math.max(y, bounds.top);\n\n        return [x, y];\n      }\n\n      function snapToGrid(grid /*: [number, number]*/, pendingX /*: number*/, pendingY /*: number*/) /*: [number, number]*/ {\n        var x = Math.round(pendingX / grid[0]) * grid[0];\n        var y = Math.round(pendingY / grid[1]) * grid[1];\n        return [x, y];\n      }\n\n      function canDragX(draggable /*: Draggable*/) /*: boolean*/ {\n        return draggable.props.axis === 'both' || draggable.props.axis === 'x';\n      }\n\n      function canDragY(draggable /*: Draggable*/) /*: boolean*/ {\n        return draggable.props.axis === 'both' || draggable.props.axis === 'y';\n      }\n\n      // Get {x, y} positions from event.\n      function getControlPosition(e /*: MouseTouchEvent*/, touchIdentifier /*: ?number*/, draggableCore /*: DraggableCore*/) /*: ?ControlPosition*/ {\n        var touchObj = typeof touchIdentifier === 'number' ? (0, _domFns.getTouch)(e, touchIdentifier) : null;\n        if (typeof touchIdentifier === 'number' && !touchObj) return null; // not the right touch\n        var node = _reactDom2.default.findDOMNode(draggableCore);\n        // User can provide an offsetParent if desired.\n        var offsetParent = draggableCore.props.offsetParent || node.offsetParent || node.ownerDocument.body;\n        return (0, _domFns.offsetXYFromParent)(touchObj || e, offsetParent);\n      }\n\n      // Create an data object exposed by <DraggableCore>'s events\n      function createCoreData(draggable /*: DraggableCore*/, x /*: number*/, y /*: number*/) /*: DraggableData*/ {\n        var state = draggable.state;\n        var isStart = !(0, _shims.isNum)(state.lastX);\n\n        if (isStart) {\n          // If this is our first move, use the x and y as last coords.\n          return {\n            node: _reactDom2.default.findDOMNode(draggable),\n            deltaX: 0, deltaY: 0,\n            lastX: x, lastY: y,\n            x: x, y: y\n          };\n        } else {\n          // Otherwise calculate proper values.\n          return {\n            node: _reactDom2.default.findDOMNode(draggable),\n            deltaX: x - state.lastX, deltaY: y - state.lastY,\n            lastX: state.lastX, lastY: state.lastY,\n            x: x, y: y\n          };\n        }\n      }\n\n      // Create an data exposed by <Draggable>'s events\n      function createDraggableData(draggable /*: Draggable*/, coreData /*: DraggableData*/) /*: DraggableData*/ {\n        var scale = draggable.props.scale;\n        return {\n          node: coreData.node,\n          x: draggable.state.x + coreData.deltaX / scale,\n          y: draggable.state.y + coreData.deltaY / scale,\n          deltaX: coreData.deltaX / scale,\n          deltaY: coreData.deltaY / scale,\n          lastX: draggable.state.x,\n          lastY: draggable.state.y\n        };\n      }\n\n      // A lot faster than stringify/parse\n      function cloneBounds(bounds /*: Bounds*/) /*: Bounds*/ {\n        return {\n          left: bounds.left,\n          top: bounds.top,\n          right: bounds.right,\n          bottom: bounds.bottom\n        };\n      }\n\n      /***/ },\n    /* 9 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      /* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\n        Object.defineProperty(exports, \"__esModule\", {\n          value: true\n        });\n\n        var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n        var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n        var _react = __webpack_require__(2);\n\n        var _react2 = _interopRequireDefault(_react);\n\n        var _reactDom = __webpack_require__(3);\n\n        var _reactDom2 = _interopRequireDefault(_reactDom);\n\n        var _domFns = __webpack_require__(5);\n\n        var _positionFns = __webpack_require__(8);\n\n        var _shims = __webpack_require__(6);\n\n        var _log = __webpack_require__(11);\n\n        var _log2 = _interopRequireDefault(_log);\n\n        function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n        function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n        function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\n        function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n        // Simple abstraction for dragging events names.\n        /*:: import type {EventHandler} from './utils/types';*/\n        var eventsFor = {\n          touch: {\n            start: 'touchstart',\n            move: 'touchmove',\n            stop: 'touchend'\n          },\n          mouse: {\n            start: 'mousedown',\n            move: 'mousemove',\n            stop: 'mouseup'\n          }\n        };\n\n        // Default to mouse events.\n        var dragEventFor = eventsFor.mouse;\n\n        //\n        // Define <DraggableCore>.\n        //\n        // <DraggableCore> is for advanced usage of <Draggable>. It maintains minimal internal state so it can\n        // work well with libraries that require more control over the element.\n        //\n\n        /*:: type CoreState = {\n         dragging: boolean,\n         lastX: number,\n         lastY: number,\n         touchIdentifier: ?number\n         };*/\n\n        var DraggableCore = function (_React$Component) {\n          _inherits(DraggableCore, _React$Component);\n\n          function DraggableCore() {\n            var _ref;\n\n            var _temp, _this, _ret;\n\n            _classCallCheck(this, DraggableCore);\n\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = DraggableCore.__proto__ || Object.getPrototypeOf(DraggableCore)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n              dragging: false,\n              // Used while dragging to determine deltas.\n              lastX: NaN, lastY: NaN,\n              touchIdentifier: null\n            }, _this.handleDragStart = function (e) {\n              // Make it possible to attach event handlers on top of this one.\n              _this.props.onMouseDown(e);\n\n              // Only accept left-clicks.\n              if (!_this.props.allowAnyClick && typeof e.button === 'number' && e.button !== 0) return false;\n\n              // Get nodes. Be sure to grab relative document (could be iframed)\n              var domNode = _reactDom2.default.findDOMNode(_this);\n              var ownerDocument = domNode.ownerDocument;\n\n              // Short circuit if handle or cancel prop was provided and selector doesn't match.\n\n              if (_this.props.disabled || !(e.target instanceof ownerDocument.defaultView.Node) || _this.props.handle && !(0, _domFns.matchesSelectorAndParentsTo)(e.target, _this.props.handle, domNode) || _this.props.cancel && (0, _domFns.matchesSelectorAndParentsTo)(e.target, _this.props.cancel, domNode)) {\n                return;\n              }\n\n              // Set touch identifier in component state if this is a touch event. This allows us to\n              // distinguish between individual touches on multitouch screens by identifying which\n              // touchpoint was set to this element.\n              var touchIdentifier = (0, _domFns.getTouchIdentifier)(e);\n              _this.setState({ touchIdentifier: touchIdentifier });\n\n              // Get the current drag point from the event. This is used as the offset.\n              var position = (0, _positionFns.getControlPosition)(e, touchIdentifier, _this);\n              if (position == null) return; // not possible but satisfies flow\n              var x = position.x,\n                y = position.y;\n\n              // Create an event object with all the data parents need to make a decision here.\n\n              var coreEvent = (0, _positionFns.createCoreData)(_this, x, y);\n\n              (0, _log2.default)('DraggableCore: handleDragStart: %j', coreEvent);\n\n              // Call event handler. If it returns explicit false, cancel.\n              (0, _log2.default)('calling', _this.props.onStart);\n              var shouldUpdate = _this.props.onStart(e, coreEvent);\n              if (shouldUpdate === false) return;\n\n              // Add a style to the body to disable user-select. This prevents text from\n              // being selected all over the page.\n              if (_this.props.enableUserSelectHack) (0, _domFns.addUserSelectStyles)(ownerDocument.body);\n\n              // Initiate dragging. Set the current x and y as offsets\n              // so we know how much we've moved during the drag. This allows us\n              // to drag elements around even if they have been moved, without issue.\n              _this.setState({\n                dragging: true,\n\n                lastX: x,\n                lastY: y\n              });\n\n              // Add events to the document directly so we catch when the user's mouse/touch moves outside of\n              // this element. We use different events depending on whether or not we have detected that this\n              // is a touch-capable device.\n              (0, _domFns.addEvent)(ownerDocument, dragEventFor.move, _this.handleDrag);\n              (0, _domFns.addEvent)(ownerDocument, dragEventFor.stop, _this.handleDragStop);\n            }, _this.handleDrag = function (e) {\n\n              // Prevent scrolling on mobile devices, like ipad/iphone.\n              if (e.type === 'touchmove') e.preventDefault();\n\n              // Get the current drag point from the event. This is used as the offset.\n              var position = (0, _positionFns.getControlPosition)(e, _this.state.touchIdentifier, _this);\n              if (position == null) return;\n              var x = position.x,\n                y = position.y;\n\n              // Snap to grid if prop has been provided\n\n              if (x !== x) debugger;\n\n              if (Array.isArray(_this.props.grid)) {\n                var deltaX = x - _this.state.lastX,\n                  deltaY = y - _this.state.lastY;\n\n                var _snapToGrid = (0, _positionFns.snapToGrid)(_this.props.grid, deltaX, deltaY);\n\n                var _snapToGrid2 = _slicedToArray(_snapToGrid, 2);\n\n                deltaX = _snapToGrid2[0];\n                deltaY = _snapToGrid2[1];\n\n                if (!deltaX && !deltaY) return; // skip useless drag\n                x = _this.state.lastX + deltaX, y = _this.state.lastY + deltaY;\n              }\n\n              var coreEvent = (0, _positionFns.createCoreData)(_this, x, y);\n\n              (0, _log2.default)('DraggableCore: handleDrag: %j', coreEvent);\n\n              // Call event handler. If it returns explicit false, trigger end.\n              var shouldUpdate = _this.props.onDrag(e, coreEvent);\n              if (shouldUpdate === false) {\n                try {\n                  // $FlowIgnore\n                  _this.handleDragStop(new MouseEvent('mouseup'));\n                } catch (err) {\n                  // Old browsers\n                  var event = ((document.createEvent('MouseEvents') /*: any*/) /*: MouseTouchEvent*/);\n                  // I see why this insanity was deprecated\n                  // $FlowIgnore\n                  event.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n                  _this.handleDragStop(event);\n                }\n                return;\n              }\n\n              _this.setState({\n                lastX: x,\n                lastY: y\n              });\n            }, _this.handleDragStop = function (e) {\n              if (!_this.state.dragging) return;\n\n              var position = (0, _positionFns.getControlPosition)(e, _this.state.touchIdentifier, _this);\n              if (position == null) return;\n              var x = position.x,\n                y = position.y;\n\n              var coreEvent = (0, _positionFns.createCoreData)(_this, x, y);\n\n              var _ReactDOM$findDOMNode = _reactDom2.default.findDOMNode(_this),\n                ownerDocument = _ReactDOM$findDOMNode.ownerDocument;\n\n              // Remove user-select hack\n\n\n              if (_this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(ownerDocument.body);\n\n              (0, _log2.default)('DraggableCore: handleDragStop: %j', coreEvent);\n\n              // Reset the el.\n              _this.setState({\n                dragging: false,\n                lastX: NaN,\n                lastY: NaN\n              });\n\n              // Call event handler\n              _this.props.onStop(e, coreEvent);\n\n              // Remove event handlers\n              (0, _log2.default)('DraggableCore: Removing handlers');\n              (0, _domFns.removeEvent)(ownerDocument, dragEventFor.move, _this.handleDrag);\n              (0, _domFns.removeEvent)(ownerDocument, dragEventFor.stop, _this.handleDragStop);\n            }, _this.onMouseDown = function (e) {\n              dragEventFor = eventsFor.mouse; // on touchscreen laptops we could switch back to mouse\n\n              return _this.handleDragStart(e);\n            }, _this.onMouseUp = function (e) {\n              dragEventFor = eventsFor.mouse;\n\n              return _this.handleDragStop(e);\n            }, _this.onTouchStart = function (e) {\n              // We're on a touch device now, so change the event handlers\n              dragEventFor = eventsFor.touch;\n\n              return _this.handleDragStart(e);\n            }, _this.onTouchEnd = function (e) {\n              // We're on a touch device now, so change the event handlers\n              dragEventFor = eventsFor.touch;\n\n              return _this.handleDragStop(e);\n            }, _temp), _possibleConstructorReturn(_this, _ret);\n          }\n\n          _createClass(DraggableCore, [{\n            key: 'componentWillUnmount',\n            value: function componentWillUnmount() {\n              // Remove any leftover event handlers. Remove both touch and mouse handlers in case\n              // some browser quirk caused a touch event to fire during a mouse move, or vice versa.\n              var _ReactDOM$findDOMNode2 = _reactDom2.default.findDOMNode(this),\n                ownerDocument = _ReactDOM$findDOMNode2.ownerDocument;\n\n              (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.move, this.handleDrag);\n              (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.move, this.handleDrag);\n              (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);\n              (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.stop, this.handleDragStop);\n              if (this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(ownerDocument.body);\n            }\n\n            // Same as onMouseDown (start drag), but now consider this a touch device.\n\n          }, {\n            key: 'render',\n            value: function render() /*: React.Element<any>*/ {\n              // Reuse the child provided\n              // This makes it flexible to use whatever element is wanted (div, ul, etc)\n              return _react2.default.cloneElement(_react2.default.Children.only(this.props.children), {\n                style: (0, _domFns.styleHacks)(this.props.children.props.style),\n\n                // Note: mouseMove handler is attached to document so it will still function\n                // when the user drags quickly and leaves the bounds of the element.\n                onMouseDown: this.onMouseDown,\n                onTouchStart: this.onTouchStart,\n                onMouseUp: this.onMouseUp,\n                onTouchEnd: this.onTouchEnd\n              });\n            }\n          }]);\n\n          return DraggableCore;\n        }(_react2.default.Component);\n\n        DraggableCore.displayName = 'DraggableCore';\n        DraggableCore.propTypes = {\n          /**\n           * `allowAnyClick` allows dragging using any mouse button.\n           * By default, we only accept the left button.\n           *\n           * Defaults to `false`.\n           */\n          allowAnyClick: _react.PropTypes.bool,\n\n          /**\n           * `disabled`, if true, stops the <Draggable> from dragging. All handlers,\n           * with the exception of `onMouseDown`, will not fire.\n           */\n          disabled: _react.PropTypes.bool,\n\n          /**\n           * By default, we add 'user-select:none' attributes to the document body\n           * to prevent ugly text selection during drag. If this is causing problems\n           * for your app, set this to `false`.\n           */\n          enableUserSelectHack: _react.PropTypes.bool,\n\n          /**\n           * `offsetParent`, if set, uses the passed DOM node to compute drag offsets\n           * instead of using the parent node.\n           */\n          offsetParent: function offsetParent(props, propName) {\n            if (process.browser && props[propName] && props[propName].nodeType !== 1) {\n              throw new Error('Draggable\\'s offsetParent must be a DOM Node.');\n            }\n          },\n\n          /**\n           * `grid` specifies the x and y that dragging should snap to.\n           */\n          grid: _react.PropTypes.arrayOf(_react.PropTypes.number),\n\n          /**\n           * `scale` specifies the scale of the area you are dragging inside of. It allows\n           * the drag deltas to scale correctly with how far zoomed in/out you are.\n           */\n          scale: _react.PropTypes.number,\n\n          /**\n           * `handle` specifies a selector to be used as the handle that initiates drag.\n           *\n           * Example:\n           *\n           * ```jsx\n           *   let App = React.createClass({\n\t   *       render: function () {\n\t   *         return (\n\t   *            <Draggable handle=\".handle\">\n\t   *              <div>\n\t   *                  <div className=\"handle\">Click me to drag</div>\n\t   *                  <div>This is some other content</div>\n\t   *              </div>\n\t   *           </Draggable>\n\t   *         );\n\t   *       }\n\t   *   });\n           * ```\n           */\n          handle: _react.PropTypes.string,\n\n          /**\n           * `cancel` specifies a selector to be used to prevent drag initialization.\n           *\n           * Example:\n           *\n           * ```jsx\n           *   let App = React.createClass({\n\t   *       render: function () {\n\t   *           return(\n\t   *               <Draggable cancel=\".cancel\">\n\t   *                   <div>\n\t   *                     <div className=\"cancel\">You can't drag from here</div>\n\t   *                     <div>Dragging here works fine</div>\n\t   *                   </div>\n\t   *               </Draggable>\n\t   *           );\n\t   *       }\n\t   *   });\n           * ```\n           */\n          cancel: _react.PropTypes.string,\n\n          /**\n           * Called when dragging starts.\n           * If this function returns the boolean false, dragging will be canceled.\n           */\n          onStart: _react.PropTypes.func,\n\n          /**\n           * Called while dragging.\n           * If this function returns the boolean false, dragging will be canceled.\n           */\n          onDrag: _react.PropTypes.func,\n\n          /**\n           * Called when dragging stops.\n           * If this function returns the boolean false, the drag will remain active.\n           */\n          onStop: _react.PropTypes.func,\n\n          /**\n           * A workaround option which can be passed if onMouseDown needs to be accessed,\n           * since it'll always be blocked (as there is internal use of onMouseDown)\n           */\n          onMouseDown: _react.PropTypes.func,\n\n          /**\n           * These properties should be defined on the child, not here.\n           */\n          className: _shims.dontSetMe,\n          style: _shims.dontSetMe,\n          transform: _shims.dontSetMe\n        };\n        DraggableCore.defaultProps = {\n          allowAnyClick: false, // by default only accept left click\n          cancel: null,\n          disabled: false,\n          enableUserSelectHack: true,\n          offsetParent: null,\n          handle: null,\n          grid: null,\n          transform: null,\n          onStart: function onStart() {},\n          onDrag: function onDrag() {},\n          onStop: function onStop() {},\n          onMouseDown: function onMouseDown() {}\n        };\n        exports.default = DraggableCore;\n        /* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n      /***/ },\n    /* 10 */\n    /***/ function(module, exports) {\n\n      // shim for using process in browser\n      var process = module.exports = {};\n\n      // cached from whatever global is present so that test runners that stub it\n      // don't break things.  But we need to wrap it in a try catch in case it is\n      // wrapped in strict mode code which doesn't define any globals.  It's inside a\n      // function because try/catches deoptimize in certain engines.\n\n      var cachedSetTimeout;\n      var cachedClearTimeout;\n\n      function defaultSetTimout() {\n        throw new Error('setTimeout has not been defined');\n      }\n      function defaultClearTimeout () {\n        throw new Error('clearTimeout has not been defined');\n      }\n      (function () {\n        try {\n          if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n          } else {\n            cachedSetTimeout = defaultSetTimout;\n          }\n        } catch (e) {\n          cachedSetTimeout = defaultSetTimout;\n        }\n        try {\n          if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n          } else {\n            cachedClearTimeout = defaultClearTimeout;\n          }\n        } catch (e) {\n          cachedClearTimeout = defaultClearTimeout;\n        }\n      } ())\n      function runTimeout(fun) {\n        if (cachedSetTimeout === setTimeout) {\n          //normal enviroments in sane situations\n          return setTimeout(fun, 0);\n        }\n        // if setTimeout wasn't available but was latter defined\n        if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n          cachedSetTimeout = setTimeout;\n          return setTimeout(fun, 0);\n        }\n        try {\n          // when when somebody has screwed with setTimeout but no I.E. maddness\n          return cachedSetTimeout(fun, 0);\n        } catch(e){\n          try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n          } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n          }\n        }\n\n\n      }\n      function runClearTimeout(marker) {\n        if (cachedClearTimeout === clearTimeout) {\n          //normal enviroments in sane situations\n          return clearTimeout(marker);\n        }\n        // if clearTimeout wasn't available but was latter defined\n        if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n          cachedClearTimeout = clearTimeout;\n          return clearTimeout(marker);\n        }\n        try {\n          // when when somebody has screwed with setTimeout but no I.E. maddness\n          return cachedClearTimeout(marker);\n        } catch (e){\n          try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n          } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n          }\n        }\n\n\n\n      }\n      var queue = [];\n      var draining = false;\n      var currentQueue;\n      var queueIndex = -1;\n\n      function cleanUpNextTick() {\n        if (!draining || !currentQueue) {\n          return;\n        }\n        draining = false;\n        if (currentQueue.length) {\n          queue = currentQueue.concat(queue);\n        } else {\n          queueIndex = -1;\n        }\n        if (queue.length) {\n          drainQueue();\n        }\n      }\n\n      function drainQueue() {\n        if (draining) {\n          return;\n        }\n        var timeout = runTimeout(cleanUpNextTick);\n        draining = true;\n\n        var len = queue.length;\n        while(len) {\n          currentQueue = queue;\n          queue = [];\n          while (++queueIndex < len) {\n            if (currentQueue) {\n              currentQueue[queueIndex].run();\n            }\n          }\n          queueIndex = -1;\n          len = queue.length;\n        }\n        currentQueue = null;\n        draining = false;\n        runClearTimeout(timeout);\n      }\n\n      process.nextTick = function (fun) {\n        var args = new Array(arguments.length - 1);\n        if (arguments.length > 1) {\n          for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n          }\n        }\n        queue.push(new Item(fun, args));\n        if (queue.length === 1 && !draining) {\n          runTimeout(drainQueue);\n        }\n      };\n\n      // v8 likes predictible objects\n      function Item(fun, array) {\n        this.fun = fun;\n        this.array = array;\n      }\n      Item.prototype.run = function () {\n        this.fun.apply(null, this.array);\n      };\n      process.title = 'browser';\n      process.browser = true;\n      process.env = {};\n      process.argv = [];\n      process.version = ''; // empty string to avoid regexp issues\n      process.versions = {};\n\n      function noop() {}\n\n      process.on = noop;\n      process.addListener = noop;\n      process.once = noop;\n      process.off = noop;\n      process.removeListener = noop;\n      process.removeAllListeners = noop;\n      process.emit = noop;\n\n      process.binding = function (name) {\n        throw new Error('process.binding is not supported');\n      };\n\n      process.cwd = function () { return '/' };\n      process.chdir = function (dir) {\n        throw new Error('process.chdir is not supported');\n      };\n      process.umask = function() { return 0; };\n\n\n      /***/ },\n    /* 11 */\n    /***/ function(module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = log;\n\n      /*eslint no-console:0*/\n      function log() {\n        var _console;\n\n        if ((undefined)) (_console = console).log.apply(_console, arguments);\n      }\n\n      /***/ }\n    /******/ ])\n});\n;\n//# sourceMappingURL=react-draggable.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/patches/react-draggable.js","import React, { Component } from 'react';\n\n\nexport default function withFixedScale(WrappedComponent) {\n\n  return class extends Component {\n    render() {\n\n      if (!this.props.canvasScale) {\n        return <WrappedComponent {...this.props}/>\n      }\n      return (\n        <WrappedComponent style={{ transform: `scale(${1/this.props.canvasScale})` }} {...this.props}/>\n      );\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/openseadragon/withFixedScale.js","import BEM from 'digirati-bem-js';\nimport React, {PureComponent} from 'react';\nimport './WholeCanvasSelector.scss';\n\nconst style = BEM.block('whole-canvas-selector');\n\nclass WholeCanvasSelector extends PureComponent {\n\n  // propTypes = {\n  //   skipConfirm: PropTypes.bool,\n  //   onSave: PropTypes.func.isRequired,\n  //   onCancel: PropTypes.func, // unused\n  // };\n\n  componentDidMount() {\n    const { skipConfirm = true } = this.props;\n    if (skipConfirm) {\n      this.props.onSave();\n    }\n  }\n\n  render() {\n    return (\n      <div className={style}>\n        <button className={style.element('button')} onClick={(e) => this.props.onSave()}>Select whole canvas</button>\n        {/* <button className={style.element('button')} onClick={(e) => this.props.onCancel()}>Cancel</button> */}\n      </div>\n    );\n  }\n}\n\nexport default WholeCanvasSelector;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/selectors/WholeCanvasSelector.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./WholeCanvasSelector.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./WholeCanvasSelector.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./WholeCanvasSelector.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/selectors/WholeCanvasSelector.scss\n// module id = 633\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".whole-canvas-selector {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0; }\\n  .whole-canvas-selector__button {\\n    position: absolute;\\n    width: 100px;\\n    left: 50%;\\n    margin-left: -50px;\\n    top: 50%;\\n    z-index: 10; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/selectors/WholeCanvasSelector.scss\n// module id = 634\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Form.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Form.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Form.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/inputs/Form.scss\n// module id = 635\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".input-form__error {\\n  padding: 5px;\\n  border: 3px solid crimson;\\n  color: crimson;\\n  background: #FFF0F0;\\n  margin: 10px; }\\n  .input-form__error--hidden {\\n    display: none; }\\n\\n.input-form__group {\\n  border: 2px solid #DDD;\\n  padding: 10px;\\n  margin-bottom: 10px; }\\n  .input-form__group--defaultGroup {\\n    border-width: 0;\\n    padding: 0;\\n    margin-bottom: 10px; }\\n\\n.input-form__group-name {\\n  font-weight: bold;\\n  margin-bottom: 14px;\\n  font-size: 1.4em; }\\n\\n.input-form__group-fields {\\n  display: none; }\\n\\n.input-form__group-fields--open {\\n  display: block; }\\n\\n.input-form__group-fields--defaultGroup {\\n  display: block; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/inputs/Form.scss\n// module id = 636\n// module chunks = 0","import React, { Component } from 'react';\nimport FormField from './FormField';\n\nexport default class FormGroup extends Component {\n\n  static DEFAULT_GROUP = 'defaultGroup';\n\n  state = {\n    isOpen: false,\n  };\n\n  toggle = () => this.setState({ isOpen: !this.state.isOpen });\n\n  render() {\n    const { groupKey, style, group, fields, draft, ...props } = this.props;\n    const { isOpen } = this.state;\n    const groupClass = groupKey === FormGroup.DEFAULT_GROUP || isOpen;\n    const groupKeyClass = groupKey.replace(/ /g, '-');\n\n    return (\n      <div\n        className={style.element('group').modifiers({ [groupKeyClass]: true, open: groupClass })}>\n        {groupKey !== FormGroup.DEFAULT_GROUP ? (\n          <div onClick={this.toggle}\n               className={style.element('group-name').modifiers({ [groupKeyClass]: true, open: isOpen })}>\n            {group.label}\n          </div>\n        ) : null}\n        <div className={style.element('group-fields').modifiers({ [groupKeyClass]: true, open: isOpen })}>\n          {fields.map(field =>\n            <FormField\n              key={field.id}\n              draftId={draft.id}\n              field={field}\n              value={draft.input[field.id]}\n              preview={draft.isPreviewing}\n              {...props}\n            />)}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/FormGroup.js","import React, { PureComponent } from 'react';\nimport DatePicker from './DatePicker';\nimport DropDown from './DropDown';\nimport GoogleMapSearch from './GoogleMapSearch';\nimport TextArea from './TextArea';\nimport TextBox from './TextBox';\nimport Fallback from './Fallback';\nimport NullableCaptureModel from './NullableCaptureModel';\nimport VALIDATION_MAP from '../domain/validation';\nimport EmbeddedResourceEditor from './EmbeddedResourceEditor';\n\nexport default class FormField extends PureComponent {\n\n  update(validate, field) {\n    const { updateField } = this.props;\n    return (value) => {\n      // if (validate) {\n      //   const validation = validate(value);\n      //   if (!validation.isValid) {\n      //     this.setState({error: validation.message});\n      //   } else {\n      //     if (this.state.error) {\n      //       this.setState({error: null});\n      //     }\n      //   }\n      // }\n      updateField(field, value);\n    };\n  }\n\n  render() {\n    const { field, draftId, ...allProps } = this.props;\n    const validation = ( field.metaData && field.metaData.conformsTo ) ? VALIDATION_MAP[field.metaData.conformsTo.id] : null;\n    const update = this.update(validation, field).bind(this);\n    const props = {\n      key: `${field.id}-${draftId}`,\n      update,\n      ...allProps,\n      ...field\n    };\n    switch (field.inputType) {\n      case 'madoc:autocomplete':\n        if (field.annotationMetaData.autocomplete) {\n          return <DropDown key={props.id} autocomplete={field.annotationMetaData.autocomplete} {...props}/>;\n        }\n        return <TextBox key={props.id} {...props}/>;\n      case 'madoc:dropdown':\n        if (field.annotationMetaData.options) {\n          return <DropDown key={props.id} options={field.annotationMetaData.options} {...props}/>;\n        }\n        return <TextBox key={props.id} {...props}/>;\n      case 'madoc:textarea':\n        return <TextArea key={props.id} {...props}/>;\n      case 'madoc:datepicker':\n        return <DatePicker key={props.id} {...props}/>;\n      case 'madoc:map':\n      case 'madoc:mappicker':\n        return <GoogleMapSearch key={props.id} {...props}/>;\n      case 'madoc:nullableCaptureModel':\n        return <NullableCaptureModel key={props.id} {...props}/>;\n      case 'madoc:resource':\n        return <EmbeddedResourceEditor key={props.id} {...props}/>;\n      case 'madoc:fallbackOptions':\n        const isOption = name => (option) => option['o:label'] === name;\n        let opts = field.annotationMetaData.options || [];\n        let autocomplete = opts.find(isOption('autocomplete'));\n        let captureModel = opts.find(isOption('captureModel'));\n\n        if (!captureModel || !autocomplete) {\n          console.warn('Unable to create Fallback component, missing autocomplete or captureModel options');\n          return null;\n        }\n\n        return <Fallback autocomplete={autocomplete} captureModel={captureModel} key={props.id} {...props}/>;\n      case 'madoc:textbox':\n      default:\n        return <TextBox key={props.id} {...props}/>;\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/FormField.js","import React, { PureComponent } from 'react';\nimport DatePickerComponent from 'react-datepicker';\nimport moment from 'moment';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport BEM from 'digirati-bem-js';\nimport './TextBox.scss';\n\nconst style = BEM.block('input-text-box');\n\nclass DatePicker extends PureComponent {\n\n  // propTypes = {\n  //   id: PropTypes.string.isRequired,\n  //   value: PropTypes.string.isRequired,\n  //   update: PropTypes.func.isRequired,\n  //   metaData: PropTypes.shape({\n  //     title: PropTypes.string.isRequired,\n  //     description: PropTypes.string\n  //   }).isRequired,\n  //   preview: PropTypes.bool,\n  // };\n\n  handleChange(time) {\n    this.props.update(time.toISOString());\n  }\n\n  render() {\n    const { id, value, metaData, preview, displayFieldSelector } = this.props;\n    const time = moment(value);\n    return (\n      <div className={style}>\n        <label className={style.element('label')} htmlFor={id}>\n          {metaData.title} {' '}\n          { (metaData.selector && metaData.selectorValue) ?\n            (<a onClick={(e) => {\n              e.preventDefault();\n              displayFieldSelector(id);\n            }} href=\"#\">edit</a>)\n            : null }\n        </label>\n        <div className={style.element('description')}>\n          {metaData.description}\n        </div>\n        { preview ? (\n          <div className={style.element('preview')}>{value}</div>\n        ) : (\n          <DatePickerComponent\n            dateFormat=\"DD/MM/YYYY\"\n            className={style.element('input').modifier('datepicker')}\n            selected={time.isValid() ? time : moment()}\n            showYearDropdown={true}\n            onChange={(e) => this.handleChange(e)}/>\n        ) }\n      </div>\n    );\n  }\n\n}\n\nexport default DatePicker;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/DatePicker.js","export const VIEWER_MUTATION = 'VIEWER_MUTATION';\nexport const VIEWER_ACCESS = 'VIEWER_ACCESS';\n\nexport function setViewer(viewer) {\n  return { type: VIEWER_MUTATION, payload: { viewer } };\n}\n\nexport function withViewer(func) {\n  return { type: VIEWER_ACCESS, payload: { func } };\n}\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/viewer.js","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".input-text-box {\\n  padding: 10px; }\\n  .input-text-box__input {\\n    width: 200px;\\n    padding: 12px;\\n    border: 2px solid #000;\\n    font-weight: bold;\\n    font-size: 14px;\\n    margin-bottom: 10px;\\n    background-color: #FFF; }\\n    .input-text-box__input--textarea {\\n      height: 120px; }\\n    .input-text-box__input:focus {\\n      border-color: blueviolet;\\n      outline: none; }\\n  .input-text-box__label {\\n    font-weight: bold; }\\n  .input-text-box__description {\\n    color: #888;\\n    font-size: .75em; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/inputs/TextBox.scss\n// module id = 646\n// module chunks = 0","import BEM from 'digirati-bem-js';\nimport React, {Component} from 'react';\nimport './DropDown.scss';\n\nconst style = BEM.block('input-drop-down');\n\n// Source: https://jsfiddle.net/11szrbx9/\nfunction printf(format, ...values) {\n  return values.reduce((str, val) => str.replace(/%s/, val), format);\n}\n\nclass DropDown extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      suggestions: []\n    }\n  }\n\n  selectSuggestion(suggestion) {\n    this.props.update(suggestion.uri);\n  }\n\n  updateSuggestions(update, value) {\n    update(value);\n    fetch(\n      printf(this.props.autocomplete, value)\n    )\n    .then(f => f.json())\n    .then(data => this.setState({ suggestions: data.completions })); // probably needs changed?\n  }\n\n  renderBox() {\n    const {id, value, options, autocomplete, preview, update} = this.props;\n    const {suggestions} = this.state;\n\n    if (preview) {\n      return <div className={style.element('preview')}>{value}</div>;\n    }\n\n    if (autocomplete) {\n      return <div>\n        <input onChange={(e) => this.updateSuggestions(update, e.currentTarget.value)} type=\"text\" value={value || ''} ref={ref => this.input = ref}/>\n        {suggestions ?\n          <ul>\n            { suggestions.map(suggestion => <li key={suggestion.uri} onClick={() => this.selectSuggestion(suggestion)}>{suggestion.label}</li>) }\n          </ul>\n          : null }\n      </div>;\n    }\n\n    return (\n      <select\n        className={style.element('input')}\n        id={id}\n        value={value || ''}\n        onChange={e => update(e.currentTarget.value)}>\n        { options.map((value, n) => <option key={n} value={value}>{value}</option>) }\n      </select>\n    );\n  }\n\n  render() {\n    const { id, metaData } = this.props;\n    return (\n      <div className={style}>\n        <label className={style.element('label')} htmlFor={id}>\n          {metaData.title} {' '}\n          { (metaData.selector && metaData.selectorValue) ?\n            (<a onClick={(e) => {\n              e.preventDefault();\n              displayFieldSelector(id);\n            }} href=\"#\">edit</a>)\n            : null }\n        </label>\n        <div className={style.element('description')}>\n          {metaData.description}\n        </div>\n        { this.renderBox() }\n      </div>\n    );\n  }\n\n}\n\nexport default DropDown;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/DropDown.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./DropDown.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./DropDown.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./DropDown.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/inputs/DropDown.scss\n// module id = 648\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".input-drop-down {\\n  padding: 10px; }\\n  .input-drop-down__input {\\n    background: #FFF;\\n    height: 40px;\\n    width: 200px;\\n    border: 2px solid #000;\\n    font-weight: bold;\\n    font-size: 14px;\\n    margin-bottom: 10px; }\\n    .input-drop-down__input:focus {\\n      border-color: blueviolet;\\n      outline: none; }\\n  .input-drop-down__label {\\n    font-weight: bold; }\\n  .input-drop-down__description {\\n    color: #888;\\n    font-size: .75em; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/inputs/DropDown.scss\n// module id = 649\n// module chunks = 0","// DUBLIN CORE CONSTANTS\nexport const ID = '@id';\nexport const CONTEXT = '@context';\nexport const TYPE = '@type';\nexport const VALUE = '@value';\nexport const DESCRIPTION = 'dcterms:description';\nexport const TITLE = 'dcterms:title';\nexport const CONFORMS_TO = 'dcterms:conformsTo';\nexport const FORM_FIELDS = 'dcterms:hasPart';\nexport const HAS_PART = 'dcterms:hasPart';\nexport const RDFS_LABEL = 'rdfs:label';\n\n// OMEKA CONSTANTS\nexport const OMEKA_LABEL = 'o:label';\n\n// CROWD CONSTANTS\nexport const COMBINE = 'crowds:derivedAnnoCombine';\nexport const FIELD_GROUP = 'crowds:uiFormGroup';\nexport const LABEL_PARTS = 'crowds:derivedAnnoBodyLabelParts';\nexport const UI_GROUP = 'crowds:uiGroup';\nexport const EXTERNALISE = 'crowds:derivedAnnoExternalize';\nexport const HUMAN_READABLE = 'crowds:derivedAnnoHumanReadable';\nexport const MOTIVATED_BY = 'crowds:derivedAnnoMotivatedBy';\nexport const SERIALIZE = 'crowds:derivedAnnoSerialize';\nexport const MULTIPLE = 'crowds:uiMultiple';\nexport const UI_CHOICE = 'crowds:uiChoice';\nexport const SELECTOR = 'crowds:uiSelectorType';\nexport const SELECTOR_VALUE = 'crowds:uiSelectorValue';\n\nexport const BODY_TYPE = 'crowds:derivedAnnoBodyType';\nexport const PURPOSE = 'crowds:derivedAnnoBodyPurpose';\n\nexport const INPUT_TYPE = 'crowds:uiInputType';\nexport const INPUT_OPTIONS = 'crowds:uiInputOptions';\n\nexport const BOX_SELECTOR = 'madoc:boxdraw';\nexport const WHOLE_CANVAS_SELECTOR = 'WholeCanvasSelector'; // @todo change to madoc: ns\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/vocab.js","import BEM from 'digirati-bem-js';\nimport React, {Component} from 'react';\nimport Geosuggest from 'react-geosuggest';\nimport {GoogleMap, Marker, withGoogleMap} from 'react-google-maps';\nimport './GoogleMapSearch.scss';\n\nconst style = BEM.block('google-map-search');\n\nconst GoogleMapDraggablePin = withGoogleMap(props => {\n  return (\n    <GoogleMap\n      ref={props.onMapLoad}\n      defaultZoom={11}\n      center={ props.location }>\n      <Marker draggable={true} onDragEnd={ props.dragEnd } position={ props.location }/>\n    </GoogleMap>\n  );\n});\n\nclass GoogleMapSearch extends Component {\n\n  state = {\n    currentLocation: null,\n    selected: false,\n  };\n\n  render() {\n    const key = 'AIzaSyD2X9UAJcuDi_8mXF0ESXtZ9B9KbYcgFKs';\n    const {value: valueAsString, metaData, preview, update} = this.props;\n    const {selected} = this.state;\n    const [lat, lng] = valueAsString ? valueAsString.split(',') : [];\n    const value = (lat && lng) ? {lat: parseFloat(lat), lng: parseFloat(lng)} : null;\n\n    if (selected || preview) {\n      return (\n        <div style={{background: '#FFF'}}>\n          <h4 className={style.element('label')}>{metaData.title}</h4>\n          <div className={style.element('description')}>\n            {metaData.description}\n          </div>\n          <img width=\"300\"\n               onClick={() => this.setState({selected: null})}\n               src={`http://maps.googleapis.com/maps/api/staticmap?key=${key}&size=300x200&scale=2&center=${selected.lat},${selected.lng}&markers=${selected.lat},${selected.lng}&zoom=11`}/>\n        </div>\n      );\n    }\n    return (\n      <div className={style}>\n        <h4 className={style.element('label')}>{metaData.title}</h4>\n        <div className={style.element('description')}>\n          {metaData.description}\n        </div>\n        <div className={style.element('container')}>\n          <Geosuggest onSuggestSelect={(e) => update(`${e.location.lat},${e.location.lng}`)}/>\n          {\n            value ? (\n              <div>\n                <GoogleMapDraggablePin\n                  onMapLoad={(map) => this.map = map}\n                  dragEnd={({latLng}) => update(`${latLng.lat()},${latLng.lng()}`)}\n                  containerElement={(\n                    <div className={style.element('map-object')}/>\n                  )}\n                  mapElement={(\n                    <div className={style.element('map-object').modifier('inner')}/>\n                  )}\n                  location={value}/>\n                <button\n                  className={style.element('button')}\n                  onClick={() => this.setState({selected: value})}>\n                  save\n                </button>\n              </div>\n            ) : null\n          }\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default GoogleMapSearch;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/GoogleMapSearch.js","import plugin from './core.plugin';\nimport provider from './core.provider';\nimport * as utils from './core.utils';\nimport Component from './core';\n\nexport {\n  Component,\n  provider,\n  utils,\n  plugin,\n};\n\nexport default plugin;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-core/src/index.js","export const ANNOTATIONS_ADD = 'ANNOTATIONS_ADD';\n\nexport function addAnnotation(annotation) {\n  return { type: ANNOTATIONS_ADD, payload: { id: annotation.id, annotation } };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/annotations.js","import {\n  addSelectorToDraft,\n  addSelectorToDraftFieldFromViewer,\n  addSelectorToDraftFromViewer,\n  discardCurrentDraft,\n  removeSelectorFromDraft,\n  removeSelectorFromDraftField,\n} from './drafts';\nimport { getCurrentDraft, getDraftById } from '../query/draftQuery';\nimport { selectorCompat } from '../utility';\nimport { withViewer } from './viewer';\nimport { getCurrentSelector } from '../query/selectorQuery';\n\nexport const SELECTOR_SET_AVAILABLE = 'SELECTOR_SET_AVAILABLE';\nexport const SELECTOR_CHOOSE = 'SELECTOR_CHOOSE';\nexport const SELECTOR_UPDATE = 'SELECTOR_UPDATE';\nexport const SELECTOR_COMMIT_TO_DRAFT = 'SELECTOR_COMMIT_TO_DRAFT';\nexport const SELECTOR_COMMIT_TO_DRAFT_FIELD = 'SELECTOR_COMMIT_TO_DRAFT_FIELD';\nexport const SELECTOR_CANCEL = 'SELECTOR_CANCEL';\n\nexport function setAvailableSelectors(selectors) {\n  return { type: SELECTOR_SET_AVAILABLE, payload: { selectors } };\n}\n\nexport function chooseSelector(type, source, defaults, done) {\n  // @todo find better way of Canvas relative vs Viewport relative inspections\n  if (!defaults || type.toLowerCase() !== 'madoc:boxdraw') {\n    return (dispatch) => {\n      dispatch({\n        type: SELECTOR_CHOOSE,\n        payload: { type, source, defaults: selectorCompat(defaults) },\n      });\n      if (type.toLowerCase() === 'wholecanvasselector') {\n        dispatch(commitToCurrentDraft(false));\n      }\n      if (done) {\n        done();\n      }\n    };\n  }\n  return withViewer((Canvas, dispatch) => {\n    const { x, y } = Canvas.createViewportPoint(defaults.x, defaults.y);\n    const { x: maxX, y: maxY } = Canvas.createViewportPoint(defaults.x + defaults.width, defaults.y + defaults.height);\n    dispatch({\n      type: SELECTOR_CHOOSE,\n      meta: { fromViewer: true },\n      payload: { type, source, defaults: selectorCompat({ ...defaults, x, y, width: maxX - x, height: maxY - y }) },\n    });\n    if (done) {\n      done();\n    }\n  });\n}\n\nexport function cancelSelector() {\n  return { type: SELECTOR_CANCEL };\n}\n\nexport function chooseSecondarySelector(id, source, type, defaults, done) {\n  return chooseSelector(type, source, { ...selectorCompat(defaults), id, secondary: true }, done);\n}\n\nexport function updateSelector(data) {\n  return { type: SELECTOR_UPDATE, payload: { data: selectorCompat(data) } };\n}\n\nexport function commitToCurrentDraftField(fieldId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const selector = getCurrentSelector(state);\n    dispatch(\n      addSelectorToDraftFieldFromViewer(\n        selector.source.draft,\n        selectorCompat(selector),\n        fieldId,\n        () => dispatch({ type: SELECTOR_COMMIT_TO_DRAFT_FIELD }),\n      ),\n    );\n  };\n}\n\nexport function editCurrentDraftSecondarySelector(scope, fieldId) {\n  return (dispatch, getState) => {\n    const { id, selectors, template } = getCurrentDraft(getState(), scope);\n    if (id && selectors && selectors[fieldId]) {\n      dispatch(\n        chooseSecondarySelector(\n          fieldId,\n          { template: template, draft: id, scope},\n          selectors[fieldId].type,\n          selectorCompat(selectors[fieldId]),\n          // Remove only after choosing.\n          () => dispatch(removeSelectorFromDraftField(id, fieldId)),\n        ),\n      );\n    }\n  };\n}\n\nexport function editCurrentDraftSelector(scope) {\n  return (dispatch, getState) => {\n    const { id, selector, template } = getCurrentDraft(getState(), scope);\n    if (id && selector) {\n      if (selector.type === 'WholeCanvasSelector') {\n        return dispatch(discardCurrentDraft(scope));\n      }\n      dispatch(\n        chooseSelector(\n          selector.type,\n          { template: template, draft: id, scope },\n          selectorCompat(selector),\n          () => dispatch(removeSelectorFromDraft(id)),\n        ),\n      );\n    }\n  };\n}\n\nexport function commitToCurrentDraft(isViewer = true) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const selector = getCurrentSelector(state);\n    const currentDraft = getDraftById(state, selector.source.draft);\n    if (selector.id) {\n      return dispatch(commitToCurrentDraftField(selector.id));\n    }\n    if (isViewer) {\n      dispatch(\n        addSelectorToDraftFromViewer(\n          currentDraft.id,\n          selectorCompat(selector),\n          () => dispatch({ type: SELECTOR_COMMIT_TO_DRAFT }),\n        ),\n      );\n    } else {\n      dispatch(addSelectorToDraft(currentDraft.id, selector));\n      dispatch({ type: SELECTOR_COMMIT_TO_DRAFT });\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/selectors.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./GoogleMapSearch.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./GoogleMapSearch.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./GoogleMapSearch.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/inputs/GoogleMapSearch.scss\n// module id = 842\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".google-map-search__label {\\n  font-weight: bold; }\\n\\n.google-map-search__description {\\n  color: #888;\\n  font-size: .75em; }\\n\\n.google-map-search__container {\\n  border: 2px solid #000;\\n  background: #FFF; }\\n\\n.google-map-search__map-object {\\n  height: 200px; }\\n\\n.google-map-search__button {\\n  width: 100%;\\n  padding: 10px;\\n  background: skyblue;\\n  font-size: 13px;\\n  border: none; }\\n\\n.geosuggest {\\n  font-size: 18px;\\n  position: relative;\\n  text-align: left; }\\n  .geosuggest__input {\\n    width: 300px;\\n    padding: 12px;\\n    border: none;\\n    border-bottom: 2px solid #000;\\n    font-weight: bold;\\n    font-size: 14px;\\n    background-color: #FFF; }\\n    .geosuggest__input:focus {\\n      border-color: blueviolet;\\n      outline: none; }\\n  .geosuggest__suggests {\\n    position: absolute;\\n    top: 100%;\\n    left: 0;\\n    right: 0;\\n    max-height: 25em;\\n    padding: 0;\\n    margin-top: -4px;\\n    background: #FFF;\\n    border-bottom: 2px solid rgba(0, 0, 0, 0.2);\\n    border-top-width: 0;\\n    overflow-x: hidden;\\n    overflow-y: auto;\\n    list-style: none;\\n    z-index: 5;\\n    -webkit-transition: max-height 0.2s, border 0.2s;\\n    transition: max-height 0.2s, border 0.2s; }\\n  .geosuggest__suggests--hidden {\\n    max-height: 0;\\n    overflow: hidden;\\n    border-top-width: 0;\\n    border-bottom-width: 0; }\\n  .geosuggest__item {\\n    font-size: 18px;\\n    padding: .5em .65em;\\n    cursor: pointer; }\\n    .geosuggest__item:hover, .geosuggest__item:focus {\\n      background: #f5f5f5; }\\n    .geosuggest__item--active {\\n      background: #267dc0;\\n      color: #fff; }\\n      .geosuggest__item--active:hover, .geosuggest__item--active:focus {\\n        background: #ccc; }\\n    .geosuggest__item__matched-text {\\n      font-weight: bold; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/inputs/GoogleMapSearch.scss\n// module id = 843\n// module chunks = 0","import React, { PureComponent, PropTypes } from 'react';\nimport BEM from 'digirati-bem-js';\nimport './TextBox.scss';\n\nconst style = BEM.block('input-text-box');\n\nclass TextArea extends PureComponent {\n\n  // propTypes = {\n  //   id: PropTypes.string.isRequired,\n  //   value: PropTypes.string.isRequired,\n  //   update: PropTypes.func.isRequired,\n  //   metaData: PropTypes.shape({\n  //     title: PropTypes.string.isRequired,\n  //     description: PropTypes.string\n  //   }).isRequired,\n  //   preview: PropTypes.bool,\n  // };\n\n  render() {\n    const { id, value, metaData, preview, displayFieldSelector } = this.props;\n    return (\n      <div className={style}>\n        <label className={style.element('label')} htmlFor={id}>\n          {metaData.title} {' '}\n          { (metaData.selector && metaData.selectorValue) ?\n            (<a onClick={(e) => {\n              e.preventDefault();\n              displayFieldSelector(id);\n            }} href=\"#\">edit</a>)\n            : null }\n        </label>\n        <div className={style.element('description')}>{metaData.description}</div>\n        { preview ? (\n          <div className={style.element('preview')}>{value}</div>\n        ) : (\n          <textarea className={style.element('input').modifier('textarea')}\n                    id={id}\n                    value={value || ''}\n                    onChange={e => this.props.update(e.currentTarget.value)}/>\n        ) }\n      </div>\n    );\n  }\n\n}\n\nexport default TextArea;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/TextArea.js","import React, { Component } from 'react';\nimport BEM from 'digirati-bem-js';\nimport './TextBox.scss';\n\nconst style = BEM.block('input-text-box');\n\nclass TextBox extends Component {\n\n  shouldComponentUpdate(newProps) {\n    return newProps.value !== this.props.value || newProps.preview !== this.props.preview;\n  }\n\n  render() {\n    const { id, value, metaData, preview, update, displayFieldSelector, elementEvents } = this.props;\n\n    const events = {\n      ...elementEvents,\n      onFocus: e => elementEvents.onFocus ? elementEvents.onFocus(id, e) : null,\n      onBlur: e => elementEvents.onBlur ? elementEvents.onBlur(id, e) : null,\n    };\n\n\n    return (\n      <div className={style}>\n        <label className={style.element('label')} htmlFor={id}>\n          {metaData.title} {' '}\n          { (metaData.selector && metaData.selectorValue) ?\n            (<a onClick={(e) => {\n              e.preventDefault();\n              displayFieldSelector(id);\n            }} href=\"#\">edit</a>)\n          : null }\n        </label>\n        <div className={style.element('description')}>\n          {metaData.description}\n        </div>\n        { preview ? (\n          <div className={style.element('preview')}>{value}</div>\n        ) : (\n          <input className={style.element('input')}\n                 id={id}\n                 type=\"text\"\n                 value={value || \"\"}\n                 onChange={e => update(e.currentTarget.value)}\n                 {...events}/>\n        ) }\n      </div>\n    );\n  }\n\n}\n\nexport default TextBox;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/TextBox.js","import React, { PureComponent } from 'react';\nimport BEM from 'digirati-bem-js';\nimport EmbeddedResourceEditor from './EmbeddedResourceEditor';\nimport Autocomplete from './Autocomplete';\n\nconst style = BEM.block('fallback-input-box');\nclass Fallback extends PureComponent {\n  state = {\n    creatingNew: false,\n  };\n\n  handleNotFound = () => {\n    this.setState({\n      creatingNew: true,\n    });\n  };\n\n  render() {\n    const { creatingNew } = this.state;\n    const { autocomplete, captureModel, metaData, ...props } = this.props;\n\n    if (creatingNew) {\n      return (\n        <div className={style}>\n          <EmbeddedResourceEditor {...props} captureModel={captureModel['@id']} postSave={(val, annotation) => props.update({ url: val, label: annotation['label'] })} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={style}>\n        <a onClick={e => this.handleNotFound()}>{metaData.title}</a>\n\n        <Autocomplete {...props} suggestionProvider={(value) => {\n          const url = autocomplete['@id'] + '&q=' + encodeURIComponent(value);\n\n          return fetch(url)\n            .then(result => result.json())\n            .then(response => response.completions);\n        }}/>\n      </div>\n    );\n  }\n}\n\nexport default Fallback;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/Fallback.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./EmbeddedResourceEditor.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./EmbeddedResourceEditor.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./EmbeddedResourceEditor.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/inputs/EmbeddedResourceEditor.scss\n// module id = 847\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".embedded-resource-editor {\\n  border: 2px solid #000; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/inputs/EmbeddedResourceEditor.scss\n// module id = 848\n// module chunks = 0","import React, { PureComponent } from 'react';\nimport BEM from 'digirati-bem-js';\nimport debounce from 'lodash/debounce';\n\nconst style = BEM.block('autocomplete');\n\nconst AUTOCOMPLETE_DEBOUNCE_DELAY = 250;\nconst KEYCODE_ESCAPE = 27;\n\ninterface AutocompleteValue {\n  label: string,\n  uri: string\n}\n\nexport default class Autocomplete extends PureComponent {\n\n  state = {\n    suggestionListHidden: false,\n    suggestions: [],\n    label: '',\n  };\n\n  fetchNewSuggestions = debounce(() => {\n    const { suggestionProvider } = this.props;\n\n    suggestionProvider(this.state.label)\n    .then(suggestions => {\n      this.setState({\n        suggestions,\n        suggestionListHidden: false,\n      });\n    });\n  }, AUTOCOMPLETE_DEBOUNCE_DELAY);\n\n  handleInputReference = (ref) => {\n    this.setState({ input: ref });\n  };\n\n  handleCompletionSelection = (selection) => {\n    this.updateValue({\n      label: selection.label,\n      uri: selection.uri,\n    });\n\n    this.setState({\n      suggestionListHidden: true,\n    });\n\n    if (this.state.input) {\n      this.state.input.focus();\n    }\n  };\n\n  handleKeyUp = (evt) => {\n    switch (evt.keyCode) {\n      case KEYCODE_ESCAPE:\n        this.setState({\n          suggestionListHidden: true\n        });\n        break;\n      default:\n        this.fetchNewSuggestions();\n        break;\n    }\n  };\n\n  updateValue(value: AutocompleteValue) {\n    this.setState({\n      label: value.label,\n    });\n\n    const { update } = this.props;\n    update({ label: value.label, url: value.uri });\n  }\n\n  render() {\n    const { preview } = this.props;\n    const { suggestionListHidden, label } = this.state;\n\n    if (preview) {\n      return <div className={style.element('preview')}>{label}</div>;\n    }\n\n    const suggestionList = <ul className={style.element('suggestions')}>\n      {this.state.suggestions.map((suggestion: AutocompleteValue) => {\n        return (\n          <li key={suggestion.uri}\n              onClick={e => this.handleCompletionSelection(suggestion)}>\n            {suggestion.label}\n          </li>\n        );\n      })}\n    </ul>;\n\n    return (\n      <div className={style}>\n        <input type=\"text\" className={style.element('input')} value={label}\n               ref={this.handleInputReference}\n               onChange={e => this.setState({ label: e.currentTarget.value })}\n               onKeyUp={e => this.handleKeyUp(e)} />\n        { suggestionListHidden ? '' : suggestionList}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/Autocomplete.js","import { withViewer } from './viewer';\nimport update from 'immutability-helper';\n\nexport const IMPORT_RESOURCE_TREE = 'IMPORT_RESOURCE_TREE';\nexport const IMPORT_RESOURCE_CHOICE = 'IMPORT_RESOURCE_CHOICE';\nexport const IMPORT_RESOURCE_FIELD = 'IMPORT_RESOURCE_FIELD';\nexport const IMPORT_UNKNOWN_RESOURCE = 'IMPORT_UNKNOWN_RESOURCE';\nexport const IMPORT_CAPTURE_MODEL = 'IMPORT_CAPTURE_MODEL';\nexport const RESOURCE_NAV_FORWARD = 'RESOURCE_NAV_FORWARD';\nexport const RESOURCE_NAV_BACK = 'RESOURCE_NAV_BACK';\nexport const RESOURCE_NAV_RESET = 'RESOURCE_NAV_RESET';\n\nexport function importResource(resource) {\n  if (\n    resource.metaData &&\n    resource.metaData.selectorValue &&\n    resource.metaData.selectorValue.unit &&\n    resource.metaData.selectorValue.unit === 'percent'\n  ) {\n    return importResourceWithPercentage(resource);\n  }\n  if (resource.type === 'choice') {\n    return importChoice(resource);\n  }\n  if (resource.type === 'captureModel') {\n    return importCaptureModel(resource);\n  }\n  if (resource.type === 'field') {\n    return importField(resource);\n  }\n  console.warn('NOT FOUND', resource);\n  return {\n    type: IMPORT_UNKNOWN_RESOURCE,\n    error: true,\n    payload: new Error(`Unknown resource (${resource.type}) imported`),\n  };\n}\n\nexport function importChoice(resource) {\n  return { type: IMPORT_RESOURCE_CHOICE, payload: { resource } };\n}\n\nexport function importCaptureModel(resource) {\n  return { type: IMPORT_CAPTURE_MODEL, payload: { id: resource.id, resource } };\n}\n\nexport function importField({ parentId, ...resource }) {\n  if (!(parentId)) {\n    return {\n      type: IMPORT_RESOURCE_FIELD,\n      error: true,\n      payload: new Error('Cannot import dereferenced field (expected resource.parentId)'),\n    }\n  }\n  return { type: IMPORT_RESOURCE_FIELD, payload: { id: parentId, resource } };\n}\n\n/**\n * Moves user forward in path.\n */\nexport function moveForward(tree, path) {\n  return { type: RESOURCE_NAV_FORWARD, payload: { tree, path } };\n}\n\n/**\n * Moves user back in path.\n */\nexport function moveBack(tree) {\n  return { type: RESOURCE_NAV_BACK, payload: { tree } };\n}\n\n/**\n * Reset user to root.\n */\nexport function reset(tree) {\n  return { type: RESOURCE_NAV_RESET, payload: { tree } };\n}\n\nexport function importResourceTree(tree) {\n  if (!(\n      tree.id &&\n      (tree.type === 'choice' || tree.type === 'captureModel') /*&&\n       (tree.type === 'choice' ? (tree.choice && Object.keys(tree.choice).length > 1) : true)*/\n    )) {\n    return { type: IMPORT_RESOURCE_TREE, error: true, payload: new Error('Not a valid tree') };\n  }\n\n  return { type: IMPORT_RESOURCE_TREE, payload: { id: tree.id, tree } };\n}\n\nfunction importResourceWithPercentage(resource) {\n  return withViewer((Canvas, dispatch) => {\n      const { width, height } = Canvas.getImageSize();\n\n      if (!(\n          resource.metaData &&\n          resource.metaData.selectorValue &&\n          resource.metaData.selectorValue.x &&\n          resource.metaData.selectorValue.y &&\n          width &&\n          height\n        )) {\n        return dispatch({\n          type: IMPORT_UNKNOWN_RESOURCE,\n          error: true,\n          payload: new Error('Unknown resource, unable to convert from percentage to pixel format'),\n        });\n      }\n\n      const fixedResource = update(resource, {\n        metaData: {\n          selectorValue: {\n            $merge: {\n              ...resource.metaData.selectorValue,\n              x: (resource.metaData.selectorValue.x / 100) * width,\n              y: (resource.metaData.selectorValue.y / 100) * height,\n              width: (resource.metaData.selectorValue.width / 100) * width,\n              height: (resource.metaData.selectorValue.height / 100) * height,\n              immutable: true,\n              scale: 1,\n              unit: 'pixel',\n            },\n          },\n        },\n      });\n\n      dispatch(importResource(fixedResource));\n    },\n  );\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/actions/resources.js","import React, { Component } from 'react';\nimport EmbeddedResourceEditor from './EmbeddedResourceEditor';\nimport BEM from 'digirati-bem-js';\n\nconst style = BEM.block('nullable-capture-model');\nexport default class NullableCaptureModel extends Component {\n\n  state = { isChecked: false, isSaved: false, annotation: null };\n\n  onReceiveEmbeddedItem = item => item.then(item => {\n    const id = item.payload.annotation.id;\n    this.props.update(id);\n    this.setState({ isSaved: true, annotation: item.payload.annotation });\n  });\n\n  handleChange = () => {\n    const captureModel = this.getCaptureModel();\n    const isChecked = !this.state.isChecked;\n    if (!this.props.value) {\n      this.props.update(isChecked ? (captureModel['@id']) : null);\n    }\n    this.setState({ isChecked });\n  };\n\n  getCaptureModel() {\n    return this.props.annotationMetaData.options.find(e => e['o:label'] === 'madoc:capturemodel');\n  }\n\n  render() {\n    const { isChecked, isSaved, annotation } = this.state;\n    const {id, metaData, annotationMetaData, displayFieldSelector, value, ...props} = this.props;\n    const checkbox = annotationMetaData.options.find(e => e['o:label'] === 'madoc:checkbox');\n    const captureModel = annotationMetaData.options.find(e => e['o:label'] === 'madoc:capturemodel');\n    if (!checkbox || !captureModel) {\n      console.warn('NullableCaptureModel component failed to mount.', this.props);\n      return;\n    }\n    return (\n      <div>\n        <input id={id} type=\"checkbox\" value={this.state.isChecked} onChange={this.handleChange}/>\n        <label className={style.element('label')} htmlFor={id}>\n          {metaData.title} {' '}\n          { (metaData.selector && metaData.selectorValue) ?\n            (<a onClick={(e) => {\n              e.preventDefault();\n              displayFieldSelector(id);\n            }} href=\"#\">edit</a>)\n            : null }\n        </label>\n        {isChecked ? (\n          <div>\n            { isSaved ? (\n              <div>\n                { annotation.label } ({ annotation.id })\n              </div>\n              ) : (\n              <EmbeddedResourceEditor captureModel={captureModel['@id']} postSave={this.onReceiveEmbeddedItem} {...props}/>\n            ) }\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/inputs/NullableCaptureModel.js","import moment from 'moment';\n\nexport default {\n  'http://xmlns.com/foaf/name': (item) => {\n    return {\n      isValid: typeof item === 'string' && item.length >= 1,\n      message: 'Name must not be blank',\n    };\n  },\n  'https://schema.org/birthDate': (item) => {\n    return {\n      isValid: moment(item).isValid(),\n      message: 'You must provide a valid date of birth',\n    }\n  },\n  'https://schema.org/jobTitle': (item) => {\n    return {\n      isValid: typeof item === 'string' && item.length >= 1,\n      message: 'Job title must not be blank',\n    }\n  },\n  'http://dublincore.org/documents/dcmi-terms/#terms-description': (item) => {\n    return {\n      isValid: typeof item === 'string' && item.length >= 1,\n      message: 'Description must not be blank',\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/domain/validation.js","import BEM from 'digirati-bem-js';\nimport React, { Component } from 'react';\nimport Toggle from '../ui/Toggle';\nimport Viewer from '../viewers/Viewer';\nimport './Canvas.scss';\nimport Region from '../viewers/Region';\n\nconst $canvas = BEM.block('canvas');\n\nexport default class Canvas extends Component {\n\n  static VIEWPORT_RELATIVE = 'VIEWPORT_RELATIVE';\n  static CANVAS_RELATIVE = 'CANVAS_RELATIVE';\n\n  // propTypes = {\n  //   onUpdateSelector: PropTypes.func,\n  //   onSaveSelector: PropTypes.func,\n  //   selector: PropTypes.shape({\n  //     type: PropTypes.string.isRequired,\n  //     left: PropTypes.number,\n  //     top: PropTypes.number,\n  //     height: PropTypes.number,\n  //     width: PropTypes.number,\n  //   }),\n  //   image: PropTypes.shape({\n  //     src: PropTypes.string.isRequired,\n  //     height: PropTypes.number.isRequired,\n  //     width: PropTypes.number.isRequired,\n  //   }).isRequired,\n  //   displayWidth: PropTypes.number.isRequired,\n  // };\n\n  constructor() {\n    super();\n    this.resolveViewer = null;\n    this.viewerReady = new Promise((resolve, err) => {\n      this.resolveViewer = resolve;\n    });\n    this.state = {\n      showAnnotations: true,\n      position: {\n        x: -1,\n        y: -1,\n        scale: 0,\n        rotation: 0,\n      }\n    };\n  }\n\n  renderCurrentSelector(selector, defaultPosition, relativeTo) {\n\n    // Nope.\n    if (!selector) {\n      return null;\n    }\n\n    // Nothing is relative to the canvas yet.\n    if (relativeTo === Canvas.CANVAS_RELATIVE && selector.type !== 'madoc:pin') {\n      return null;\n    }\n    if (relativeTo !== Canvas.CANVAS_RELATIVE && selector.type === 'madoc:pin') {\n      return null;\n    }\n\n    const {\n      onUpdateSelector,\n      onSaveSelector,\n      image: {\n        width,\n      },\n      displayWidth,\n      onEditRegion,\n    } = this.props;\n\n    const { type, ...position } = selector;\n    const scale = displayWidth / width;\n\n    const isInitial = type === 'madoc:boxdraw' ? (!position.x && !position.y) : false;\n\n    return <Region\n      id={position.id}\n      type={type}\n      x={position.x}\n      y={position.y}\n      defaultX={defaultPosition.x}\n      defaultY={defaultPosition.y}\n      width={position.width || null}\n      height={position.height || null}\n\n      isInitial={isInitial}\n      isChanging={true}\n      canChange={true} // Change change if its being changed? maybe change.\n      pointerEvents={true} // To change\n\n      pixelScale={scale}\n\n      onChange={ onEditRegion } // Combined with canChange\n      onUpdate={ onUpdateSelector } // To change\n      onCommit={ onSaveSelector } // To change\n      onClick={ () => null } // To change\n\n      meta={{\n        isSecondary: position.isSecondary || false,\n        isSelected: position.isSelected || false,\n        focused: position.focused || false,\n      }}\n    />;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const props = this.props;\n\n    return (\n      nextState.showAnnotations !== this.state.showAnnotations ||\n      props.displayWidth !== nextProps.displayWidth ||\n      props.selector !== nextProps.selector ||\n      props.regions !== nextProps.regions ||\n      props.regions.length !== nextProps.regions.length\n    );\n  }\n\n  createRelativePoint(x, y) {\n    return this.viewer.createRelativePoint(x, y);\n  }\n\n  createViewportPoint(x, y) {\n    return this.viewer.createViewportPoint(x, y);\n  }\n\n  getSelectedRegion() {\n    return this.viewer.getSelectedRegion();\n  }\n\n  getImageSize() {\n    const { image: { width, height } } = this.props;\n\n    return {\n      width,\n      height,\n    };\n  }\n\n  getScale() {\n    const {\n      image: {\n        width,\n      },\n      displayWidth,\n    } = this.props;\n    return displayWidth / width;\n  }\n\n  setViewer(viewer) {\n    this.resolveViewer(viewer);\n    this.viewer = viewer;\n  }\n\n  mapRegion = ({ type: regionType, x, y, height, width: regionWidth, ...region }, index) => {\n    const { onEditRegion, displayWidth, width, onUpdateSelector, onSaveSelector} = this.props;\n    const scale = displayWidth / width;\n\n    const type = regionType ? regionType : (\n      x && y && height && regionWidth ? 'madoc:boxdraw' : (\n        x && y ? 'madoc:pin' : (\n          'WholeCanvasSelector'\n        )\n      )\n    );\n\n    return <Region\n      key={index}\n      id={region.id}\n      type={type}\n      x={x}\n      y={y}\n      width={regionWidth}\n      height={height}\n\n      isInitial={false} // To change\n      isChanging={false} // To change\n      canChange={region.immutable === false}\n      pointerEvents={true} // To change\n\n      pixelScale={scale}\n\n      onChange={ onEditRegion } // Combined with canChange\n      onUpdate={ onUpdateSelector } // To change\n      onCommit={ onSaveSelector } // To change\n      onClick={ () => null } // To change\n\n      meta={{\n        isSecondary: region.isSecondary || false,\n        isSelected: region.selected || false,\n        focused: region.focused || false,\n        ...region\n      }}\n    />;\n  };\n\n  render() {\n    const {\n      image: {\n        src,\n        height,\n        width,\n      },\n      maxHeight,\n      showAnnotationToggle,\n      displayWidth,\n      selector,\n      selectedViewer,\n      regions,\n      onEditRegion,\n      onUpdateSelector,\n      onSaveSelector,\n      ...props,\n    } = this.props;\n\n    const scale = displayWidth / width;\n\n    const regionRender = this.state.showAnnotations ? Object.keys(regions).reverse().map(r => regions[r]).map(this.mapRegion) : null;\n\n    const currentSelectorPropsViewport = {\n      width: 100,\n      height: 100,\n      x: (displayWidth / 2) - 50,\n      y: ((( height * scale ) < maxHeight ? height * scale : maxHeight) / 2 ) - 50,\n    };\n\n    const currentSelectorPropsCanvas = {\n      width: 100,\n      height: 100,\n      x: (width / 2) - 50,\n      y: (height / 2 ) - 50,\n    };\n\n    return (\n      <div className={$canvas}>\n        { showAnnotationToggle ? (\n          <div className={$canvas.element('info-bar')}>\n            <Toggle\n              label=\"toggle annotations\"\n              className={$canvas.element('toggle')}\n              onChange={(value) => this.toggleAnnotations(value)}\n              isActive={this.state.showAnnotations}/>\n          </div>\n        ) : null }\n        <div className={$canvas.element('viewport')} style={{ maxHeight: height * scale, width: width * scale }}>\n          { this.renderCurrentSelector(selector, currentSelectorPropsViewport, Canvas.VIEWPORT_RELATIVE) }\n          <Viewer\n            getRef={ref => this.setViewer(ref)}\n            type={selectedViewer === 'OpenSeadragonViewer' ? 'OpenSeadragonViewer' : 'ScaledImageViewer'}\n            resource={src}\n            scale={scale}\n            width={width}\n            height={height}\n            maxHeight={maxHeight}\n            { ...props }>\n            {/* Children of the viewer component get scaled automatically (x, y, width, height and save functions) */}\n            { regionRender }\n            { this.renderCurrentSelector(selector, currentSelectorPropsCanvas, Canvas.CANVAS_RELATIVE) }\n          </Viewer>\n        </div>\n      </div>\n    );\n  }\n\n  toggleAnnotations() {\n    this.setState(() => ({\n      showAnnotations: !this.state.showAnnotations,\n    }));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/composites/Canvas.js","import BEM from 'digirati-bem-js';\nimport React, {PureComponent} from 'react';\nimport './Toggle.scss';\n\nconst style = BEM.block('toggle');\n\nclass Toggle extends PureComponent {\n\n  render() {\n    const {label, isActive, className, onChange} = this.props;\n    return (\n      <div className={[ style, className ]}>\n        <span className={style.element('label')}>{ label }</span>\n        <div\n          onKeyDown={(e) => {\n            if (e.keyCode === 32 || e.keyCode === 13) {\n              e.nativeEvent.preventDefault();\n              onChange(!isActive);\n            }\n          }}\n          tabIndex=\"0\"\n          className={style.element('hitbox').modifier('active', isActive)}\n          onClick={() => onChange(!isActive)}>\n          <div className={style.element('ball').modifier('active', isActive)}/>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default Toggle;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/ui/Toggle.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Toggle.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Toggle.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Toggle.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/ui/Toggle.scss\n// module id = 856\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".toggle {\\n  display: inline-block; }\\n  .toggle__label {\\n    font-size: 1em;\\n    padding-right: 10px; }\\n  .toggle__hitbox {\\n    display: inline-block;\\n    border-radius: 20px;\\n    z-index: 100;\\n    pointer-events: auto;\\n    width: 40px;\\n    height: 20px;\\n    padding: 2px;\\n    background: #FFF;\\n    border: 1px solid #DDD;\\n    transition: background .2s; }\\n    .toggle__hitbox:focus {\\n      outline: none;\\n      background: #EEE;\\n      border: 1px solid #919191; }\\n    .toggle__hitbox--active:focus {\\n      background: #ecf3fe;\\n      border: 1px solid #1266f1; }\\n  .toggle__ball {\\n    width: 18px;\\n    border-radius: 18px;\\n    border: 1px solid #888;\\n    transition: all .2s;\\n    height: 18px;\\n    display: block;\\n    margin-left: 20px;\\n    background: #AAA; }\\n    .toggle__ball--active {\\n      margin-left: 0;\\n      background: #4285F4;\\n      border: 1px solid #1266f1; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/ui/Toggle.scss\n// module id = 857\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Canvas.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Canvas.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Canvas.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/composites/Canvas.scss\n// module id = 858\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".canvas__info-bar {\\n  background: #EEE;\\n  padding: 5px;\\n  height: 30px;\\n  z-index: 99999; }\\n\\n.canvas__viewport {\\n  overflow: hidden;\\n  position: relative; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/composites/Canvas.scss\n// module id = 859\n// module chunks = 0","import 'whatwg-fetch';\n\nconst JSON_LD_HEADERS = {\n  'Content-Type': 'application/ld+json',\n  Accept: 'application/ld+json',\n};\n\nimport type Annotation from '../annotation/Annotation';\n\nexport { AnnotationSelector } from './AnnotationSelector';\n\nconst CONTEXT = 'http://www.w3.org/ns/anno.jsonld';\n\nexport function makeRequest(method, uri, body, headers = []) {\n  return fetch(uri, {\n    method,\n    headers: { ...JSON_LD_HEADERS, ...headers },\n    body: JSON.stringify(body),\n    credentials: 'same-origin',\n  })\n    .then(response => {\n      if (response.status >= 200 && response.status < 300) {\n        return response.json();\n      }\n      return {\n        error: response.statusText,\n        status: response.status,\n      };\n    });\n}\n\nexport function get(uri, body) {\n  return makeRequest('GET', uri, body);\n}\n\nexport function post(uri, body, headers = []) {\n  return makeRequest('POST', uri, body, headers);\n}\n\nexport function getAnnotation(server, id) {\n  return get(`${server}${id}/`);\n}\n\nexport async function* getAllAnnotationsFromCollection(collectionResource) {\n  const firstPage = collectionResource.first;\n  if (!firstPage.items) {\n    return;\n  }\n  // First page of results.\n  for (let item of firstPage.items) {\n    yield item;\n  }\n  // Further pages of results.\n  if (firstPage.next) {\n    const collection = fetchPageCollection(firstPage.next);\n    do {\n      const item = await collection.next();\n      if (item.done) {\n        return;\n      }\n      yield item.value;\n    } while (true);\n  }\n}\n\nasync function* fetchPageCollection(resource) {\n  const currentPage = await get(resource);\n  if (currentPage.items) {\n    for (let item of currentPage.items) {\n      yield item;\n    }\n  }\n  if (currentPage.next) {\n    return fetchPageCollection(currentPage.next);\n  }\n}\n\nexport function createElucidateCollection(server, label, id) {\n  return getAnnotation(server, id).then(response => {\n    if (response.status === 404) {\n      return post(server, {\n        '@context': CONTEXT,\n        type: 'AnnotationCollection',\n        label,\n      }, {\n        Slug: id,\n      });\n    }\n    // Digest collection\n    return response;\n  });\n}\n\nexport function postAnnotation(collection : string, annotation: Annotation) {\n  return post(collection, annotation);\n}\n\n/**\n * @deprecated\n */\nexport function sendAnnotationToServer(server, body, target, motivation, label) {\n  return post(server, {\n    '@context': CONTEXT,\n    type: 'Annotation',\n    label: label ? label : 'unknown',\n    body,\n    target,\n    motivation,\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/elucidate/index.js","import React, { Component } from 'react';\nimport BEM from 'digirati-bem-js';\nimport Selector from '../selectors/Selector';\nimport './Region.scss';\nconst style = BEM.block('region');\n\nexport default class Region extends Component {\n\n  renderRegionBox() {\n    const { id, type, x, y, width, height, editing, canChange, onChange, meta } = this.props;\n    const { isSelected, isSecondary, focused } = meta;\n    return (\n      <div\n        key={id}\n        className={style}\n        onClick={() => {\n          let el = document.getElementById(id);\n          if (el) {\n            el.focus();\n          }\n        }}\n        style={{\n          top: y,\n          left: x,\n          width: width ? width : 100,\n          height: height ? height : 100,\n        }}>\n        <div className={style.element('item').modifiers({\n          focused,\n          editing,\n          selected: isSelected,\n          [type.replace(/:/, '-')]: true,\n        }, true)}/>\n        { canChange ? (\n          <button onClick={() => onChange({width, height, x, y, meta: { id, isSecondary } })}>edit</button>\n        ) : null }\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      // Variables\n      id,\n      type,\n      x,\n      y,\n      width,\n      height,\n\n      // Flags\n      isInitial,\n      isChanging,\n      canChange,\n      pointerEvents,\n      editing,\n\n      // Scales\n      pixelScale,\n      canvasScale,\n\n      // Event handlers\n      onChange, // no needed?\n      onEdit,\n      onUpdate,\n      onCommit,\n      onClick,\n\n      defaultX,\n      defaultY,\n\n      // Misc\n      meta,\n    } = this.props;\n\n    // We never render whole canvas.\n    if (type === 'WholeCanvasSelector') {\n      return null;\n    }\n\n    const posX = isChanging ? (x ? x : defaultX) : x;\n    const posY =  isChanging ? (y ? y : defaultY) : y;\n\n    // TECH DEBT.\n    if (type === 'madoc:boxdraw' && isChanging === false) {\n      return this.renderRegionBox();\n    }\n\n    return (\n      type &&\n      <Selector\n        id={id}\n        type={type}\n        drag={isChanging}\n        x={posX}\n        y={posY}\n        width={width}\n        height={height}\n        editing={editing} // false\n        onEdit={onEdit}\n        onUpdate={onUpdate}\n        onSave={onCommit}\n        canvasScale={canvasScale}\n        isSecondary={meta ? meta.isSecondary : false}\n      />\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/viewers/Region.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Region.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Region.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../../node_modules/sass-loader/lib/loader.js!./Region.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-components/src/components/viewers/Region.scss\n// module id = 861\n// module chunks = 0","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".region {\\n  position: absolute;\\n  pointer-events: auto; }\\n  .region__item {\\n    height: 100%;\\n    width: 100%;\\n    outline: 8px solid #FFF;\\n    background-color: rgba(255, 255, 255, 0.3); }\\n    .region__item--selected {\\n      outline-width: 16px; }\\n    .region__item--focused {\\n      outline-color: indigo; }\\n    .region__item--editing {\\n      outline: 16px solid #4285F4; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-components/src/components/viewers/Region.scss\n// module id = 862\n// module chunks = 0","import React, { Component, PropTypes } from 'react';\nimport Form from '../inputs/Form';\nimport BEM from 'digirati-bem-js';\nimport isEqual from 'lodash.isequal';\n\nconst baseStyle = BEM.block('full-form');\n\nclass ConfirmationForm extends Component {\n\n  // propTypes = {\n  //   draft: PropTypes.shape({\n  //     id: PropTypes.string.isRequired,\n  //     isPreviewing: PropTypes.bool.isRequired,\n  //     input: PropTypes.object.isRequired,\n  //   }),\n  //   bem: PropTypes.object,\n  //   nextLabel: PropTypes.string,\n  //   editLabel: PropTypes.string,\n  //   saveLabel: PropTypes.string,\n  //   updateField: PropTypes.func.isRequired,\n  //   onEdit: PropTypes.func,\n  //   onSave: PropTypes.func,\n  //   previewDraft: PropTypes.func.isRequired,\n  // };\n\n  shouldComponentUpdate(nextProps) {\n    return !isEqual(this.props, nextProps);\n  }\n\n  render() {\n    const {\n      // Variables.\n      draft,\n      fields,\n      bem,\n      nextLabel,\n      editLabel,\n      saveLabel,\n      children,\n      // Actions.\n      updateField,\n      onEdit,\n      onSave,\n      previewDraft,\n      ...props,\n    } = this.props;\n\n    const style = bem ? bem : baseStyle;\n\n    return (\n      <div className={style}>\n        { children ? children : (\n          <Form\n            draft={draft}\n            fields={fields}\n            updateField={(input, value) => updateField(draft.id, { [input.id]: value }) }\n            { ...props }\n          />\n        )}\n        { draft.isPreviewing ? (\n          <div className={style.element('actions')}>\n            { onEdit ? (\n              <button className={style.element('action-btn').modifiers({ first: true, last: !!onSave, })}\n                      onClick={() => onEdit(draft)}>\n                { editLabel ? editLabel : 'edit' }\n              </button>\n            ) : null }\n            { onSave ? (\n              <button className={style.element('action-btn').modifiers({ first: !!onEdit, last: true })}\n                      onClick={() => onSave(draft) }>\n                { saveLabel ? saveLabel : 'save' }\n              </button>\n            ) : null }\n          </div>\n        ) : (\n          <button className={style.element('action-btn').modifiers({ first: true, last: true })}\n                  onClick={() => previewDraft(draft.id, draft)}>\n            { nextLabel ? nextLabel : 'next' }\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default ConfirmationForm;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/composites/ConfirmationForm.js","import React, {Component} from 'react';\n\n\nclass Router extends Component {\n  // propTypes = {\n  //   routes: PropTypes.arrayOf(\n  //     PropTypes.shape({\n  //       matches: PropTypes.func.isRequired,\n  //       render: PropTypes.func.isRequired,\n  //     }).isRequired\n  //   ),\n  //   state: PropTypes.any,\n  //   renderNotFound: PropTypes.func,\n  // };\n\n  state = {\n    selected: null\n  };\n\n  // shouldComponentUpdate(_, newState) {\n  //   return newState.selected !== this.state.selected;\n  // }\n\n  render() {\n    const {routes, state, renderNotFound} = this.props;\n    for (let route of routes) {\n      if (route.matches(state)) {\n        return route.render();\n      }\n    }\n    return (\n      renderNotFound ? renderNotFound() : (\n        <div style={{color: 'darkred', fontWeight: 'bold'}}>\n          Route not found.\n        </div>\n      )\n    );\n\n  }\n}\n\nexport default Router;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-components/src/components/composites/Router.js","import React from 'react';\nimport { render } from 'react-dom';\nimport { utils } from 'digirati-annotation-plugin-core';\nimport ResourceEditorProvider from './resourceEditor.provider';\nimport { importResourceTemplate } from 'digirati-annotation-bridge';\nimport { getResourceById } from 'digirati-annotation-redux/es/query/resourceQuery';\n\nexport default function ResourceEditorPlugin($el, {\n  canvas,\n  manifest,\n  serializationStrategy,\n  resourceTemplates,\n  target = 'canvas',\n  ...unknownProps\n}, store) {\n  utils.unknownPropertyWarning(unknownProps);\n\n  if (resourceTemplates) {\n    const { dispatch } = store;\n\n    const importCaptureModel = (resourceTemplates) => {\n      let resourceTemplate = getResourceById(store.getState(), resourceTemplates);\n      if (resourceTemplate) {\n        return resourceTemplate;\n      }\n\n      return fetch(`${resourceTemplates}`)\n      .then(r => r.json())\n      .then(resourceTemplate => {\n        dispatch(importResourceTemplate(resourceTemplate, target));\n        return resourceTemplate;\n      });\n    };\n\n    return importCaptureModel(resourceTemplates)\n    .then(resourceTemplate => {\n      render((\n        <ResourceEditorProvider\n          store={store}\n          target={target}\n          tree={resourceTemplate['@id']}\n          serializationStrategy={serializationStrategy}\n          manifest={manifest}\n          importCaptureModel={importCaptureModel}\n          canvas={canvas}/>\n      ), $el);\n      return store;\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/resourceEditor.plugin.js","import flatten from 'lodash.flatten';\n\nimport {\n  COMBINE,\n  DESCRIPTION,\n  EXTERNALISE,\n  HAS_PART,\n  HUMAN_READABLE,\n  ID,\n  LABEL_PARTS,\n  MOTIVATED_BY,\n  MULTIPLE,\n  SERIALIZE,\n  TITLE,\n  UI_CHOICE\n} from '../vocab';\nimport { castBool, get, labelId, motivationFromForm } from '../helpers';\nimport { constructUnknownTemplate } from '../index';\n\nexport default class Choice {\n\n  type = 'choice';\n\n  static is(choice) {\n    const $ = get(choice);\n    return $(UI_CHOICE) === 'True' && Array.isArray($(HAS_PART))\n  }\n\n  isValidTarget(target) {\n    return !!this.choice.reduce((s, choice) => {\n      if (choice.isValidTarget(target)) {\n        s.push(choice);\n      }\n      return s;\n    }, []).length;\n  }\n\n  getTree(target) {\n    return {\n      id: this.id,\n      type: this.type,\n      title: this.title,\n      description: this.description,\n      metaData: this.metaData,\n      choice: this.choice\n        .filter(choice => choice.isValidTarget(target))\n        .map(choice => choice.type === 'choice' ? choice.getTree(target) : {\n          id: choice.id,\n          title: choice.title,\n          description: choice.description,\n          type: choice.type,\n        })\n        .reduce((s, a) => {\n          s[a.id] = a;\n          return s;\n        }, {}),\n    }\n  }\n\n  flatten() {\n    const { choice, ...item } = this;\n    return flatten([item, ...choice.map(c => c.flatten())])\n  }\n\n  static fromJsonLD(jsonLd) {\n    const $ = get(jsonLd);\n    return new Choice(\n      $(ID),\n      $(TITLE),\n      $(DESCRIPTION),\n      {\n        combine: castBool($(COMBINE, true)),\n        externalise: castBool($(EXTERNALISE, true)),\n        humanReadable: castBool($(HUMAN_READABLE, true)),\n        serialize: castBool($(SERIALIZE)),\n        multiple: castBool($(MULTIPLE)),\n        motivatedBy: motivationFromForm(labelId($(MOTIVATED_BY))),\n        labelParts: labelId($(LABEL_PARTS)),\n      },\n      $(HAS_PART).map(\n        template => constructUnknownTemplate(template),\n      ),\n    );\n  }\n\n  static fromData({ id, title, description, metaData = {}, choices }) {\n    return new Choice(id, title, description, metaData, choices);\n  }\n\n  constructor(id, title, description, metaData = {}, choices) {\n    this.id = id;\n    this.title = title;\n    this.description = description;\n    this.metaData = metaData;\n    this.choice = choices;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/model/Choice.js","import { castBool, castId, get, labelId, motivationFromForm } from '../helpers';\nimport {\n  COMBINE,\n  DESCRIPTION,\n  EXTERNALISE,\n  HAS_PART,\n  HUMAN_READABLE,\n  ID,\n  LABEL_PARTS,\n  MOTIVATED_BY,\n  MULTIPLE,\n  SELECTOR,\n  SERIALIZE,\n  TITLE,\n  UI_GROUP\n} from '../vocab';\nimport Field from './Field';\n\nexport default class CaptureModel {\n\n  type = 'captureModel';\n\n  static fromJsonLD(jsonLd) {\n    const asArray = (a) => Array.isArray(a) ? a : [a];\n    const $ = get(jsonLd);\n    return new CaptureModel(\n      $(ID),\n      $(TITLE),\n      $(DESCRIPTION),\n      {\n        combine: castBool($(COMBINE, true)),\n        externalise: castBool($(EXTERNALISE, true)),\n        humanReadable: castBool($(HUMAN_READABLE, true)),\n        serialize: castBool($(SERIALIZE)),\n        multiple: castBool($(MULTIPLE)),\n        // selectorValue: $(),\n        selector: $(SELECTOR) ? castId($(SELECTOR)).toLowerCase() : null,\n        motivatedBy: motivationFromForm(\n          labelId($(MOTIVATED_BY)),\n        ),\n        labelParts: labelId($(LABEL_PARTS)),\n      },\n      asArray($(HAS_PART)).map(\n        field => Field.fromJsonLD(field),\n      )\n    );\n  }\n\n  isValidTarget(target) {\n    if (target === 'canvas') {\n      return true;\n    }\n    return (\n      (!this.metaData.selector ||\n      this.metaData.selector.toLowerCase() === 'wholecanvasselector') && (\n        this.fields.reduce((s, field) => {\n          if (field.isValidTarget(target)) {\n            return s;\n          }\n          return false;\n        }, true)\n      )\n    );\n  }\n\n  flatten() {\n    const { fields, ...item } = this;\n    return [item, ...this.dereferenceFields(fields)];\n  }\n\n  dereferenceFields(fields) {\n    return fields.map(field => field.getReference(this));\n  }\n\n  constructor(id, title, description, metaData, fields) {\n    this.id = id;\n    this.title = title;\n    this.description = description;\n    this.metaData = metaData || {};\n    this.fields = fields;\n  }\n\n  static is(jsonLd) {\n    const $ = get(jsonLd);\n    return $(UI_GROUP) ? $(UI_GROUP)[ID] === 'madoc:form' : false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/model/CaptureModel.js","import { get, labelId, parseSelectorTarget } from '../helpers';\nimport {\n  BODY_TYPE,\n  CONFORMS_TO,\n  DESCRIPTION,\n  ID,\n  INPUT_OPTIONS,\n  INPUT_TYPE,\n  PURPOSE,\n  RDFS_LABEL,\n  SELECTOR,\n  SELECTOR_VALUE,\n  TITLE,\n  TYPE,\n  FIELD_GROUP,\n} from '../vocab';\n\nexport default class Field {\n\n  type = 'field';\n\n  getReference(parent) {\n    return { parentId: parent.id, ...this };\n  }\n\n  static getAutocompleteEndpoint(options) {\n    if (!options) {\n      return null;\n    }\n    return (\n      options[0] ?\n        options[0] :\n        (\n          options['@id'] ?\n            options['@id'] :\n            null\n        )\n    );\n  }\n\n  constructor(id, inputType, annotationMetaData, omekaMetaData, metaData) {\n    this.id = id;\n    this.inputType = inputType;\n    this.annotationMetaData = annotationMetaData;\n    this.omekaMetaData = omekaMetaData;\n    this.metaData = metaData;\n  }\n\n  isValidTarget(target) {\n    if (target === 'canvas') {\n      return true;\n    }\n    return !(\n      this.metaData.selector &&\n      this.metaData.selector.toLowerCase() !== 'wholecanvasselector'\n    );\n  }\n\n  static fromJsonLD(jsonLd) {\n    const $ = get(jsonLd);\n    return new Field(\n      $(ID),\n      $(INPUT_TYPE, { [ID]: null })[ID],\n      {\n        options: $(INPUT_OPTIONS),\n        autocomplete: Field.getAutocompleteEndpoint($(INPUT_OPTIONS)),\n      },\n      {\n        type: $(TYPE),\n        group: labelId(\n          $(FIELD_GROUP),\n        ),\n        bodyType: labelId(\n          $(BODY_TYPE),\n        ),\n        purpose: labelId(\n          $(PURPOSE),\n        ),\n      },\n      {\n        title: $(RDFS_LABEL) || $(TITLE),\n        description: $(DESCRIPTION),\n        conformsTo: labelId(\n          $(CONFORMS_TO),\n        ),\n        selector: $(SELECTOR) ? $(SELECTOR)[ID] : null,\n        selectorValue: parseSelectorTarget($(SELECTOR_VALUE)),\n      },\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-bridge/src/model/Field.js","import type Motivation from './Annotation';\nimport Annotation from './Annotation';\nimport AnnotationBodyList from './AnnotationBodyList';\nimport AnnotationSelector from './AnnotationSelector';\nimport AnnotationBody from './AnnotationBody';\nimport { getForm } from '../../query/resourceQuery';\n\n// Draft value is {id: 'http://..'}\nexport const FIELD_TYPES_THAT_ARE_ENTITIES = ['madoc:nullableCaptureModel', 'madoc:fallbackOptions'];\n// Draft value is {label: 'human readable'}\nexport const FIELD_TYPES_THAT_ARE_HUMAN_READABLE = ['madoc:nullableCaptureModel', 'madoc:fallbackOptions'];\n\nexport function createCombinedAnnotationBody(captureModel, draft): Array<AnnotationBody> {\n  return []; // @todo\n}\n\n/**\n * @deprecated for reference only\n */\nexport function dataSetToSingleAnnotation(template, dataset) {\n  const { metaData: { title, description } } = template;\n\n  dataset.context = dataset.context ? dataset.context : {};\n  if (title) {\n    dataset.context.Title = 'http://dublincore.org/documents/dcmi-terms/#terms-title';\n    dataset.Title = title;\n  }\n  if (description) {\n    dataset.context.Description = 'http://dublincore.org/documents/dcmi-terms/#terms-description';\n    dataset.Description = description;\n  }\n\n  const body = {\n    type: ['TextualBody', 'Dataset'],\n    value: JSON.stringify(dataset),\n    format: 'text/plain',\n  };\n\n  return { body, label: title };\n}\n\n/**\n * @deprecated for reference only\n */\nexport function getIndividualW3CAnnotationBodies(captureModel, draft) {\n  const fields = Object.values(getForm(captureModel).fields);\n\n  const selectors = Object.keys(draft.selectors || {})\n  .map(key => ({ id: key, value: draft.selectors[key] }))\n  .map(selector => {\n    const capModel = fields.find(model => model.id === selector.id);\n    return dataSetToSingleAnnotation(\n      capModel,\n      mapDraftToDataSet(fields, { [selector.id]: draft.input[selector.id] }),\n    );\n  });\n  const keyedSelectors = {};\n  for (let selector of selectors) {\n    keyedSelectors[selector.id] = selector.annotation;\n  }\n\n  return keyedSelectors;\n}\n\nexport function mapFieldsToDataSet(fields, data) {\n  const contexts = {};\n  const body = {};\n\n  fields.filter(e => e).forEach(model => {\n    if (model.metaData.conformsTo && data[model.id]) {\n      if (model.metaData.conformsTo.label !== model.metaData.conformsTo.id) {\n        contexts[model.metaData.conformsTo.label] = model.metaData.conformsTo.id;\n      }\n      body[model.metaData.conformsTo.label] = data[model.id];\n    }\n  });\n\n  return {\n    '@context': contexts,\n    ...body\n  };\n}\n\nfunction getModelFields(ids, fields) {\n  if (Array.isArray(fields)) {\n    return ids.map(fieldId => fields.find(field => field.id === fieldId));\n  }\n  return ids.map(fieldId => fields[fieldId]);\n}\n\nexport function mapDraftToDataSet(captureModel, draft) {\n  const fieldIds = Object.keys(draft.input);\n  const fields = getModelFields(fieldIds, captureModel.fields);\n  return mapFieldsToDataSet(fields, draft.input);\n}\n\n\nexport function createExternalResourceAnnotationBody(captureModel, draft): Array<AnnotationBody> {\n\n  const fieldIds = Object.keys(draft.input);\n  const fields = getModelFields(fieldIds, captureModel.fields);\n  // const fields = fieldIds.map(fieldId => captureModel.fields.find(field => field.id === fieldId));\n  return fields.filter(e => e).reduce((state, field) => {\n    if (FIELD_TYPES_THAT_ARE_ENTITIES.indexOf(field.inputType) !== -1) {\n      const draftInput = draft.input[field.id];\n      if (!draftInput) {\n        return state;\n      }\n      if (draftInput.url) {\n        state.push(\n          new AnnotationBody(\n            null,\n            null,\n            'application/json',\n            'SpecificResource',\n            null,\n            draftInput.url,\n          ),\n        );\n      }\n    }\n    return state;\n  }, []);\n}\n\nexport function createHumanReadableAnnotationBody(captureModel, draft): Array<AnnotationBody> {\n  const fieldIds = Object.keys(draft.input);\n  const fields = getModelFields(fieldIds, captureModel.fields);\n  // const fields = fieldIds.map(fieldId => captureModel.fields.find(field => field.id === fieldId));\n\n  return fields.filter(e => e).reduce((state, field) => {\n    if (FIELD_TYPES_THAT_ARE_HUMAN_READABLE.indexOf(field.inputType) !== -1) {\n      const draftInput = draft.input[field.id];\n      if (!draftInput) {\n        return state;\n      }\n      if (draftInput.label) {\n        state.push(\n          new AnnotationBody(\n            null,\n            draftInput.label,\n            'text/plain',\n            'Text',\n          ),\n        );\n      }\n    }\n    return state;\n  }, []);\n}\n\nexport function createSerializedAnnotationBody(captureModel, draft): ?AnnotationBody {\n  const dataSet = mapDraftToDataSet(captureModel, draft);\n\n  if (dataSet) {\n    return new AnnotationBody(\n      null,\n      JSON.stringify(dataSet),\n      'text/plain',\n      'Dataset',\n    )\n  }\n  return null;\n}\n\nexport function createMultipleAnnotations(target, captureModel, draft): ?Annotation {\n  const fieldKeys = Object.keys(draft.input);\n\n  const fields = fieldKeys.map(key => draft.input[key] ? ({\n    id: key,\n    input: draft.input[key],\n    selector: draft.selectors[key]\n  }) : null).filter(e => e);\n\n  return fields.map(field => {\n    const captureModelField = captureModel.fields[field.id];\n    const { metaData: { title, description }, omekaMetaData: { purpose } } = captureModelField;\n\n    const dataSet = mapFieldsToDataSet([captureModel.fields[field.id]], {\n      [field.id]: field.input\n    });\n\n    dataSet['@context'] = dataSet['@context'] ? dataSet['@context'] : {};\n    if (title) {\n      dataSet['@context'].Title = 'http://dublincore.org/documents/dcmi-terms/#terms-title';\n      dataSet.Title = title;\n    }\n    if (description && description !== title) {\n      dataSet['@context'].Description = 'http://dublincore.org/documents/dcmi-terms/#terms-description';\n      dataSet.Description = description;\n    }\n\n    return new Annotation(\n      null,\n      field.input,\n      new AnnotationBodyList(\n        new AnnotationBody(\n          null,\n          JSON.stringify(dataSet),\n          'text/plain',\n          'Dataset',\n          purpose ? purpose.id : null,\n        )\n      ),\n      AnnotationSelector.fromTarget(target, field.selector)\n    );\n  });\n}\n\nexport function getGenerator(captureModel) {\n  return captureModel.id;\n}\n\nexport function getLabelFromDraft(labelParts, captureModel, draft): string {\n  if (!(\n      labelParts &&\n      labelParts.label\n    )) {\n    return null;\n  }\n  const fieldIds = Object.keys(draft.input);\n  const fields = getModelFields(fieldIds, captureModel.fields);\n  const labelField = labelParts.label;\n\n  return fields.filter(e => e).reduce((label, model) => {\n    if (label) return label;\n    if (model.metaData.conformsTo && draft.input[model.id] && model.metaData.conformsTo.label === labelField) {\n      return draft.input[model.id];\n    }\n    return label;\n  }, '');\n}\n\nexport function getSuitableLabelFromBody(bodies) {\n  let label = 'unknown';\n  const found = bodies.find(body => {\n    if (\n      body.type.indexOf('Text') !== -1 &&\n      body.value\n    ) {\n      return true;\n    }\n  });\n  return (found && found.value) ? found.value : label;\n}\n\nexport function getMotivation(motivatedBy, captureModel, draft): Motivation {\n  if (motivatedBy.id) {\n    return {\n      id: motivatedBy.id,\n      label: motivatedBy.instance,\n    };\n  }\n  return {\n    id: 'oa:tagging',\n    label: 'Tagging',\n  };\n}\n\nexport function convertPercentToPixel(props, height, width) {\n  return {\n    ...props,\n    left: (props.x / 100) * width,\n    top: (props.y / 100) * height,\n    width: (props.width / 100) * width,\n    height: (props.height / 100) * height,\n    immutable: true,\n    scale: 1,\n    unit: 'pixel',\n  };\n}\n\nexport function createAnnotationFromCaptureModelAndDraft(target, captureModel, draft, customDraftSelector) {\n  const bodies = [];\n  let label = 'unknown';\n  const draftSelector = customDraftSelector || draft.selector;\n\n  let motivation = {\n    id: 'oa:tagging',\n    label: 'Tagging',\n  };\n\n  const {\n    combine = false,\n    externalise = true,\n    humanReadable = false,\n    serialize = true,\n    labelParts,\n    motivatedBy,\n  } = captureModel.metaData;\n\n  if (combine === false) {\n    return createMultipleAnnotations(target, captureModel, draft);\n  }\n\n  if (combine) {\n    createCombinedAnnotationBody(captureModel, draft).forEach(body => bodies.push(body));\n  }\n\n  if (externalise) {\n    createExternalResourceAnnotationBody(captureModel, draft).forEach(body => bodies.push(body));\n  }\n\n  if (humanReadable) {\n    createHumanReadableAnnotationBody(captureModel, draft).forEach(body => bodies.push(body));\n  }\n\n  if (serialize) {\n    const serializedBody = createSerializedAnnotationBody(captureModel, draft);\n    if (serializedBody) {\n      bodies.push(serializedBody);\n    }\n  }\n\n  if (labelParts) {\n    label = getLabelFromDraft(labelParts, captureModel, draft) || getSuitableLabelFromBody(bodies);\n  }\n\n  if (motivatedBy) {\n    motivation = getMotivation(motivatedBy, captureModel, draft);\n  }\n\n  const generator = getGenerator(captureModel);\n\n  return new Annotation(\n    null,\n    label,\n    AnnotationBodyList.fromJsonLD(bodies),\n    AnnotationSelector.fromTarget(target, draftSelector),\n    motivation,\n    generator\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-redux/src/lib/annotation/mapping.js","import React from 'react';\nimport {ConfirmationForm} from 'digirati-annotation-components';\n\n/**\n * Rendering the form, mostly sent off to ConfirmationForm component.\n *\n * @param currentResourceTemplate\n * @param resourceForm\n * @param currentDraft\n * @param previewDraft\n * @param updateDraft\n * @param onSave\n * @param unpreviewDraft\n * @param isSelecting\n * @param isSelectingSecondary\n * @param goBack\n * @param editFieldSelector\n * @param currentTree\n * @param elementEvents\n * @param hideTitle\n * @returns {XML}\n */\nexport default function renderForm({\n  currentResourceTemplate,\n  resourceForm,\n  currentDraft,\n  previewDraft,\n  updateDraft,\n  onSave,\n  unpreviewDraft,\n  isSelecting,\n  isSelectingSecondary,\n  renderResourceEditor,\n  importCaptureModel,\n  goBack,\n  editFieldSelector,\n  currentTree,\n  elementEvents,\n  hideTitle,\n  ...props\n}) {\n  return (\n    <div style={{paddingLeft: 20}}>\n      { !hideTitle ? (\n        <div>\n          <h1>{currentResourceTemplate.title}</h1>\n          <p>{currentResourceTemplate.description}</p>\n        </div>\n      ) : null }\n      {currentDraft.template === currentTree ? (\n        <div>\n          <ConfirmationForm\n            draft={currentDraft}\n            fields={Object.values(resourceForm.fields)}\n            isSelecting={isSelectingSecondary || isSelecting}\n            displayFieldSelector={editFieldSelector}\n            elementEvents={elementEvents}\n            saveFieldSelector=\"\"\n            onEdit={(draft) => unpreviewDraft(draft.id)}\n            onSave={(draft) => onSave(draft)}\n            previewDraft={previewDraft}\n            importCaptureModel={importCaptureModel}\n            renderResourceEditor={renderResourceEditor}\n            updateField={updateDraft}\n            {...props}\n          />\n          { goBack ? <a href=\"#\" onClick={(e) => {\n            e.preventDefault();\n            goBack();\n          }}>\n            Back\n          </a> : null }\n        </div>\n      ) : (\n        <div>Form disabled, please complete other annotation</div>\n      )}\n    </div>\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/views/renderForm.js","import React, {Component} from 'react';\n\n/**\n * @deprecated\n */\nexport function convertPercentToPixel(props, height, width) {\n  return {\n    ...props,\n    left: (props.x / 100) * width,\n    top: (props.y / 100) * height,\n    width: (props.width / 100) * width,\n    height: (props.height / 100) * height,\n    immutable: true,\n    scale: 1,\n    unit: 'pixel',\n  };\n}\n\nexport function immediate(loading, fn) {\n  return class extends Component {\n    componentDidMount() {\n      fn();\n    }\n\n    render() {\n      return <div>{loading}</div>\n    }\n  };\n}\n\n/**\n * @deprecated\n */\nexport function getTargetFromRegion(canvas, region, height, width) {\n  if (region.type === 'WholeCanvasSelector') {\n    return canvas;\n  }\n  if (region.unit === 'percent') {\n    return getTargetFromRegion(canvas, convertPercentToPixel(region, height, width), height, width);\n  }\n  if (\n    region.width === null || isNaN(region.width) ||\n    region.height === null || isNaN(region.height)\n  ) {\n    return `${canvas}#xywh=${Math.floor(region.left)},${Math.floor(region.top)},0,0`;\n  }\n\n  return `${canvas}#xywh=${Math.floor(region.left)},${Math.floor(region.top)},${Math.floor(region.width)},${Math.floor(region.height)}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/resourceEditor.utility.js","import React from 'react';\nimport BEM from 'digirati-bem-js';\nimport './button.scss';\n\nconst $confirmationPage = BEM.block('confirmation-page');\nconst $button = BEM.block('button');\n\nexport default function confirmationPage({onConfirm}) {\n  return (\n    <div className={$confirmationPage}>\n      <h3 className={$confirmationPage.element('title')}>Your annotation has been added to the photo.</h3>\n      <p className={$confirmationPage.element('copy')}>Do you want to add another?</p>\n      <button className={$button.modifier('confirmation')} onClick={onConfirm}>\n        Start again\n      </button>\n    </div>\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/views/confirmationPage.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./button.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./button.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./button.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-plugin-resource-editor/src/views/button.scss\n// module id = 879\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".editor-button {\\n  width: 200px;\\n  padding: 12px;\\n  border: 3px solid #000;\\n  font-weight: bold;\\n  font-size: 14px;\\n  margin-bottom: 10px;\\n  background-color: #FFF;\\n  cursor: pointer; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-plugin-resource-editor/src/views/button.scss\n// module id = 880\n// module chunks = 0","import React from 'react';\nimport BEM from 'digirati-bem-js';\nimport './resourceNavigation.scss';\n\nconst $resourceNavigation = BEM.block('resource-navigation');\n\n/**\n * Loops through the available capture models and displays information about them.\n * Using the passed in createDraft the UI should attach a click handler.\n */\nexport default function resourceNavigation({resourceTemplates, createDraft, moveForward, moveBack, showBackButton}) {\n\n  const handleItemClick = (item) => () => {\n    moveForward(item.id);\n    if (item.type === 'captureModel') {\n      createDraft(item);\n    }\n  };\n\n  return (\n    <div className={$resourceNavigation}>\n      <h2 className={$resourceNavigation.element('heading')}>What do you want to tag</h2>\n      {\n        Object.values(resourceTemplates).map(item => (\n          <div key={item.id}\n               className={$resourceNavigation.element('metadata')}\n               onClick={handleItemClick(item)}>\n            <div className={$resourceNavigation.element('title')}>{item.title}</div>\n            <div className={$resourceNavigation.element('description')}>{item.description}</div>\n          </div>\n        ))\n      }\n      {showBackButton ? (\n        <div onClick={moveBack} className={$resourceNavigation.element('back')}>\n          back\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-resource-editor/src/views/resourceNavigation.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./resourceNavigation.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./resourceNavigation.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?importLoaders=1!../../../../node_modules/sass-loader/lib/loader.js!./resourceNavigation.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./packages/annotation-plugin-resource-editor/src/views/resourceNavigation.scss\n// module id = 882\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".resource-navigation {\\n  padding-left: 20px; }\\n  .resource-navigation__metadata {\\n    padding: 20px;\\n    cursor: pointer;\\n    border: 3px solid #000;\\n    margin-top: 20px; }\\n  .resource-navigation__title {\\n    font-weight: bold; }\\n  .resource-navigation__back {\\n    padding: 5px;\\n    width: 50%;\\n    cursor: pointer;\\n    border: 3px solid #000;\\n    margin-top: 20px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?importLoaders=1!./node_modules/sass-loader/lib/loader.js!./packages/annotation-plugin-resource-editor/src/views/resourceNavigation.scss\n// module id = 883\n// module chunks = 0","import plugin from './transcriber.plugin';\nimport provider from './transcriber.provider';\nimport Component from './transcriber';\n\nexport {\n  Component,\n  provider,\n  plugin,\n};\n\nexport default plugin;\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-transcriber/src/index.js","import React from 'react';\nimport {render} from 'react-dom';\nimport {utils} from 'digirati-annotation-plugin-core';\nimport TranscriberProvider from './transcriber.provider';\nimport {importResourceTemplate} from 'digirati-annotation-bridge';\n\nexport default function TranscriberPlugin($el, {\n  canvas,\n  manifest,\n  transcriptionVocab,\n  serializationStrategy,\n  resourceTemplates,\n  target = 'canvas',\n  ...unknownProps\n}, store) {\n  const transcription = `${$el.innerText}`;\n  utils.unknownPropertyWarning(unknownProps);\n\n  if (resourceTemplates) {\n    const {dispatch} = store;\n\n    return fetch(`${resourceTemplates}`)\n    .then(r => r.json())\n    .then(resourceTemplate => {\n\n      dispatch(importResourceTemplate(resourceTemplate, target));\n\n      return resourceTemplate;\n    })\n    .then(resourceTemplate => {\n      render((\n        <TranscriberProvider\n          store={store}\n          target={target}\n          transcription={transcription}\n          transcriptionVocab={transcriptionVocab || 'dcterms:description'}\n          tree={resourceTemplate['@id']}\n          serializationStrategy={serializationStrategy}\n          manifest={manifest}\n          canvas={canvas}/>\n      ), $el);\n      return store;\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-transcriber/src/transcriber.plugin.js","import TaggingAnnotationsComponent from './tagging-annotations.component';\nimport TaggingAnnotationsPlugin from './tagging-annotations.plugin';\nimport TaggingAnnotationsProvider from './tagging-annotations.provider';\nimport TaggingComponent from './tagging';\nimport TaggingPlugin from './tagging.plugin';\nimport TaggingProvider from './tagging.provider';\n\nexport {\n    TaggingAnnotationsComponent,\n    TaggingAnnotationsPlugin,\n    TaggingAnnotationsProvider,\n    TaggingComponent,\n    TaggingPlugin,\n    TaggingProvider,\n}\n\nexport default {};\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/index.js","import React from 'react';\n\n/**\n * Generate a DOM for displaying an annotation as a tag block.\n *\n * @param annotation\n * @returns {XML}\n */\nexport function annotationToTag(annotation) {\n    let bodyDetails = tagDetails(annotation);\n\n    return (\n        <div key={bodyDetails.uri} className=\"c-tag\"><a href={bodyDetails.uri}>{bodyDetails.label}</a></div>\n    );\n}\n\n/**\n * Extract and return the tag details from an Annotation body using the `TextualBody` and `SpecificResource`\n * items.\n *\n * @param annotation\n */\nexport function tagDetails(annotation) {\n    return annotation.body.reduce((details, fragment) => {\n        switch (fragment.type) {\n            case 'TextualBody':\n            case 'Text':\n                details['label'] = fragment['value'];\n                break;\n            case 'SpecificResource':\n                details['uri'] = fragment['source'];\n                break;\n        }\n\n        return details;\n    }, {});\n}\n\n/**\n * Parse and return the entity class for a given source URI.\n *\n * @param uri\n */\nexport function tagClassForUri(uri: string): ?string {\n    const regex = /\\/topics\\/(?:virtual:)?([A-Za-z_+-].+)\\//;\n    const matches = regex.exec(uri);\n\n    if (matches.length > 1) {\n        return matches[1];\n    } else {\n        return null;\n    }\n}\n\n/**\n * Currying function that returns a predicate checking if the given Annotation is a tag associated with certain\n * {@code types} of entities.\n *\n * @param types A collection of entity types this tag must be related to.\n * @returns {function(*)}\n */\nexport function isTaggedAs(types) {\n    return (annotation) => {\n        let body = Array.isArray(annotation.body) ? annotation.body : [];\n\n        return body.some(fragment => {\n            if (!fragment || !fragment.type || fragment.type.toLowerCase() !== 'specificresource') {\n                return false;\n            }\n\n            let source = fragment.source || fragment.id;\n            let entityType = tagClassForUri(source);\n\n            return types.some(type => type.toLowerCase() === entityType.toLowerCase());\n        });\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging.utils.js","import TaggingAnnotationsProvider from './tagging-annotations.provider';\nimport React from \"react\";\nimport {render} from 'react-dom';\n\nexport default function TaggingAnnotationsPlugin(root, attributes, store) {\n    const {\n        entityTypes\n    } = attributes;\n\n    const types = entityTypes.split(',').map(type => type.substring(7).toLowerCase());\n\n    return render((\n        <TaggingAnnotationsProvider\n            store={store}\n            entityTypes={types}\n        />\n    ), root);\n}\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging-annotations.plugin.js","import TaggingProvider from './tagging.provider';\nimport React from 'react';\nimport { render } from 'react-dom';\n\nimport { importResourceTemplate } from 'digirati-annotation-bridge';\n\n\nexport default function TaggingPlugin($el, attributes, store) {\n  const {\n    canvas,\n    manifest,\n    resourceTemplates,\n    target = 'canvas',\n    entityTypes,\n  } = attributes;\n\n  const { dispatch } = store;\n\n  const importCaptureModel = (resourceTemplates) => {\n    return fetch(`${resourceTemplates}`)\n    .then(r => r.json())\n    .then(resourceTemplate => {\n      dispatch(importResourceTemplate(resourceTemplate, target));\n      return resourceTemplate;\n    });\n  };\n\n  if (resourceTemplates) {\n    return fetch(`${resourceTemplates}`)\n    .then(r => r.json())\n    .then(resourceTemplate => {\n      dispatch(importResourceTemplate(resourceTemplate, target));\n      return resourceTemplate;\n    })\n    .then(resourceTemplate => {\n      render((\n        <TaggingProvider\n          store={store}\n          target={target}\n          manifest={manifest}\n          canvas={canvas}\n          tree={resourceTemplate['@id']}\n          importCaptureModel={importCaptureModel}\n          content={$el.innerText}\n        />\n      ), $el);\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-plugin-tagging/src/tagging.plugin.js","import React from 'react';\nimport {connector} from 'digirati-annotation-redux';\nimport {currentImageService} from 'digirati-annotation-redux/es/query/manifestQuery';\nimport { getAnnotationBody } from 'digirati-annotation-bridge/es/annotations';\n\nfunction getImageFromTarget(state, annotation, target, size) {\n  const imageService = currentImageService(state);\n  if (imageService) {\n    const prefix = imageService.split('info.json')[0];\n    const src = `${prefix}${target.x},${target.y},${target.width},${target.height}/${size},/0/default.jpg`;\n    const body = getAnnotationBody(annotation);\n\n    return (\n      <div className=\"c-image c-image--sm-sq\" key={annotation.id}>\n        <div className=\"c-image__src\">\n          <img src={src}/>\n        </div>\n        <div className=\"c-image__info\">\n          <p>{body['foaf:name'] ? body['foaf:name'] : body.textualBody ? body.textualBody : <em>No content found</em>}</p>\n          <div className=\"c-image__actions\">\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction RegionAnnotations(props) {\n  return (<div className=\"c-dig-image-grid c-dig-image-grid--sm\">\n    { props.regionAnnotations ? props.regionAnnotations.map(annotation =>\n      getImageFromTarget(props.state, annotation, annotation.selector.target, 150)) :\n      'loading...' }\n  </div>);\n}\n\nexport default connector(RegionAnnotations);\n\n\n\n// WEBPACK FOOTER //\n// ./packages/annotation-application/src/js/region-annotations.js"],"sourceRoot":""}